{"posts":[{"title":"Rediså…¥é—¨","content":"Rediså…¥é—¨ ç®€ä»‹ REmote DIctionary Server(Redis) æ˜¯ä¸€ä¸ªç”±Salvatore Sanfilippoå†™çš„key-valueå­˜å‚¨ç³»ç»Ÿã€‚ Redisæ˜¯ä¸€ä¸ªå¼€æºçš„ä½¿ç”¨ANSI Cè¯­è¨€ç¼–å†™ã€éµå®ˆBSDåè®®ã€æ”¯æŒç½‘ç»œã€å¯åŸºäºå†…å­˜äº¦å¯æŒä¹…åŒ–çš„æ—¥å¿—å‹ã€Key-Valueæ•°æ®åº“ï¼Œå¹¶æä¾›å¤šç§è¯­è¨€çš„APIã€‚ å®ƒé€šå¸¸è¢«ç§°ä¸ºæ•°æ®ç»“æ„æœåŠ¡å™¨ï¼Œå› ä¸ºå€¼ï¼ˆvalueï¼‰å¯ä»¥æ˜¯ å­—ç¬¦ä¸²(String), å“ˆå¸Œ(Hash), åˆ—è¡¨(list), é›†åˆ(sets) å’Œ æœ‰åºé›†åˆ(sorted sets)ç­‰ç±»å‹ Redis çš„é…ç½®æ–‡ä»¶ä½äº Redis å®‰è£…ç›®å½•ä¸‹ï¼Œæ–‡ä»¶åä¸º redis.conf Redisæ“ä½œåº“å‘½ä»¤ å‘½ä»¤ æè¿° select ä¸‹æ ‡[0~15] åˆ‡æ¢å¯¹äºåº“ dbsize å½“å‰åº“ä»¥å­˜å‚¨å¤§å° flushdb åˆ é™¤å½“å‰åº“ä¸­æ‰€æœ‰æ•°æ® flushall åˆ é™¤å…¨éƒ¨åº“æ•°æ® Redis keys å¸¸ç”¨å‘½ä»¤ å‘½ä»¤ æè¿° del key key å­˜åœ¨æ—¶åˆ é™¤key dump key åºåˆ—åŒ–ç»™å®škeyï¼Œå¹¶è¿”å›è¢«åºåˆ—åŒ–çš„å€¼ exists key æ£€æŸ¥keyæ˜¯å¦å­˜åœ¨ expire key 5 è®¾ç½®key 5ç§’è¿‡æœŸ keys pattern æŸ¥æ‰¾æ‰€æœ‰ç¬¦åˆpatternæ¡ä»¶çš„key ttl key æ£€æŸ¥keyè¿‡æœŸæ—¶é—´å‰©ä½™æ—¶é—´ Redis String å¸¸ç”¨å‘½ä»¤ å‘½ä»¤ æè¿° set key value è®¾ç½®keyçš„å€¼ä¸ºvalue setrang key åç§»é‡ value ç”¨valueå€¼è¦†å†™ç»™å®škeyæ‰€å‚¨å­˜çš„å­—ç¬¦ä¸²å€¼ï¼Œä»åç§»é‡å¼€å§‹ strlen key è¿”å›keyå­—ç¬¦ä¸²é•¿åº¦ setex key 5 value å°†å€¼valueå…³è”åˆ°keyï¼Œå¹¶å°†keyçš„è¿‡æœŸæ—¶é—´è®¾ä¸º5ç§’ setex key value keyçš„å€¼ä¸å­˜åœ¨å°±è®¾ç½®valueå€¼ get key è·å–keyçš„å€¼ getrange key 0 1 è·å–keyçš„ç¬¬ä¸€ä½å€¼ getset key value å°†ç»™å®škeyçš„å€¼è®¾ä¸ºvalueï¼Œå¹¶è¿”å›keyçš„æ—§å€¼ mset key1 value1 key2 value2 åŒæ—¶è®¾ç½®ä¸€ä¸ªæˆ–å¤šä¸ªkey-valueå¯¹ incr key å°†keyä¸­çš„æ•°å­— ++ incrby key 10 å°†keyä¸­çš„æ•°å­— +=10 decr key å°†keyä¸­çš„æ•°å­— -- decrby key 10 å°†keyä¸­çš„æ•°å­— -=10 append key newValue ç»™å­˜åœ¨çš„keyå¹¶ä¸”å€¼æ˜¯å­—ç¬¦ä¸²å°±åœ¨æœ€åæœ€åŠ newValue Redis Hash å¸¸ç”¨å‘½ä»¤ å‘½ä»¤ æè¿° hset key field value è®¾ç½®å“ˆå¸Œè¡¨keyå­—æ®µfieldçš„å€¼ä¸ºvalue hsetnx key field value å“ˆå¸Œè¡¨keyå­—æ®µä¸å­˜åœ¨æ—¶ï¼Œè®¾ç½®fieldçš„å€¼ä¸ºvalue hmsetnx key field1 value1 field2 value2 è®¾ç½®å“ˆå¸Œè¡¨keyå­—æ®µfield1çš„å€¼ä¸ºvalue1,field2 value2çš„å€¼ hget key field è·å–å“ˆå¸Œè¡¨ä¸­key fieldçš„å€¼ hgetall key è·å–å“ˆå¸Œè¡¨ä¸­keyæ‰€æœ‰å­—æ®µå’Œå€¼ hkeys key è·å–æ‰€æœ‰å“ˆå¸Œè¡¨ä¸­keyæ‰€æœ‰å­—æ®µ hvals key è·å–æ‰€æœ‰å“ˆå¸Œè¡¨ä¸­keyæ‰€æœ‰å€¼ hexists key field æŸ¥çœ‹å“ˆå¸Œè¡¨ä¸­key fieldå­—æ®µæ˜¯å¦å­˜åœ¨ hdel key field1 field2 åˆ é™¤ä¸€ä¸ªæˆ–è€…å¤šä¸ªå“ˆå¸Œè¡¨å­—æ®µ Redis List å¸¸ç”¨å‘½ä»¤ å‘½ä»¤ æè¿° lpush key value1 value2 æ·»åŠ value1 value2åˆ°åˆ—è¡¨å¤´éƒ¨ lpushx key value æ·»åŠ valueæ·»åŠ åˆ°keyçš„åˆ—è¡¨å¤´éƒ¨ rpush key value1 value2 æ·»åŠ value1 value2åˆ°keyçš„åˆ—è¡¨ä¸­ rpushx key value ä¸ºå­˜åœ¨çš„keyæ·»åŠ valueå€¼ lset key 0 value é€šè¿‡ç´¢å¼•è®¾ç½®å€¼(è®¾ç½®keyçš„ç¬¬ä¸€ä¸ªå­—æ®µçš„å€¼ä¸ºvalue) lindex key 0 è·å–keyä¸­ç¬¬ä¸€ä¸ªå…ƒç´  lrange key 0 1 è·å–keyä¸­å‰ä¸¤ä¸ªå…ƒç´  lpop key ç§»é™¤å¹¶è·å–keyåˆ—è¡¨çš„ç¬¬ä¸€å…ƒç´  rpop key ç§»é™¤å¹¶è·å–keyåˆ—è¡¨çš„æœ€åä¸€ä¸ªå…ƒç´  lrem key ç§»é™¤å¹¶è·å–keyåˆ—è¡¨çš„ç¬¬ä¸€å…ƒç´  llen key è·å–keyåˆ—è¡¨é•¿åº¦ Redis Set å¸¸ç”¨å‘½ä»¤ å‘½ä»¤ æè¿° sadd key value1 value2 å‘é›†åˆå†…å¢åŠ value1 value2 scard key è·å–é›†åˆçš„æˆå‘˜æ•° sdiff key key2 è¿”å›ç¬¬ä¸€ä¸ªé›†åˆå’Œå…¶å®ƒé›†åˆçš„å·®å¼‚ sdiffstore destination key1 key2 è¿”å›key1 key2é›†åˆçš„å·®å¼‚å¹¶ä¸”å­˜å‚¨åœ¨destinationé›†åˆé‡Œé¢ sinter key1 key2 è¿”å›key1 key2é›†åˆäº¤é›† sunion key1 key2 è¿”å›key1 key2é›†åˆçš„å¹¶é›† sinterstore destination key1 key2 è¿”å›key1 key2é›†åˆçš„äº¤é›†å¹¶ä¸”å­˜å‚¨åœ¨destinationé›†åˆé‡Œé¢ sunionstore destination key1 key2 è¿”å›key1 key2é›†åˆçš„å¹¶é›†å¹¶ä¸”å­˜å‚¨åœ¨destinationé›†åˆé‡Œé¢ sismember key value åˆ¤æ–­valueæ˜¯å¦åœ¨é›†åˆkeyçš„æˆå‘˜ä¸­ smember key è¿”å›keyé›†åˆä¸­æ‰€æœ‰æˆå‘˜ smove key1 key2 value å°†valueå…ƒç´ ä»key1é›†åˆä¸­ç§»åŠ¨åˆ°key2é›†åˆä¸­ spop key ç§»é™¤keyå¹¶è¿”å›é›†åˆä¸­çš„ä¸€ä¸ªéšæœºå…ƒç´  srandmember key [count] ç§»é™¤å¹¶è¿”å›keyé›†åˆä¸­ä¸€ä¸ªæˆ–è€…å¤šä¸ªæˆå‘˜ srem key [count] ç§»é™¤keyé›†åˆä¸­ä¸€ä¸ªæˆ–è€…å¤šä¸ªæˆå‘˜ Redis Sorted Set å¸¸ç”¨å‘½ä»¤ å‘½ä»¤ æè¿° zadd key 1 value å‘æœ‰åºé›†åˆkeyä¸­æ·»åŠ value æ’åºåˆ†æ•°æ˜¯1 zcard key è·å–æœ‰åºé›†åˆçš„æˆå‘˜æ•° zcount key min max è®¡ç®—æœ‰åºé›†åˆä¸­æŒ‡å®šåˆ†åŒºçš„æˆå‘˜æ•° zincrby key 10 value ä¸ºæœ‰åºé›†åˆkeyä¸­valueæˆå‘˜æ’åºåˆ†æ•°å¢åŠ 10 zlexcount key min max åœ¨æœ‰åºé›†åˆkeyä¸­è®¡ç®—åŒºé—´å†…çš„æˆå‘˜æ•°é‡ zrangee key start stop withscores é€šè¿‡ç´¢å¼•åŒºé—´è¿”å›æœ‰åºé›†åˆæŒ‡å®šåŒºé—´å†…çš„æˆå‘˜ zrangeebylex key start stop é€šè¿‡å­—å…¸åŒºé—´è¿”å›æœ‰åºé›†åˆçš„æˆå‘˜ zrank key value è¿”å›æœ‰åºé›†åˆä¸­æŒ‡å®šæˆå‘˜çš„ç´¢å¼• zrem key value ç§»é™¤æœ‰åºé›†åˆä¸­çš„ä¸€ä¸ªæˆ–å¤šä¸ªæˆå‘˜ zremrangebylex key min max ç§»é™¤æœ‰åºé›†åˆä¸­ç»™å®šçš„å­—å…¸åŒºé—´çš„æ‰€æœ‰æˆå‘˜ zremrangebyrank key start stop ç§»é™¤æœ‰åºé›†åˆä¸­ç»™å®šçš„æ’ååŒºé—´çš„æ‰€æœ‰æˆå‘˜ zremrangebyscore key min max ç§»é™¤æœ‰åºé›†åˆä¸­ç»™å®šçš„åˆ†æ•°åŒºé—´çš„æ‰€æœ‰æˆå‘˜ zrevrange key start stop withscores è¿”å›æœ‰åºé›†ä¸­æŒ‡å®šåŒºé—´å†…çš„æˆå‘˜ï¼Œé€šè¿‡ç´¢å¼•ï¼Œåˆ†æ•°ä»é«˜åˆ°ä½ zrevrangebyscore key max min withscores è¿”å›æœ‰åºé›†ä¸­æŒ‡å®šåˆ†æ•°åŒºé—´å†…çš„æˆå‘˜ï¼Œåˆ†æ•°ä»é«˜åˆ°ä½æ’åº zrevrank key value è¿”å›æœ‰åºé›†åˆä¸­æŒ‡å®šæˆå‘˜çš„æ’åï¼Œæœ‰åºé›†æˆå‘˜æŒ‰åˆ†æ•°å€¼é€’å‡(ä»å¤§åˆ°å°)æ’åº zscore key value è¿”å›æœ‰åºé›†ä¸­ï¼Œæˆå‘˜çš„åˆ†æ•°å€¼ ","link":"https://xiaoai7904.github.io/post/redis-ru-men/"},{"title":"JavaåŠ¨æ€ä»£ç†æœºåˆ¶","content":"JavaåŠ¨æ€ä»£ç†æœºåˆ¶ åœ¨å…ˆè¯´åŠ¨æ€ä»£ç†ä¹‹å‰ï¼Œå…ˆçœ‹çœ‹ä»€ä¹ˆæ˜¯ä»£ç† ä»£ç† ä»€ä¹ˆä»£ç†ï¼Ÿç»™æŸä¸€ä¸ªå¯¹è±¡æä¾›ä¸€ä¸ªä»£ç†ï¼Œå¹¶ç”±ä»£ç†å¯¹è±¡æ¥æ§åˆ¶å¯¹çœŸå®å¯¹è±¡çš„è®¿é—®ï¼Œä¾‹å¦‚ï¼š å¯¹è±¡Aæä¾›äº†ä¸€ä¸ªæ¥å£ï¼Œä½†æ˜¯è¿™ä¸ªæ¥å£åªèƒ½é€šè¿‡å¯¹è±¡Bè¿›è¡Œè°ƒç”¨,å¦‚æœå…¶ä»–å¯¹è±¡éœ€è¦è°ƒç”¨å¿…é¡»é€šè¿‡å¯¹è±¡Bæ¥è°ƒç”¨å¯¹è±¡Aæä¾›çš„æ¥å£,è¿™æ ·å°±å¯ä»¥ç§°å¯¹è±¡Bä¸ºä»£ç†å¯¹è±¡ æœ‰ä¸€ä¸ªç”Ÿäº§æ±½è½¦çš„å·¥å‚,å¦‚æœæ™®é€šäººè¦å»è´­ä¹°æ±½è½¦,å¿…é¡»é€šè¿‡4såº—å»è´­ä¹°ï¼Œè¿™é‡Œçš„4såº—å°±æ˜¯ä»£ç† ç®€å•ç†è§£äº†ä»€ä¹ˆæ˜¯ä»£ç†ä¹‹åï¼Œé€šè¿‡ç¨‹åºä»£ç æ¥æ¨¡æ‹Ÿä»£ç† æˆ‘ä»¬è¿˜æ˜¯ä»¥è´­ä¹°æ±½è½¦ä¸ºä¾‹ Tipsï¼šä»¥ä¸‹ç¤ºä¾‹åªæ˜¯éƒ¨åˆ†ä»£ç ç‰‡æ®µ,ä¸æ˜¯å®Œæ•´ä»£ç  æ±½è½¦å·¥å‚ç±» // æ±½è½¦å·¥å‚æ¥å£ public interface CarFactoryService { public Integer getPrice(); public void setPrice(int price); public void sell(String carName); } // æ±½è½¦å·¥å‚å®ç°ç±» public class CarFactoryImpl implements CarFactoryService { // æ±½è½¦ä»·æ ¼(å•ä½: ä¸‡) private Integer carPrice = 100; @Override public Integer getPrice() { return carPrice; } @Override public void setPrice(int price) { carPrice += price; } @Override public void sell(String carName) { System.out.println(&quot;4såº—è´­ä¹°äº†&quot; + carName + &quot;æ±½è½¦,ä»·æ ¼æ˜¯&quot; + carPrice); }} 4Såº— public class Shop4s implements CarFactoryService { private Integer carPrice = 20; @Override public void sell(String carName) { CarFactoryService carFactory; carFactory = new CarFactoryImpl(); carFactory.sell(carName); setPrice(carFactory.getPrice()); System.out.println(&quot;æ¶ˆè´¹è€…è´­ä¹°äº†&quot; + carName + &quot;æ±½è½¦,ä»·æ ¼æ˜¯&quot; + carPrice); } @Override public Integer getPrice() { return carPrice; } @Override public void setPrice(int price) { carPrice += price; }} æ™®é€šæ¶ˆè´¹è€… public class NormalConsumer { public void sell(String carName) { CarFactoryService shop4s = new Shop4s(); shop4s.sell(carName); } } æµ‹è¯•æ–¹æ³• public class TestApp { public static void main(String[] args) { NormalConsumer xiaoai = new NormalConsumer(); xiaoai.sell(&quot;å¥¥è¿ªA7&quot;); } ä¸Šé¢ç¤ºä¾‹ä»£ç ä¸­å®ç°ç®€å•ä»£ç†æ–¹å¼,å…¶ä¸­4Såº—å°±æ˜¯ä»£ç†å¯¹è±¡, åœ¨Javaä¸­æˆ‘ä»¬ç§°ä¸Šé¢è¿™ç§ä»£ç†ä¸ºé™æ€ä»£ç† é™æ€ä»£ç† ä½¿ç”¨é™æ€ä»£ç†æˆ‘ä»¬å¯ä»¥åœ¨ä¸ä¿®æ”¹æºä»£ç çš„æƒ…å†µï¼Œå¯¹åŠŸèƒ½è¿›è¡Œå¢å¼º,ä½†æ˜¯ä½¿ç”¨é™æ€ä»£ç†ä¹Ÿæœ‰ä¸€å®šç¼ºç‚¹,ä¾‹å¦‚æˆ‘ä»¬å¦‚æœéœ€è¦å¯¹å·¥å‚è¿›è¡Œå¢åŠ æ–°åŠŸèƒ½,å°±éœ€è¦åœ¨æºä»£ç å’Œä»£ç†å¯¹è±¡ä»£ç ä¸­æ–°å¢é€»è¾‘ æ€»ç»“: ä¼˜ç‚¹ å®ç°ç®€å•,æ˜“ç†è§£ ä¿æŠ¤å®é™…å¯¹è±¡çš„ä¸šåŠ¡é€»è¾‘å¯¹å¤–æš´éœ²ï¼Œä»è€Œæé«˜å®‰å…¨æ€§ ç¼ºç‚¹ ä»£ç†å¯¹è±¡å’Œç›®æ ‡å¯¹è±¡è¦å®ç°ç»Ÿä¸€çš„æ¥å£ï¼Œæ–°å¢åŠŸèƒ½ä¼šå¢åŠ å¾ˆå¤šè¿‡å¤šçš„ä»£ç†ç±» ä¸æ˜“ç»´æŠ¤,å¦‚æœæ–°å¢åŠŸèƒ½,ä»£ç†ç±»å’Œç›®æ ‡ç±»éƒ½éœ€è¦æ–°å¢ä»£ç  ç»“åˆä¸Šé¢çš„ä¼˜ç¼ºç‚¹è¿™æ—¶å€™å°±å‡ºç°äº†æ–°çš„è§£å†³æ–¹æ¡ˆåŠ¨æ€ä»£ç† åŠ¨æ€ä»£ç† åŠ¨æ€ä»£ç†ç›¸æ¯”é™æ€ä»£ç†ä¸»è¦ç‰¹ç‚¹æ˜¯ï¼Œé™æ€ä»£ç†æ˜¯åœ¨ç¼–è¯‘å®Œæˆæ—¶å·²ç»äº§ç”ŸClassæ–‡ä»¶ï¼Œç„¶è€ŒåŠ¨æ€ä»£ç†æ˜¯åœ¨è¿è¡Œæ—¶åŠ¨æ€ç”Ÿæˆç±»å­—èŠ‚ç ï¼Œå¹¶åŠ è½½åˆ°JVMä¸­ Tips: åŠ¨æ€ä»£ç†ä¸éœ€è¦å®ç°æ¥å£ï¼Œä½†æ˜¯è¦æ±‚ç›®æ ‡å¯¹è±¡å¿…é¡»å®ç°æ¥å£ åœ¨Javaä¸­æœ‰ç›®å‰ä»¥ä¸‹åŠ¨æ€ä»£ç†æ–¹å¼: JDKåŠ¨æ€ä»£ç† --&gt; æ ¹æ®æ¥å£åˆ›å»ºä»£ç†å¯¹è±¡ CGLIBåŠ¨æ€ä»£ç† --&gt; ä½¿ç”¨ç»§æ‰¿å®ç° JDKåŠ¨æ€ä»£ç† JDKåŠ¨ä»£ç†ä¸»è¦ä½¿ç”¨äº†Javaä¸­çš„åå°„æœºåˆ¶ï¼ŒJDKåŠ¨æ€ä»£ç†ä½¿ç”¨äº†java.lang.reflect.Proxyå’Œjava.lang.reflect.InvocationHandlerä¸¤ä¸ªç±»æ¥å®ç° æˆ‘ä»¬è¿˜æ˜¯ä»¥è´­ä¹°æ±½è½¦ä¸ºä¾‹ï¼Œé€šè¿‡åŠ¨æ€ä»£ç†æ”¹é€ ä¸Šé¢é™æ€ä»£ç†æ–¹å¼çš„ä»£ç  ç¤ºä¾‹ä»£ç ï¼š æ±½è½¦å·¥å‚ç±» // æ±½è½¦å·¥å‚æ¥å£ public interface CarFactoryService { public Integer getPrice(); public void setPrice(int price); public void sell(String carName); } // æ±½è½¦å·¥å‚å®ç°ç±» public class CarFactoryImpl implements CarFactoryService { // æ±½è½¦ä»·æ ¼(å•ä½: ä¸‡) private Integer carPrice = 100; @Override public Integer getPrice() { return carPrice; } @Override public void setPrice(int price) { carPrice += price; } @Override public void sell(String carName) { System.out.println(&quot;4såº—è´­ä¹°äº†&quot; + carName + &quot;æ±½è½¦,ä»·æ ¼æ˜¯&quot; + carPrice); } } ä»£ç†å¤„ç†ç±» public class MyHandler implements InvocationHandler { private Object target = null; public MyHandler1(Object target) { // ä¼ å…¥ç›®æ ‡å¯¹è±¡æ–¹æ³• this.target = target; } @Override public Object invoke(Object proxy, Method method, Object[] args) throws Throwable { // 1.å¯ä»¥å¯¹è°ƒç”¨ç›®æ ‡æ–¹æ³•ä¹‹å‰è¿›è¡Œå¤„ç† System.out.println(&quot;æ¶ˆè´¹è€…è´­ä¹°&quot; + args[0] + &quot;æ±½è½¦,ä»·æ ¼æ˜¯æ±½è½¦åº—åŸºç¡€ä¸Šæ¶¨20ä¸‡&quot;); // 2. è°ƒç”¨ç›®æ ‡æ–¹æ³• // target: ç›®æ ‡å¯¹è±¡æ–¹æ³•ï¼Œ arg: è°ƒç”¨ç›®æ ‡æ–¹æ³•å‚æ•° return å½“å‰æ–¹æ³•æ‰§è¡Œç»“æœ Object res = method.invoke(target, args); // 3.å¯ä»¥å¯¹è°ƒç”¨å®Œç›®æ ‡æ–¹æ³•è¿›è¡Œå¢å¼ºå¤„ç† System.out.println(&quot;æ¶ˆè´¹è€…è´­ä¹°äº†&quot; + args[0] + &quot;æ±½è½¦,ä»·æ ¼æ˜¯&quot; + 120); return res; }} æµ‹è¯•æ–¹æ³• public class TestApp { public static void main(String[] args) { CarFactoryService proxyTarget = new CarFactoryImpl(); CarFactoryService proxy = (CarFactoryService)Proxy.newProxyInstance(proxyTarget.getClass().getClassLoader(), proxyTarget.getClass().getInterfaces(), new MyHandler(proxyTarget)); proxy.sell(&quot;å¥¥è¿ªA7&quot;) } CGLIBåŠ¨æ€ä»£ç† æ˜¯ä¸€ä¸ªåŸºäºASMçš„å­—èŠ‚ç ç”Ÿæˆåº“ï¼Œå®ƒå…è®¸æˆ‘ä»¬åœ¨è¿è¡Œæ—¶å¯¹å­—èŠ‚ç è¿›è¡Œä¿®æ”¹å’ŒåŠ¨æ€ç”Ÿæˆã€‚CGLIBé€šè¿‡ç»§æ‰¿æ–¹å¼å®ç°ä»£ç† åŸºäºcglibåŠ¨æ€ä»£ç†å»å®ç°è´­è½¦ä»£ç : æ±½è½¦å·¥å‚ç±» // æ±½è½¦å·¥å‚å®ç°ç±» public class CarFactoryImpl { // æ±½è½¦ä»·æ ¼(å•ä½: ä¸‡) private Integer carPrice = 100; public Integer getPrice() { return carPrice; } public void setPrice(int price) { carPrice += price; } public void sell(String carName) { System.out.println(&quot;4såº—è´­ä¹°äº†&quot; + carName + &quot;æ±½è½¦,ä»·æ ¼æ˜¯&quot; + carPrice); } } ä»£ç†å¤„ç†ç±» public class MyMethodInterceptor implements MethodInterceptor { @Override public Object intercept(Object o, Method method, Object[] objects, MethodProxy methodProxy) throws Throwable { System.out.println(&quot;æ¶ˆè´¹è€…è´­ä¹°&quot; + args[0] + &quot;æ±½è½¦,ä»·æ ¼æ˜¯æ±½è½¦åº—åŸºç¡€ä¸Šæ¶¨20ä¸‡&quot;); Object object = methodProxy.invokeSuper(o, objects); System.out.println(&quot;æ¶ˆè´¹è€…è´­ä¹°äº†&quot; + args[0] + &quot;æ±½è½¦,ä»·æ ¼æ˜¯&quot; + 120); return object; } } æµ‹è¯•æ–¹æ³• public class TestApp { public static void main(String[] args) { Enhancer enhancer = new Enhancer(); enhancer.setSuperclass(CglibService.class); // è®¾ç½®enhancerçš„å›è°ƒå¯¹è±¡ enhancer.setCallback(new MyMethodInterceptor()); // åˆ›å»ºä»£ç†å¯¹è±¡ CglibService proxy= (CglibService)enhancer.create(); // é€šè¿‡ä»£ç†å¯¹è±¡è°ƒç”¨ç›®æ ‡æ–¹æ³• proxy.sell(&quot;å¥¥è¿ªA7&quot;) } } ","link":"https://xiaoai7904.github.io/post/java-dong-tai-dai-li-ji-zhi/"},{"title":"MySqlå¸¸ç”¨å‘½ä»¤å’Œä»‹ç»","content":" åˆ›å»ºæ•°æ®è¡¨ # create tabele è¡¨å(å­—æ®µ1 æ•°æ®ç±»å‹, å­—æ®µ2 æ•°æ®ç±»å‹, ...); create tabele user(id VARCHAR(100), name VARCHAR(100), age INT); # åˆ›å»ºä¸´æ—¶è¡¨ ä¸´æ—¶è¡¨åªåœ¨å½“å‰è¿æ¥å¯è§ï¼Œå½“å…³é—­è¿æ¥æ—¶ä¼šè‡ªåŠ¨åˆ é™¤ create TEMPORARY table userTemp(id VARCHAR(100), name VARCHAR(100), age INT) id name age null null null åˆ é™¤æ•°æ®è¡¨ # drop tabele è¡¨å; drop tabele user; æ’å…¥æ•°æ® # insert into è¡¨å(å­—æ®µ1ï¼Œ å­—æ®µ2) values(å­—æ®µ1å€¼ï¼Œå­—æ®µ2å€¼ï¼Œ...) insert into user(id, name, age) values('1', 'xiaoai', 27) id name age 1 xiaoai 27 æŸ¥è¯¢æ•°æ® # select * from è¡¨å select * from user id name age 1 xiaoai 27 whereè¯­å¥ # select * from è¡¨å where åˆ¤æ–­æ¡ä»¶ select * from user where age=27 select * from user where age&gt;=27 select * from user where age&lt;=27 select * from user where age is null select * from user where age is not null select * from user where age in(27,29) select * from user where age not in(27,29) select * from user where age REGEXP '^\\d+' updateè¯­å¥ # update è¡¨å set å­—æ®µ1=å­—æ®µå€¼ update user set age=28 id name age 1 xiaoai 28 deleteè¯­å¥ # delete from è¡¨å where æ¡ä»¶ delete from user where id='1' id name age likeè¯­å¥ï¼ˆæ¨¡ç³ŠæŸ¥è¯¢ï¼‰ # select * from è¡¨å like å­—æ®µ='å€¼%' select * from user like name='xiao%' id name age 1 xiaoai 28 union(è¿æ¥ä¸¤ä¸ªè¡¨æŸ¥è¯¢ç»“æœ) # tips: user1è¡¨æš‚æ—¶ä½¿ç”¨userè¡¨çš„æ•°æ® # select * from è¡¨å1 union (ALL | DISTINCT) select * from è¡¨å2 # ALL: å…¨éƒ¨æ•°æ®å¯ä»¥å‡ºç°é‡å¤æ•°æ® # DISTINCT: å…¨éƒ¨æ•°æ®å¹¶ä¸”åˆ é™¤é‡å¤æ•°æ® select * from user union ALL select * from user1 id name age 1 xiaoai 28 1 xiaoai 28 order byè¯­å¥(æ’åº) åŸå§‹è¡¨æ•°æ®: id name age 1 xiaoai 22 2 xiaoai1 23 3 xiaoai2 24 4 xiaoai3 25 5 xiaoai4 26 # ASC å‡åº é»˜è®¤ # DESC é™åº # select * from è¡¨å1 order by å­—æ®µå æ’åºå€¼[ASC|DESC] select * from user order by age DESC id name age 5 xiaoai4 26 4 xiaoai3 25 3 xiaoai2 24 2 xiaoai1 23 1 xiaoai 22 group by(åˆ†ç»„æŸ¥è¯¢) åŸå§‹è¡¨æ•°æ®: id name age 1 xiaoai 22 2 xiaoai1 22 3 xiaoai2 25 4 xiaoai3 25 5 xiaoai4 26 # select åˆ†ç»„å­—æ®µ, count(*) from è¡¨å group by åˆ†ç»„å­—æ®µ select age, count(*) from user group by age age count(*) 22 2 25 2 26 1 å¤–è¿æ¥(inner join, left join, right join) åŸå§‹è¡¨æ•°æ® user: id name age 1 xiaoai 22 2 xiaoai1 22 åŸå§‹è¡¨æ•°æ® subject: id subject name 1 java xiaoai 2 javascript xiaoai 3 nodeJs xiaoai2 # inner join è¿æ¥ä¸¤ä¸ªè¡¨æ ¼æ•°æ® # select å­—æ®µå,å­—æ®µå from è¡¨å1 as è¡¨å1åˆ«å inner join select å­—æ®µå, å­—æ®µå from è¡¨å2 as è¡¨å2åˆ«å on è¡¨å1åˆ«å.å­—æ®µå=è¡¨å2åˆ«å.å­—æ®µå select u.name, u.age from user as u inner join select s.subject from subject as s on a.name=s.name u.name u.age s.subject xiaoai 22 java xiaoai 22 javascript # left join è¿æ¥ä¸¤ä¸ªè¡¨æ ¼,å·¦è¾¹æ•°æ®è¡¨çš„å…¨éƒ¨æ•°æ®ï¼Œå³ä¾¿å³è¾¹è¡¨æ— å¯¹åº”æ•°æ® # select å­—æ®µå,å­—æ®µå from è¡¨å1 as è¡¨å1åˆ«å left join select å­—æ®µå, å­—æ®µå from è¡¨å2 as è¡¨å2åˆ«å on è¡¨å1åˆ«å.å­—æ®µå=è¡¨å2åˆ«å.å­—æ®µå select u.name, u.age from user as u left join select s.subject from subject as s on a.name=s.name u.name u.age s.subject xiaoai 22 java xiaoai 22 javascript xiaoai1 22 null # right join è¿æ¥ä¸¤ä¸ªè¡¨æ ¼,å³è¾¹æ•°æ®è¡¨çš„å…¨éƒ¨æ•°æ®ï¼Œå³ä¾¿å·¦è¾¹è¡¨æ— å¯¹åº”æ•°æ® # select å­—æ®µå,å­—æ®µå from è¡¨å1 as è¡¨å1åˆ«å right join select å­—æ®µå, å­—æ®µå from è¡¨å2 as è¡¨å2åˆ«å on è¡¨å1åˆ«å.å­—æ®µå=è¡¨å2åˆ«å.å­—æ®µå select u.name, u.age from user as u right join select s.subject from subject as s on a.name=s.name u.name u.age s.subject xiaoai 22 java xiaoai 22 javascript null null nodeJs alter(ä¿®æ”¹æ•°æ®è¡¨åæˆ–è€…ä¿®æ”¹æ•°æ®è¡¨å­—æ®µ) åŸå§‹è¡¨æ•°æ® user: id name age 1 xiaoai 22 alter table user add adss varchar(100) # æ·»åŠ å­—æ®µ alter table user modify adss char # ä¿®æ”¹è¡¨å­—æ®µ alter table user alter adss set default 'xxxxçœxxxå¸‚' alter table user drop adss # åˆ é™¤è¡¨å­—æ®µ limitè¯­å¥ åŸå§‹è¡¨æ•°æ® user: id name age 1 xiaoai 22 2 xiaoai1 23 3 xiaoai2 24 select * from user limit 0,1 id name age 1 xiaoai 22 ç´¢å¼• create index id_index on user(id) # åˆ›å»ºç´¢å¼• alter table user add index id_index(id) # ä¿®æ”¹è¡¨ç»“æ„æ·»åŠ ç´¢å¼• show index from user # æ˜¾ç¤ºç´¢å¼• drop index id_index on user # åˆ é™¤ç´¢å¼• å¯¼å‡ºsql select * from user into outfile './user.txt' # å¯¼å‡ºuserè¡¨æ•°æ®åˆ°user.txt ","link":"https://xiaoai7904.github.io/post/mysql-chang-yong-ming-ling-he-jie-shao/"},{"title":" éšç¬”","content":"æœ€è¿‘åœ¨å­¦ä¹ æ–°çš„ç¼–ç¨‹è¯­è¨€Java,ä¸ºä»€ä¹ˆè¦å»å­¦ä¹ å‘¢ï¼Ÿæ€»ç»“å‡ ç‚¹ï¼š åŸ¹å…»ç¼–ç¨‹å…´è¶£ ä¸è¦ä¸ºå·¥ä½œè€Œç¼–ç¨‹,è¦è§‰å¾—ç¼–ç¨‹å°±æ˜¯ä¸€ä¸ªå…´è¶£çˆ±å¥½,äººå¯¹è‡ªå·±çš„å…´è¶£çˆ±åœ¨ä»»ä½•æ—¶å€™éƒ½ä¸ä¼šå»æ’æ–¥ æé«˜è‡ªå·±çš„å­¦ä¹ æŠ€å·§ é€šè¿‡å­¦ä¹ æ–°çš„ä¸œè¥¿,å¯ä»¥ä»ä¸­æé«˜è‡ªå·±çš„å­¦ä¹ æŠ€å·§å’Œå­¦ä¹ æ–¹å¼ é€šè¿‡å­¦ä¹ è¦åŸ¹å…»è‡ªå·±çš„å†™ä½œèƒ½åŠ›å’Œè¡¨è¾¾èƒ½åŠ› æå‡è‡ªå·±çš„çŸ¥è¯†å¹¿åº¦ é€šè¿‡äº†è§£å¤šä¸ªç¼–ç¨‹è¯­è¨€å¯ä»¥ä½¿è‡ªå·±çš„çŸ¥è¯†é¢æ›´åŠ å¹¿,æ€è€ƒé—®é¢˜çš„æ€è·¯æ›´å¤š æå‡è‡ªå·±çš„æ¯…åŠ› å­¦ä¹ æ–°äº‹ç‰©ä¼šé‡åˆ°å¾ˆå¤šå›°éš¾,é€šè¿‡åšæŒå®Œæˆè‡ªå·±å®šä¸€ä¸‹çš„ç›®æ ‡ï¼Œä¸€æ­¥ä¸€ä¸ªè„šå°å»èµ° å‹åŠ› è¦æœ‰å‹åŠ›æ‰ä¼šæœ‰åŠ¨åŠ›,å¦‚æœä¸åŠªåŠ›ï¼Œæ²¡æœ‰è¿›æ­¥,ä¸€ç›´åŸåœ°è¸æ­¥ï¼Œæœ€åå°±ä¼šè¢«æ–°ç¤¾ä¼šæ·˜æ±° ä»¥ä¸Šæ˜¯è‡ªå·±æœ€è¿‘çš„æ„Ÿå—ğŸ˜ŠğŸ˜ŠğŸ˜Š, éšä¾¿å†™å†™ ","link":"https://xiaoai7904.github.io/post/sui-bi/"},{"title":"JavaScript Promis","content":"Promise è§£å†³ä¼ ç»Ÿæ–¹æ¡ˆå›è°ƒå‡½æ•°å’Œäº‹ä»¶ä¸€ä¸ªæ–°çš„å¼‚æ­¥ç¼–ç¨‹è§£å†³æ–¹æ¡ˆ,ç›®å‰åŸç”ŸPromiseå·²ç»æ”¯æŒå¤§éƒ¨åˆ†æµè§ˆå™¨ ç›®å‰Promiseå®ç°éƒ½æ˜¯éµå¾ªPromises/A+è§„èŒƒ è‹±æ–‡æ–‡æ¡£ ä¸­æ–‡æ–‡æ¡£ Promise ç‰¹ç‚¹ Promiseå†…éƒ¨æœ‰ä¸‰ç§çŠ¶æ€ ç­‰å¾…æ€ï¼ˆPendingï¼‰ã€æ‰§è¡Œæ€ï¼ˆFulfilledï¼‰ã€æ‹’ç»æ€ï¼ˆRejectedï¼‰ï¼Œä¸‰ç§çŠ¶æ€è½¬æ¢å…³ç³»å¦‚ä¸‹: ç­‰å¾…æ€ï¼ˆPendingï¼‰å¯ä»¥è¿ç§»è‡³æ‰§è¡Œæ€ï¼ˆFulfilledï¼‰å’Œ æ‹’ç»æ€ï¼ˆRejectedï¼‰ æ‰§è¡Œæ€ï¼ˆFulfilledï¼‰ä¸èƒ½è¿ç§»è‡³å…¶ä»–ä»»ä½•çŠ¶æ€,å¿…é¡»æ‹¥æœ‰ä¸€ä¸ªä¸å¯å˜çš„å€¼ï¼ˆæŒ‡ä»»ä½• JavaScript çš„åˆæ³•å€¼ï¼‰ æ‹’ç»æ€ï¼ˆRejectedï¼‰ä¸èƒ½è¿ç§»è‡³å…¶ä»–ä»»ä½•çŠ¶æ€,å¿…é¡»æ‹¥æœ‰ä¸€ä¸ªä¸å¯å˜çš„æ‹’ç»å€¼ï¼ˆä¸€ä¸ª promise çš„æ‹’ç»åŸå› ï¼‰ Promiseå†…éƒ¨å¿…é¡»å®ç°thenæ–¹æ³•,æ¥è·å–å½“å‰å€¼å’Œæ‹’ç»å€¼,å¹¶ä¸”thenæ–¹æ³•å¿…é¡»è¿”å›ä¸€ä¸ªæ–°çš„Promiseå¯¹è±¡ï¼Œéœ€è¦æ¥å—ä¸¤ä¸ªå‡½æ•°ä½œä¸ºå‚æ•°onFulfilledå’ŒonRejected onFulfilledå’ŒonRejectedå¦‚æœä¸æ˜¯å‡½æ•°å€¼ä¼šè¢«å¿½ç•¥ onFulfilledæ˜¯å‡½æ•°: å½“promiseæ‰§è¡Œç»“æŸåå…¶å¿…é¡»è¢«è°ƒç”¨ï¼Œå…¶ç¬¬ä¸€ä¸ªå‚æ•°ä¸ºpromiseçš„ç»ˆå€¼ åœ¨promiseæ‰§è¡Œç»“æŸå‰å…¶ä¸å¯è¢«è°ƒç”¨ å…¶è°ƒç”¨æ¬¡æ•°ä¸å¯è¶…è¿‡ä¸€æ¬¡ å¿…é¡»ä½œä¸ºå‡½æ•°è°ƒç”¨å¹¶ä¸”å¼‚æ­¥æ‰§è¡Œ onRejectedæ˜¯å‡½æ•°: å½“promiseæ‹’ç»æ‰§è¡Œç»“æŸåå…¶å¿…é¡»è¢«è°ƒç”¨ï¼Œå…¶ç¬¬ä¸€ä¸ªå‚æ•°ä¸ºpromiseçš„æ‹’ç»å€¼ åœ¨promiseæ‹’ç»æ‰§è¡Œç»“æŸå‰å…¶ä¸å¯è¢«è°ƒç”¨ å…¶è°ƒç”¨æ¬¡æ•°ä¸å¯è¶…è¿‡ä¸€æ¬¡ å¿…é¡»ä½œä¸ºå‡½æ•°è°ƒç”¨å¹¶ä¸”å¼‚æ­¥æ‰§è¡Œ Promise åŸºç¡€ç”¨æ³• new Promise((resolve, reject) =&gt; { setTimeout(() =&gt; { if(/*æˆåŠŸ*/) { resolve(1) }else { reject(2) } }, 1000) }).then( (data) =&gt; { // è°ƒç”¨resolveæ‰§è¡Œ console.log(data) // 1 }, (err) =&gt; { // è°ƒç”¨rejectæ‰§è¡Œ console.log(err) // 2 } ) å®ç° Promise æŒ‰ç…§Promises/A+è§„èŒƒè‡ªå·±åŠ¨æ‰‹å®ç°Promise,ç»“åˆè§„èŒƒä¸€æ­¥æ­¥å»å®ç° å®šä¹‰ä¸€ä¸ªPromiseæ„é€ å‡½æ•°,æ¥å—ä¸€ä¸ªå‡½æ•°ä½œä¸ºå‚æ•°,å¹¶ä¸”è¯¥å‡½æ•°ç«‹å³æ‰§è¡Œ class XaPromise&lt;T&gt; { constructor(executor: Executor&lt;T&gt;) { this.initExecutor(executor) } private initExecutor(executor: Executor&lt;T&gt;) { try { executor( (value) =&gt; { this.resolve(value) }, (reason) =&gt; { this.reject(reason) } ) } catch (e) { this.reject(e) } } } new XaPromise((resolve, reject) =&gt; {}) Promiseå†…éƒ¨æœ‰ä¸‰ç§çŠ¶æ€ ç­‰å¾…æ€ï¼ˆPendingï¼‰ã€æ‰§è¡Œæ€ï¼ˆFulfilledï¼‰ã€æ‹’ç»æ€ï¼ˆRejectedï¼‰é»˜è®¤ä¸ºPending type statusType = 'pending' | 'fulfilled' | 'rejected' class XaPromise&lt;T&gt; { ['[[PromiseStatus]]']: statusType = 'pending' } Promiseå†…éƒ¨å¿…é¡»å®ç°thenæ–¹æ³•,å¹¶ä¸”thenæ–¹æ³•å¿…é¡»è¿”å›ä¸€ä¸ªæ–°çš„Promiseå¯¹è±¡ type statusType = 'pending' | 'fulfilled' | 'rejected' class XaPromise&lt;T&gt; { then(onResolve: any, onReject?: any): XaPromise&lt;T&gt; { return new XaPromise((resolve, reject) =&gt; {}) } } Promiseå¯¹è±¡thenæ–¹æ³•å¤„ç†è¿‡ç¨‹ class XaPromise&lt;T&gt; { then(onResolve: any, onReject?: any): XaPromise&lt;T&gt; { let newXaPromise: any // then æ–¹æ³•å¿…é¡»è¿”å›ä¸€ä¸ª promise å¯¹è±¡ return (newXaPromise = new XaPromise((resolve, reject) =&gt; { let status = this.getPromiseStatus() if (status === 'pending') { this.callbacks.push({ resolve() { try { // å¦‚æœ onFulfilled æˆ–è€… onRejected è¿”å›ä¸€ä¸ªå€¼ x ï¼Œåˆ™è¿è¡Œä¸‹é¢çš„ Promise è§£å†³è¿‡ç¨‹ï¼š[[Resolve]](promise2, x) let x = onResolve(this.getPromiseValue()) // ä¸è®º promise1 è¢« reject è¿˜æ˜¯è¢« resolve æ—¶ promise2 éƒ½ä¼šè¢« resolveï¼Œåªæœ‰å‡ºç°å¼‚å¸¸æ—¶æ‰ä¼šè¢« rejected this.handlerResolvePromise(newXaPromise, x, resolve, reject) } catch (e) { // å¦‚æœ onFulfilled æˆ–è€… onRejected æŠ›å‡ºä¸€ä¸ªå¼‚å¸¸ e ï¼Œåˆ™ promise2 å¿…é¡»æ‹’ç»æ‰§è¡Œï¼Œå¹¶è¿”å›æ‹’å›  e reject(e) } }, reject() {}, }) } // çœç•¥éƒ¨åˆ†ä»£ç  })) } private handlerResolvePromise(newXaPromise: T, x: any, resolve: any, reject: any) {} } Promiseè§£å†³è¿‡ç¨‹[[Resolve]](promise2, x) xä¸Promiseç›¸ç­‰ å¦‚æœpromiseå’ŒxæŒ‡å‘åŒä¸€å¯¹è±¡ï¼Œä»¥TypeErroræ‹’ç»æ‰§è¡Œpromise private handlerResolvePromise(newXaPromise: T, x: any, resolve: any, reject: any) { if (x === newXaPromise) { return reject(new TypeError('resolveä¸èƒ½ä¼ å…¥å½“å‰thenè¿”å›çš„Promiseå¯¹è±¡')) } } xä¸ºPromise å¦‚æœxå¤„äºç­‰å¾…æ€ï¼Œpromiseéœ€ä¿æŒä¸ºç­‰å¾…æ€ç›´è‡³xè¢«æ‰§è¡Œæˆ–æ‹’ç» å¦‚æœxå¤„äºæ‰§è¡Œæ€ï¼Œç”¨ç›¸åŒçš„å€¼æ‰§è¡Œpromise å¦‚æœxå¤„äºæ‹’ç»æ€ï¼Œç”¨ç›¸åŒçš„æ®å› æ‹’ç»promise private handlerResolvePromise(newXaPromise: T, x: any, resolve: any, reject: any) { if (x instanceof XaPromise) { // å¦‚æœ x å¤„äºç­‰å¾…æ€ï¼Œ promise éœ€ä¿æŒä¸ºç­‰å¾…æ€ç›´è‡³ x è¢«æ‰§è¡Œæˆ–æ‹’ç» if (x['[[PromiseStatus]]'] === 'pending') { x.then( (_value: any) =&gt; { this.handlerResolvePromise(newXaPromise, _value, resolve, reject) }, (_reason: any) =&gt; { reject(_reason) } ) } else { // å¦‚æœ x å¤„äºæ‰§è¡Œæ€ï¼Œç”¨ç›¸åŒçš„å€¼æ‰§è¡Œ promise // å¦‚æœ x å¤„äºæ‹’ç»æ€ï¼Œç”¨ç›¸åŒçš„æ®å› æ‹’ç» promise x.then(resolve, reject) } } } xä¸ºå¯¹è±¡æˆ–å‡½æ•° æŠŠx.thenèµ‹å€¼ç»™then å¦‚æœå–x.thençš„å€¼æ—¶æŠ›å‡ºé”™è¯¯e ï¼Œåˆ™ä»¥eä¸ºæ®å› æ‹’ç»promise å¦‚æœthenæ˜¯å‡½æ•°ï¼Œå°†xä½œä¸ºå‡½æ•°çš„ä½œç”¨åŸŸthisè°ƒç”¨ï¼Œä¼ é€’ä¸¤ä¸ªå›è°ƒå‡½æ•°ä½œä¸ºå‚æ•°ï¼Œç¬¬ä¸€ä¸ªå‚æ•°å«åš resolvePromise ï¼Œç¬¬äºŒä¸ªå‚æ•°å«åšrejectPromise å¦‚æœresolvePromiseä»¥å€¼yä¸ºå‚æ•°è¢«è°ƒç”¨ï¼Œåˆ™è¿è¡Œ[[Resolve]](promise, y) å¦‚æœrejectPromiseä»¥æ®å› rä¸ºå‚æ•°è¢«è°ƒç”¨ï¼Œåˆ™ä»¥æ®å› ræ‹’ç» promise å¦‚æœresolvePromiseå’ŒrejectPromiseå‡è¢«è°ƒç”¨ï¼Œæˆ–è€…è¢«åŒä¸€å‚æ•°è°ƒç”¨äº†å¤šæ¬¡ï¼Œåˆ™ä¼˜å…ˆé‡‡ç”¨é¦–æ¬¡è°ƒç”¨å¹¶å¿½ç•¥å‰©ä¸‹çš„è°ƒç”¨ å¦‚æœè°ƒç”¨thenæ–¹æ³•æŠ›å‡ºäº†å¼‚å¸¸e å¦‚æœthenä¸æ˜¯å‡½æ•°ï¼Œä»¥xä¸ºå‚æ•°æ‰§è¡Œpromise å¦‚æœxä¸ä¸ºå¯¹è±¡æˆ–è€…å‡½æ•°ï¼Œä»¥xä¸ºå‚æ•°æ‰§è¡Œpromise private handlerResolvePromise(newXaPromise: T, x: any, resolve: any, reject: any) { let flag = false if (typeof x === 'function' || (x !== null &amp;&amp; typeof x === 'object')) { try { // x ä¸ºå¯¹è±¡æˆ–å‡½æ•° // æŠŠ x.then èµ‹å€¼ç»™ then // å¦‚æœå– x.then çš„å€¼æ—¶æŠ›å‡ºé”™è¯¯ e ï¼Œåˆ™ä»¥ e ä¸ºæ®å› æ‹’ç» promise let then = x.then // å¦‚æœ then æ˜¯å‡½æ•°ï¼Œå°† x ä½œä¸ºå‡½æ•°çš„ä½œç”¨åŸŸ this è°ƒç”¨ä¹‹ã€‚ä¼ é€’ä¸¤ä¸ªå›è°ƒå‡½æ•°ä½œä¸ºå‚æ•°ï¼Œç¬¬ä¸€ä¸ªå‚æ•°å«åš resolvePromise ï¼Œç¬¬äºŒä¸ªå‚æ•°å«åš rejectPromise if (typeof then === 'function') { then.call( x, (y: any) =&gt; { // å¦‚æœ resolvePromise ä»¥å€¼ y ä¸ºå‚æ•°è¢«è°ƒç”¨ï¼Œåˆ™è¿è¡Œ [[Resolve]](promise, y) // å¦‚æœ resolvePromise å’Œ rejectPromise å‡è¢«è°ƒç”¨ï¼Œæˆ–è€…è¢«åŒä¸€å‚æ•°è°ƒç”¨äº†å¤šæ¬¡ï¼Œåˆ™ä¼˜å…ˆé‡‡ç”¨é¦–æ¬¡è°ƒç”¨å¹¶å¿½ç•¥å‰©ä¸‹çš„è°ƒç”¨ if (flag) return flag = true this.handlerResolvePromise(newXaPromise, y, resolve, reject) }, (r: any) =&gt; { // å¦‚æœ rejectPromise ä»¥æ®å›  r ä¸ºå‚æ•°è¢«è°ƒç”¨ï¼Œåˆ™ä»¥æ®å›  r æ‹’ç» promise // å¦‚æœ resolvePromise å’Œ rejectPromise å‡è¢«è°ƒç”¨ï¼Œæˆ–è€…è¢«åŒä¸€å‚æ•°è°ƒç”¨äº†å¤šæ¬¡ï¼Œåˆ™ä¼˜å…ˆé‡‡ç”¨é¦–æ¬¡è°ƒç”¨å¹¶å¿½ç•¥å‰©ä¸‹çš„è°ƒç”¨ if (flag) return flag = true reject(r) } ) } else { // å¦‚æœ then ä¸æ˜¯å‡½æ•°ï¼Œä»¥ x ä¸ºå‚æ•°æ‰§è¡Œ promise reject(x) } } catch (e) { // å¦‚æœ resolvePromise æˆ– rejectPromise å·²ç»è¢«è°ƒç”¨ï¼Œåˆ™å¿½ç•¥ä¹‹ if (flag) return flag = true reject(e) } } } XaPromiseæºç åœ°å€ ","link":"https://xiaoai7904.github.io/post/javascript-promis/"},{"title":"æµè§ˆå™¨ç¼“å­˜æœºåˆ¶è¯¦è§£","content":"åœ¨å‰ç«¯å¼€å‘ä¸­,ä¸€ä¸ªæ¯”è¾ƒé‡è¦ç¯èŠ‚æ€§èƒ½ä¼˜åŒ–,ç„¶è€Œåˆ©ç”¨æµè§ˆå™¨ç¼“å­˜æ˜¯æ€§èƒ½ä¼˜åŒ–ä¸­ç®€å•é«˜æ•ˆçš„ä¸€ç§ä¼˜åŒ–æ–¹å¼äº†,ä¸€ä¸ªä¼˜ç§€çš„ç¼“å­˜ç­–ç•¥å¯ä»¥ç¼©çŸ­ç½‘é¡µè¯·æ±‚èµ„æºçš„è·ç¦»ï¼Œå‡å°‘å»¶è¿Ÿï¼Œå¹¶ä¸”ç”±äºç¼“å­˜æ–‡ä»¶å¯ä»¥é‡å¤åˆ©ç”¨ï¼Œè¿˜å¯ä»¥å‡å°‘å¸¦å®½ï¼Œé™ä½ç½‘ç»œè´Ÿè· ä»‹ç» æµè§ˆå™¨ç¼“å­˜ä¸»è¦ä»ä»¥ä¸‹3ç‚¹è¿›è¡Œè®²è§£: å¼ºç¼“å­˜ åå•†ç¼“å­˜ ç¼“å­˜ä½ç½® ç†è§£ä»¥ä¸Š3ç‚¹,å¯¹äºæ—¥å¸¸é¢è¯•åº”è¯¥å¯ä»¥å’Œé¢è¯•å®˜å¹å¹ğŸ‚äº†ğŸ˜ŠğŸ˜ŠğŸ˜ŠğŸ˜Š å¼ºç¼“å­˜ æµè§ˆå™¨ç¼“å­˜åˆ†éœ€è¦å‘Httpè¯·æ±‚å’Œä¸éœ€è¦å‘Httpè¯·æ±‚ä¸¤ç§,å¦‚æœå‘½ä¸­å¼ºç¼“å­˜å±äºä¸å‘Httpè¯·æ±‚,å¦‚æœæ²¡æœ‰å‘½ä¸­ä¼šè¿›è¡ŒHttpè¯·æ±‚,ä½†æ˜¯ä¹Ÿä¼šåˆ†ä¸¤ç§æƒ…å†µ,ä¸‹é¢ä¼šä»‹ç»çš„åå•†ç¼“å­˜æœºåˆ¶,å°±æ˜¯è¦å‘è¯·æ±‚æƒ…å†µã€‚ å…ˆçœ‹ä¸‹é¢ä¸€å¼ è¯·æ±‚æˆªå›¾ æˆªå›¾ä¸Šé¢æ ‡çº¢ä¸¤ä¸ªå­—æ®µexpireså’Œcache-control,æµè§ˆå™¨å°±æ˜¯é€šè¿‡è¿™ä¸ªä¸¤ä¸ªå­—æ®µè¿›è¡Œå¼ºç¼“å­˜åˆ¤æ–­ Expires åœ¨HTTP/1.0æ—¶,æµè§ˆå™¨åˆ¤æ–­æ˜¯å¦å‘½ä¸­å¼ºç¼“å­˜äº‹é€šè¿‡expireså­—æ®µ Expireså³è¿‡æœŸæ—¶é—´ï¼Œå­˜åœ¨äºæœåŠ¡ç«¯è¿”å›çš„å“åº”å¤´ä¸­ï¼Œå‘Šè¯‰æµè§ˆå™¨åœ¨è¿™ä¸ªè¿‡æœŸæ—¶é—´ä¹‹å‰å¯ä»¥ç›´æ¥ä»ç¼“å­˜é‡Œé¢è·å–æ•°æ®ï¼Œæ— éœ€å†æ¬¡è¯·æ±‚ ä¸Šé¢æˆªå›¾ä¸­: expiresè¡¨ç¤ºåœ¨2020-01-8 07:18:24ä¹‹å‰éƒ½ä½¿ç”¨ç¼“å­˜æ•°æ®,å¦‚æœè¶…è¿‡è¿™ä¸ªæ—¶é—´å°±éœ€è¦å‘é€è¯·æ±‚å‘æœåŠ¡å™¨è¯·æ±‚æ•°æ® ä½¿ç”¨è¿™ç§æ–¹å¼ä¼šæœ‰ä¸ªé—®é¢˜å¦‚æœæœåŠ¡å™¨æ—¶é—´å’Œæµè§ˆå™¨æ—¶é—´ä¸ä¸€æ ·å°±ä¼šå‡ºç°é—®é¢˜,æ‰€ä»¥åœ¨HTTP/1.1ä¸­ä½¿ç”¨äº†æ–°çš„å­—æ®µæ¥è¿›è¡Œåˆ¤æ–­cache-control Cache-control åœ¨HTTP/1.1æ—¶,æµè§ˆå™¨åˆ¤æ–­æ˜¯å¦å‘½ä¸­å¼ºç¼“å­˜äº‹é€šè¿‡cache-controlå­—æ®µ cache-controlé‡‡ç”¨è¿‡æœŸæ—¶é•¿æ¥æ§åˆ¶ç¼“å­˜ï¼Œå¯¹åº”çš„å­—æ®µå¦‚ä¸Šé¢æˆªå›¾æ˜¯max-ageå­—æ®µ ä¸Šé¢æˆªå›¾ä¸­: cache-controlä¸­max-ageè¡¨ç¤ºèµ„æºä¼šåœ¨4320910ç§’ä¹‹åå¤±æ•ˆï¼Œå¤±æ•ˆä¹‹åä¼šå‘æœåŠ¡å™¨å‘é€è¯·æ±‚ å¦‚ä¸Šé¢æˆªå›¾ä¸­è¿˜æœ‰ä¸ªs-maxageå­—è¯»æ˜¯ä»€ä¹ˆæ„æ€?,ä¸‹é¢è¯¦ç»†ä»‹ç»å…¶ä¸­æœ‰å“ªäº›å­—æ®µå’Œå…·ä½“æ˜¯ä»€ä¹ˆæ„æ€ s-maxage: é’ˆå¯¹ä»£ç†æœåŠ¡å™¨çš„ç¼“å­˜æ—¶é—´ public: å®¢æˆ·ç«¯å’Œä»£ç†æœåŠ¡å™¨éƒ½å¯ä»¥ç¼“å­˜ private: åªæœ‰æµè§ˆå™¨èƒ½ç¼“å­˜äº†,ä»£ç†æœåŠ¡å™¨ä¸èƒ½ç¼“å­˜ no-cache: è·³è¿‡å½“å‰çš„å¼ºç¼“å­˜,å‘é€HTTPè¯·æ±‚,å³ç›´æ¥è¿›å…¥åå•†ç¼“å­˜é˜¶æ®µ no-store: ä¸è¿›è¡Œä»»ä½•ç¼“å­˜ Tips: å¦‚æœcache-controlå’ŒexpiresåŒæ—¶å‡ºç°,æœåŠ¡å™¨ä¼šä¼˜å…ˆä½¿ç”¨cache-controlå­—æ®µè¿›è¡Œåˆ¤æ–­ åå•†ç¼“å­˜ å¼ºç¼“å­˜å¤±æ•ˆä¹‹åï¼Œæµè§ˆå™¨åœ¨è¯·æ±‚å¤´ä¸­æºå¸¦ç›¸åº”çš„ç¼“å­˜tagæ¥å‘æœåŠ¡å™¨å‘è¯·æ±‚ï¼Œç”±æœåŠ¡å™¨æ ¹æ®è¿™ä¸ªtagï¼Œæ¥å†³å®šæ˜¯å¦ä½¿ç”¨ç¼“å­˜ï¼Œè¿™å°±æ˜¯åå•†ç¼“å­˜ ç¼“å­˜tagåˆ†ä¸ºä¸¤ç§: Last-Modified å’Œ Etag Last-Modified å³æœ€åä¿®æ”¹æ—¶é—´ã€‚åœ¨æµè§ˆå™¨ç¬¬ä¸€æ¬¡ç»™æœåŠ¡å™¨å‘é€è¯·æ±‚åï¼ŒæœåŠ¡å™¨ä¼šåœ¨å“åº”å¤´ä¸­åŠ ä¸Šè¿™ä¸ªå­—æ®µ æµè§ˆå™¨æ¥æ”¶åˆ°åï¼Œå¦‚æœå†æ¬¡è¯·æ±‚ï¼Œä¼šåœ¨è¯·æ±‚å¤´ä¸­æºå¸¦If-Modified-Sinceå­—æ®µï¼ŒæœåŠ¡å™¨æ‹¿åˆ°å­—æ®µåï¼Œä¼šå’Œè¿™ä¸ªæœåŠ¡å™¨ä¸­è¯¥èµ„æºçš„æœ€åä¿®æ”¹æ—¶é—´å¯¹æ¯”ï¼Œå¯¹æ¯”è§„åˆ™å¦‚ä¸‹ï¼š å¦‚æœè¯·æ±‚å¤´ä¸­çš„è¿™ä¸ªå€¼å°äºæœ€åä¿®æ”¹æ—¶é—´ï¼Œè¯´æ˜æ˜¯æ—¶å€™æ›´æ–°äº†ã€‚è¿”å›æ–°çš„èµ„æºï¼Œè·Ÿå¸¸è§„çš„HTTPè¯·æ±‚å“åº”çš„æµç¨‹ä¸€æ · å¦åˆ™è¿”å›304ï¼Œå‘Šè¯‰æµè§ˆå™¨ç›´æ¥ç”¨ç¼“å­˜ ETag ETagæ˜¯æœåŠ¡å™¨æ ¹æ®å½“å‰æ–‡ä»¶çš„å†…å®¹ï¼Œç»™æ–‡ä»¶ç”Ÿæˆçš„å”¯ä¸€æ ‡è¯†çš„å“ˆå¸Œå€¼ï¼Œåªè¦é‡Œé¢çš„å†…å®¹æœ‰æ”¹åŠ¨ï¼Œè¿™ä¸ªå€¼å°±ä¼šå˜ã€‚æœåŠ¡å™¨é€šè¿‡å“åº”å¤´æŠŠè¿™ä¸ªå€¼ç»™æµè§ˆå™¨ æµè§ˆå™¨æ¥æ”¶åˆ°ETagçš„å€¼ï¼Œä¼šåœ¨ä¸‹æ¬¡è¯·æ±‚æ—¶ï¼Œå°†è¿™ä¸ªå€¼ä½œä¸ºIf-None-Matchè¿™ä¸ªå­—æ®µçš„å†…å®¹ï¼Œå¹¶æ”¾åˆ°è¯·æ±‚å¤´ä¸­ï¼ŒæœåŠ¡å™¨ä¼šæ ¹æ®è¿™ä¸ªå€¼è¿›è¡Œå¯¹æ¯”,å¯¹æ¯”è§„åˆ™å¦‚ä¸‹: å¦‚æœä¸¤è€…ä¸ä¸€æ ·ï¼Œè¯´æ˜è¦æ›´æ–°äº†ã€‚è¿”å›æ–°çš„èµ„æºï¼Œè·Ÿå¸¸è§„çš„HTTPè¯·æ±‚å“åº”çš„æµç¨‹ä¸€æ · å¦åˆ™è¿”å›304ï¼Œå‘Šè¯‰æµè§ˆå™¨ç›´æ¥ç”¨ç¼“å­˜ ä¸¤è€…å¯¹æ¯” åœ¨å‡†ç¡®åº¦ä¸Šï¼ŒETagä¼˜äºLast-Modifiedï¼ŒETagæ˜¯ç›‘å¬èµ„æºæ–‡ä»¶æ˜¯å¦ä¿®æ”¹,åªè¦ç¼–è¾‘äº†æ–‡ä»¶éƒ½ç®—ä¿®æ”¹è¿‡ï¼Œè€Œ Last-Modified å°±ä¸ä¸€æ ·äº†ï¼Œå®ƒåœ¨ä¸€äº›ç‰¹æ®Šçš„æƒ…å†µå¹¶ä¸èƒ½å‡†ç¡®æ„ŸçŸ¥èµ„æºå˜åŒ–ï¼Œä¸»è¦æœ‰ä¸¤ç§æƒ…å†µ: ç¼–è¾‘äº†èµ„æºæ–‡ä»¶ï¼Œä½†æ˜¯æ–‡ä»¶å†…å®¹å¹¶æ²¡æœ‰æ›´æ”¹ï¼Œè¿™æ ·ä¹Ÿä¼šé€ æˆç¼“å­˜å¤±æ•ˆã€‚ Last-Modified èƒ½å¤Ÿæ„ŸçŸ¥çš„å•ä½æ—¶é—´æ˜¯ç§’ï¼Œå¦‚æœæ–‡ä»¶åœ¨ 1 ç§’å†…æ”¹å˜äº†å¤šæ¬¡ï¼Œé‚£ä¹ˆè¿™æ—¶å€™çš„ Last-Modifiedå¹¶æ²¡æœ‰ä½“ç°å‡ºä¿®æ”¹äº†ã€‚ åœ¨æ€§èƒ½ä¸Šï¼ŒLast-Modifiedä¼˜äºETagï¼ŒLast-Modifiedä»…ä»…åªæ˜¯è®°å½•ä¸€ä¸ªæ—¶é—´ç‚¹ï¼Œè€ŒEtagéœ€è¦æ ¹æ®æ–‡ä»¶çš„å…·ä½“å†…å®¹ç”Ÿæˆå“ˆå¸Œå€¼ã€‚ **Tips:**å¦‚æœä¸¤ç§æ–¹å¼éƒ½æ”¯æŒçš„è¯ï¼ŒæœåŠ¡å™¨ä¼šä¼˜å…ˆè€ƒè™‘ETagã€‚ ç¼“å­˜ä½ç½® å¦‚æœæµè§ˆå™¨å‘½ä¸­ç¼“å­˜,é‚£ç¼“å­˜æ–‡ä»¶åˆ°åº•å­˜å‚¨åœ¨å“ªé‡Œï¼Ÿæµè§ˆå™¨ç¼“å­˜ä½ç½®ä¸»è¦æœ‰ä»¥ä¸‹å‡ ä¸ªä½ç½®: Service Worker Memory Cache Disk Cache Push Cache Service Worker å¯¹Service Workerè¯¦ç»†ä»‹ç»è¯·æŸ¥çœ‹å¦ä¸€ç¯‡æ–‡ç« Service Worker å…¶ä¸­Service Worker Cacheå°±æ˜¯æˆ‘ä»¬ä½¿ç”¨çš„ç¦»çº¿ç¼“å­˜ Memory Cache Memory CacheæŒ‡çš„æ˜¯å†…å­˜ç¼“å­˜ï¼Œé€Ÿåº¦æ˜¯æœ€å¿«çš„ï¼Œä½†æ˜¯ä¿å­˜æ—¶é—´ä¹Ÿæ˜¯æœ€çŸ­çš„ Disk Cache Disk CacheæŒ‡çš„æ˜¯ç£ç›˜å­˜å‚¨ï¼Œå­˜å‚¨æ—¶é—´æ…¢ï¼Œä½†æ˜¯ä¿å­˜æ—¶é—´æ˜¯æœ€é•¿çš„ Push Cache Push CacheæŒ‡çš„æ˜¯æ¨é€ç¼“å­˜ï¼Œå‚è€ƒæ–‡ç« Creating a Cache-aware HTTP/2 Server Push Mechanism ç¼“å­˜æµç¨‹ é¦–å…ˆåˆ¤æ–­æ˜¯å¦å‘½ä¸­å¼ºç¼“å­˜(Cache-Controlå’ŒExpires) å¦‚æœå¼ºç¼“å­˜å¯ç”¨ï¼Œç›´æ¥ä½¿ç”¨ å¦åˆ™è¿›å…¥åå•†ç¼“å­˜ï¼Œå³å‘é€HTTPè¯·æ±‚ï¼ŒæœåŠ¡å™¨é€šè¿‡è¯·æ±‚å¤´ä¸­çš„Last-Modifiedæˆ–è€…ETagå­—æ®µæ£€æŸ¥èµ„æºæ˜¯å¦æ›´æ–° è‹¥èµ„æºæ›´æ–°ï¼Œè¿”å›èµ„æºå’Œ200çŠ¶æ€ç  å¦åˆ™ï¼Œè¿”å›304ï¼Œå‘Šè¯‰æµè§ˆå™¨ç›´æ¥ä»ç¼“å­˜è·å–èµ„æº ä¸‹é¢æˆªå›¾æ˜¯æµè§ˆç¼“å­˜æœºåˆ¶æµç¨‹å›¾ï¼š ","link":"https://xiaoai7904.github.io/post/liu-lan-qi-huan-cun-ji-zhi-xiang-jie/"},{"title":"å‡½æ•°èŠ‚æµå’Œé˜²æŠ–","content":"æ—¥å¸¸å¼€å‘ä¸­ä¼šé‡åˆ°å¾ˆå¤šäº‹ä»¶æ‰§è¡Œé¢‘ç‡å¾ˆå¤§æ¯”å¦‚: resizeã€scrollã€mousedownã€mousemove... æ‰§è¡Œé¢‘ç‡è¶Šå¤šï¼Œå¯¹åº”å‡½æ•°æ‰§è¡Œæ¬¡æ•°å¢å¤šï¼Œé€šè¿‡å¼•å…¥èŠ‚æµå’Œé˜²æŠ–å¯ä»¥æœ‰æ•ˆè§£å†³è¿™ä¸€é—®é¢˜ é˜²æŠ–(debounce) \u0010è§¦å‘é«˜é¢‘äº‹ä»¶ånç§’å†…å‡½æ•°åªä¼šæ‰§è¡Œä¸€æ¬¡ï¼Œå¦‚æœnç§’å†…é«˜é¢‘äº‹ä»¶å†æ¬¡è¢«è§¦å‘ï¼Œåˆ™é‡æ–°è®¡ç®—æ—¶é—´ ç¤ºä¾‹ä»£ç  // é˜²æŠ–å‡½æ•° function debounce(fn, wait) { let timer; return function() { let _this = this; let args = arguments; if(timer) { clearTimeout(timer) } timer = setTimeout(function(){ fn.apply(_this, args) }, wait); } } // ä½¿ç”¨ window.onresize = debounce(function() {console.log('resize')}, 500) èŠ‚æµ(throttle) é«˜é¢‘äº‹ä»¶è§¦å‘ï¼Œä½†åœ¨nç§’å†…åªä¼šæ‰§è¡Œä¸€æ¬¡ï¼Œæ‰€ä»¥èŠ‚æµä¼šç¨€é‡Šå‡½æ•°çš„æ‰§è¡Œé¢‘ç‡ ç¤ºä¾‹ä»£ç  // æ–¹å¼1: ä½¿ç”¨æ—¶é—´æˆ³ function throttle1(fn, wait) { let time = 0; return function() { let _this = this; let args = arguments; let now = Date.now() if(now - time &gt; wait) { fn.apply(_this, args); time = now; } } } // æ–¹å¼2: ä½¿ç”¨å®šæ—¶å™¨ function thorttle2(fn, wait) { let timer; return function () { let _this = this; let args = arguments; if(!timer) { timer = setTimeout(function(){ timer = null; fn.apply(_this, args) }, wait) } } } ä¸Šé¢èŠ‚æµå’Œé˜²æŠ–å®ç°æ–¹å¼æ¯”è¾ƒç®€å•ï¼Œä½†æ˜¯å·²ç»å¯ä»¥æ»¡è¶³æ—¥å¸¸ä½¿ç”¨ï¼Œå¦‚æœæƒ³æ›´è¿‘ä¸€æ­¥äº†è§£å¯ä»¥æŸ¥çœ‹underscoreå’Œlodashæ–‡æ¡£ä¸­debounceå’Œthorttle ","link":"https://xiaoai7904.github.io/post/han-shu-jie-liu-he-fang-dou/"},{"title":"JSON.stringifyå’ŒJSON.parse","content":"åœ¨æ—¥å¸¸å¼€å‘ä¸­ï¼Œæˆ‘ä»¬ä¼šä½¿ç”¨åˆ°JSON.stringifyå’ŒJSON.parseå¯¹jsonæ•°æ®è¿›è¡Œè½¬æ¢,ä¹Ÿå¯ä»¥é€šè¿‡è¿™ä¸¤ä¸ªæ–¹æ³•è¿›è¡Œæ•°æ®æ·±åº¦æ‹·è´ JSON.stringify JSON.stringify() æ–¹æ³•å°†ä¸€ä¸ª JavaScript å€¼ï¼ˆå¯¹è±¡æˆ–è€…æ•°ç»„ï¼‰è½¬æ¢ä¸ºä¸€ä¸ª JSON å­—ç¬¦ä¸² è¯­æ³• JSON.stringify(value[, replacer [, space]]) å‚æ•°ä»‹ç» value å°†è¦åºåˆ—åŒ–æˆ ä¸€ä¸ª JSON å­—ç¬¦ä¸²çš„å€¼ replacer(å¯é€‰) å¦‚æœè¯¥å‚æ•°æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œåˆ™åœ¨åºåˆ—åŒ–è¿‡ç¨‹ä¸­ï¼Œè¢«åºåˆ—åŒ–çš„å€¼çš„æ¯ä¸ªå±æ€§éƒ½ä¼šç»è¿‡è¯¥å‡½æ•°çš„è½¬æ¢å’Œå¤„ç†ï¼›å¦‚æœè¯¥å‚æ•°æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œåˆ™åªæœ‰åŒ…å«åœ¨è¿™ä¸ªæ•°ç»„ä¸­çš„å±æ€§åæ‰ä¼šè¢«åºåˆ—åŒ–åˆ°æœ€ç»ˆçš„ JSON å­—ç¬¦ä¸²ä¸­ï¼›å¦‚æœè¯¥å‚æ•°ä¸º null æˆ–è€…æœªæä¾›ï¼Œåˆ™å¯¹è±¡æ‰€æœ‰çš„å±æ€§éƒ½ä¼šè¢«åºåˆ—åŒ– space(å¯é€‰) æŒ‡å®šç¼©è¿›ç”¨çš„ç©ºç™½å­—ç¬¦ä¸²ï¼Œç”¨äºç¾åŒ–è¾“å‡ºï¼Œå¦‚æœå‚æ•°æ˜¯ä¸ªæ•°å­—ï¼Œå®ƒä»£è¡¨æœ‰å¤šå°‘çš„ç©ºæ ¼ï¼›ä¸Šé™ä¸º10ã€‚è¯¥å€¼è‹¥å°äº1ï¼Œåˆ™æ„å‘³ç€æ²¡æœ‰ç©ºæ ¼ï¼›å¦‚æœè¯¥å‚æ•°ä¸ºå­—ç¬¦ä¸²ï¼ˆå½“å­—ç¬¦ä¸²é•¿åº¦è¶…è¿‡10ä¸ªå­—æ¯ï¼Œå–å…¶å‰10ä¸ªå­—æ¯ï¼‰ï¼Œè¯¥å­—ç¬¦ä¸²å°†è¢«ä½œä¸ºç©ºæ ¼ï¼›å¦‚æœè¯¥å‚æ•°æ²¡æœ‰æä¾›ï¼ˆæˆ–è€…ä¸º nullï¼‰ï¼Œå°†æ²¡æœ‰ç©ºæ ¼ è½¬æ¢æ³¨æ„äº‹é¡¹ è½¬æ¢å€¼å¦‚æœæœ‰ toJSON() æ–¹æ³•ï¼Œè¯¥æ–¹æ³•å®šä¹‰ä»€ä¹ˆå€¼å°†è¢«åºåˆ—åŒ–ã€‚ éæ•°ç»„å¯¹è±¡çš„å±æ€§ä¸èƒ½ä¿è¯ä»¥ç‰¹å®šçš„é¡ºåºå‡ºç°åœ¨åºåˆ—åŒ–åçš„å­—ç¬¦ä¸²ä¸­ã€‚ å¸ƒå°”å€¼ã€æ•°å­—ã€å­—ç¬¦ä¸²çš„åŒ…è£…å¯¹è±¡åœ¨åºåˆ—åŒ–è¿‡ç¨‹ä¸­ä¼šè‡ªåŠ¨è½¬æ¢æˆå¯¹åº”çš„åŸå§‹å€¼ã€‚ undefinedã€ä»»æ„çš„å‡½æ•°ä»¥åŠ symbol å€¼ï¼Œåœ¨åºåˆ—åŒ–è¿‡ç¨‹ä¸­ä¼šè¢«å¿½ç•¥ï¼ˆå‡ºç°åœ¨éæ•°ç»„å¯¹è±¡çš„å±æ€§å€¼ä¸­æ—¶ï¼‰æˆ–è€…è¢«è½¬æ¢æˆnullï¼ˆå‡ºç°åœ¨æ•°ç»„ä¸­æ—¶ï¼‰ã€‚å‡½æ•°ã€undefined è¢«å•ç‹¬è½¬æ¢æ—¶ï¼Œä¼šè¿”å› undefinedï¼Œå¦‚JSON.stringify(function(){}) or JSON.stringify(undefined) å¯¹åŒ…å«å¾ªç¯å¼•ç”¨çš„å¯¹è±¡ï¼ˆå¯¹è±¡ä¹‹é—´ç›¸äº’å¼•ç”¨ï¼Œå½¢æˆæ— é™å¾ªç¯ï¼‰æ‰§è¡Œæ­¤æ–¹æ³•ï¼Œä¼šæŠ›å‡ºé”™è¯¯ æ‰€æœ‰ä»¥ symbol ä¸ºå±æ€§é”®çš„å±æ€§éƒ½ä¼šè¢«å®Œå…¨å¿½ç•¥æ‰ï¼Œå³ä¾¿ replacer å‚æ•°ä¸­å¼ºåˆ¶æŒ‡å®šåŒ…å«äº†å®ƒä»¬ã€‚ Dateæ—¥æœŸè°ƒç”¨äº† toJSON() å°†å…¶è½¬æ¢ä¸ºäº† string å­—ç¬¦ä¸²ï¼ˆåŒDate.toISOString()ï¼‰ï¼Œå› æ­¤ä¼šè¢«å½“åšå­—ç¬¦ä¸²å¤„ç†ã€‚ NaN å’Œ Infinity æ ¼å¼çš„æ•°å€¼åŠ ull éƒ½ä¼šè¢«å½“åš null å…¶ä»–ç±»å‹çš„å¯¹è±¡ï¼ŒåŒ…æ‹¬ Map/Set/WeakMap/WeakSetï¼Œä»…ä¼šåºåˆ—åŒ–å¯æšä¸¾çš„å±æ€§ toJSON æ–¹æ³• å¦‚æœä¸€ä¸ªè¢«åºåˆ—åŒ–çš„å¯¹è±¡æ‹¥æœ‰ toJSON æ–¹æ³•ï¼Œé‚£ä¹ˆè¯¥ toJSON æ–¹æ³•å°±ä¼šè¦†ç›–è¯¥å¯¹è±¡é»˜è®¤çš„åºåˆ—åŒ–è¡Œä¸ºï¼šä¸æ˜¯è¯¥å¯¹è±¡è¢«åºåˆ—åŒ–ï¼Œè€Œæ˜¯è°ƒç”¨ toJSON æ–¹æ³•åçš„è¿”å›å€¼ä¼šè¢«åºåˆ—åŒ–ï¼Œç¤ºä¾‹å¦‚ä¸‹: let obj = { a: 'a', toJSON: function () { return 'a'; } }; JSON.stringify(obj); // '&quot;a&quot;' JSON.stringify({x: obj}); // '{&quot;x&quot;:&quot;a&quot;}' ç¤ºä¾‹ä»£ç : let obj = { a: '1', b: 1, c: function() { return 1 } } // é€šè¿‡JSON.stringifyæ–¹æ³•è¿›è¡Œå­—ç¬¦ä¸²åºåˆ—åŒ– let str = JSON.stringify(obj) // å‡½æ•°ä¼šè¢«å¿½ç•¥,è¯¦æƒ…è§ä¸Šé¢ è½¬æ¢æ³¨æ„äº‹é¡¹ console.log(str) // &quot;{&quot;a&quot;:&quot;1&quot;,&quot;b&quot;:1}&quot; // å¯ä»¥é€šè¿‡JSON.stringifyç¬¬ä¸€ä¸ªå‚æ•°è¿›è¡Œç‰¹æ®Šå¤„ç† let str = JSON.stringify(obj, function(key, value) { if(typeof value === 'function') { return value.toString() } return value }) console.log(str) // &quot;{&quot;a&quot;:&quot;1&quot;,&quot;b&quot;:1,&quot;c&quot;:&quot;function() { return 1 }&quot;}&quot; JSON.parse è¯­æ³• JSON.parse(text[, reviver]) å‚æ•°ä»‹ç» text è¦è¢«è§£ææˆ JavaScript å€¼çš„å­—ç¬¦ä¸² reviver(å¯é€‰) è½¬æ¢å™¨, å¦‚æœä¼ å…¥è¯¥å‚æ•°(å‡½æ•°)ï¼Œå¯ä»¥ç”¨æ¥ä¿®æ”¹è§£æç”Ÿæˆçš„åŸå§‹å€¼ï¼Œè°ƒç”¨æ—¶æœºåœ¨ parse å‡½æ•°è¿”å›ä¹‹å‰ æ³¨æ„äº‹é¡¹ JSON.parse()ä¸å…è®¸ç”¨é€—å·ä½œä¸ºç»“å°¾ ç¤ºä¾‹ä»£ç  let str = &quot;{&quot;a&quot;:&quot;1&quot;,&quot;b&quot;:1,&quot;c&quot;:&quot;function() { return 1 }&quot;}&quot; let obj = JSON.parse(str) console.log(obj); // {a: '1', b: 1, c: 'function() {return 1}'} // å¦‚æœæƒ³å‡½æ•°è½¬æ¢æˆå¯æ‰§è¡Œå‡½æ•° let obj = JSON.parse(str, function(key, value) { // ä¹Ÿå¯ä»¥åˆ¤æ–­valueä¸­æ˜¯å¦æœ‰functionå­—æ®µ if(key === 'c') { return eval(&quot;(function(){return &quot; + value + &quot; })()&quot;) } return value }) console.log(obj); // {a: '1', b: 1, c: function() {return 1}} æ·±åº¦æ‹·è´å¯¹è±¡ å¯ä»¥é€šè¿‡JSON.stringifyå’ŒJSON.parseè¿›è¡Œæ•°æ®æ‹·è´, æ•°æ®ä¸­ä¸åº”è¯¥æœ‰function, undefinedå› ä¸ºå®ƒä»¬ä¼šè¢«å¿½ç•¥ let obj = {a: 1, b: { b1: 11 }} let copyObj = JSON.parse(JSON.stringify(obj)) console.log(obj === copyObj); // false ","link":"https://xiaoai7904.github.io/post/jsonstringify-he-jsonparse/"},{"title":"Service Worker","content":"ä¸°å¯Œçš„ç¦»çº¿ä½“éªŒã€å®šæœŸçš„åå°åŒæ­¥ä»¥åŠæ¨é€é€šçŸ¥ç­‰é€šå¸¸éœ€è¦å°†é¢å‘æœ¬æœºåº”ç”¨çš„åŠŸèƒ½å°†å¼•å…¥åˆ°ç½‘é¡µåº”ç”¨ä¸­ã€‚ Service Worker æä¾›æ‰€æœ‰è¿™äº›åŠŸèƒ½æ‰€ä¾èµ–çš„æŠ€æœ¯åŸºç¡€ã€‚ ä»€ä¹ˆæ˜¯ Service Worker Service Worker æ˜¯æµè§ˆå™¨åœ¨åå°ç‹¬ç«‹äºç½‘é¡µè¿è¡Œçš„è„šæœ¬ï¼Œå®ƒæ‰“å¼€äº†é€šå‘ä¸éœ€è¦ç½‘é¡µæˆ–ç”¨æˆ·äº¤äº’çš„åŠŸèƒ½çš„å¤§é—¨ã€‚ ç°åœ¨ï¼Œå®ƒä»¬å·²åŒ…æ‹¬å¦‚æ¨é€é€šçŸ¥å’Œåå°åŒæ­¥ç­‰åŠŸèƒ½ã€‚ å°†æ¥ï¼ŒService Worker å°†ä¼šæ”¯æŒå¦‚å®šæœŸåŒæ­¥æˆ–åœ°ç†å›´æ ç­‰å…¶ä»–åŠŸèƒ½ã€‚ æœ¬æ•™ç¨‹è®¨è®ºçš„æ ¸å¿ƒåŠŸèƒ½æ˜¯æ‹¦æˆªå’Œå¤„ç†ç½‘ç»œè¯·æ±‚ï¼ŒåŒ…æ‹¬é€šè¿‡ç¨‹åºæ¥ç®¡ç†ç¼“å­˜ä¸­çš„å“åº”ã€‚ è¿™ä¸ª API ä¹‹æ‰€ä»¥ä»¤äººå…´å¥‹ï¼Œæ˜¯å› ä¸ºå®ƒå¯ä»¥æ”¯æŒç¦»çº¿ä½“éªŒï¼Œè®©å¼€å‘è€…èƒ½å¤Ÿå…¨é¢æ§åˆ¶è¿™ä¸€ä½“éªŒã€‚ åœ¨ Service Worker å‡ºç°å‰ï¼Œå­˜åœ¨èƒ½å¤Ÿåœ¨ç½‘ç»œä¸Šä¸ºç”¨æˆ·æä¾›ç¦»çº¿ä½“éªŒçš„å¦ä¸€ä¸ª APIï¼Œç§°ä¸º AppCacheã€‚ AppCache API å­˜åœ¨çš„è®¸å¤šç›¸å…³é—®é¢˜ï¼Œåœ¨è®¾è®¡ Service Worker æ—¶å·²äºˆä»¥é¿å…ã€‚ Service Worker ç›¸å…³æ³¨æ„äº‹é¡¹ï¼š å®ƒæ˜¯ä¸€ç§ JavaScript Workerï¼Œæ— æ³•ç›´æ¥è®¿é—® DOMã€‚ Service Worker é€šè¿‡å“åº” postMessage æ¥å£å‘é€çš„æ¶ˆæ¯æ¥ä¸å…¶æ§åˆ¶çš„é¡µé¢é€šä¿¡ï¼Œé¡µé¢å¯åœ¨å¿…è¦æ—¶å¯¹ DOM æ‰§è¡Œæ“ä½œã€‚ Service Worker æ˜¯ä¸€ç§å¯ç¼–ç¨‹ç½‘ç»œä»£ç†ï¼Œè®©æ‚¨èƒ½å¤Ÿæ§åˆ¶é¡µé¢æ‰€å‘é€ç½‘ç»œè¯·æ±‚çš„å¤„ç†æ–¹å¼ã€‚ Service Worker åœ¨ä¸ç”¨æ—¶ä¼šè¢«ä¸­æ­¢ï¼Œå¹¶åœ¨ä¸‹æ¬¡æœ‰éœ€è¦æ—¶é‡å¯ï¼Œå› æ­¤ï¼Œæ‚¨ä¸èƒ½ä¾èµ– Service Worker onfetch å’Œ onmessage å¤„ç†ç¨‹åºä¸­çš„å…¨å±€çŠ¶æ€ã€‚ å¦‚æœå­˜åœ¨æ‚¨éœ€è¦æŒç»­ä¿å­˜å¹¶åœ¨é‡å¯ååŠ ä»¥é‡ç”¨çš„ä¿¡æ¯ï¼ŒService Worker å¯ä»¥è®¿é—® IndexedDB APIã€‚ Service Worker å¹¿æ³›åœ°åˆ©ç”¨äº† promiseï¼Œå› æ­¤å¦‚æœæ‚¨ä¸ç†Ÿæ‚‰ promiseï¼Œåˆ™åº”åœä¸‹é˜…è¯»æ­¤å†…å®¹ï¼Œçœ‹ä¸€çœ‹ Promise ç®€ä»‹ã€‚ Service Worker ç”Ÿå‘½å‘¨æœŸ Service Worker çš„ç”Ÿå‘½å‘¨æœŸå®Œå…¨ç‹¬ç«‹äºç½‘é¡µã€‚ è¦ä¸ºç½‘ç«™å®‰è£…æœåŠ¡å·¥ä½œçº¿ç¨‹ï¼Œæ‚¨éœ€è¦å…ˆåœ¨é¡µé¢çš„ JavaScript ä¸­æ³¨å†Œã€‚ æ³¨å†ŒæœåŠ¡å·¥ä½œçº¿ç¨‹å°†ä¼šå¯¼è‡´æµè§ˆå™¨åœ¨åå°å¯åŠ¨æœåŠ¡å·¥ä½œçº¿ç¨‹å®‰è£…æ­¥éª¤ã€‚ åœ¨å®‰è£…è¿‡ç¨‹ä¸­ï¼Œæ‚¨é€šå¸¸éœ€è¦ç¼“å­˜æŸäº›é™æ€èµ„äº§ã€‚ å¦‚æœæ‰€æœ‰æ–‡ä»¶å‡å·²æˆåŠŸç¼“å­˜ï¼Œé‚£ä¹ˆ Service Worker å°±å®‰è£…å®Œæ¯•ã€‚ å¦‚æœä»»ä½•æ–‡ä»¶ä¸‹è½½å¤±è´¥æˆ–ç¼“å­˜å¤±è´¥ï¼Œé‚£ä¹ˆå®‰è£…æ­¥éª¤å°†ä¼šå¤±è´¥ï¼ŒService Worker å°±æ— æ³•æ¿€æ´»ï¼ˆä¹Ÿå°±æ˜¯è¯´ï¼Œ ä¸ä¼šå®‰è£…ï¼‰ã€‚ å¦‚æœå‘ç”Ÿè¿™ç§æƒ…å†µï¼Œä¸å¿…æ‹…å¿ƒï¼Œå®ƒä¸‹æ¬¡ä¼šå†è¯•ä¸€æ¬¡ã€‚ ä½†è¿™æ„å‘³ç€ï¼Œå¦‚æœå®‰è£…å®Œæˆï¼Œæ‚¨å¯ä»¥çŸ¥é“æ‚¨å·²åœ¨ç¼“å­˜ä¸­è·å¾—é‚£äº›é™æ€èµ„äº§ã€‚ å®‰è£…ä¹‹åï¼Œæ¥ä¸‹æ¥å°±æ˜¯æ¿€æ´»æ­¥éª¤ï¼Œè¿™æ˜¯ç®¡ç†æ—§ç¼“å­˜çš„ç»ä½³æœºä¼šï¼Œæˆ‘ä»¬å°†åœ¨ Service Worker çš„æ›´æ–°éƒ¨åˆ†å¯¹æ­¤è¯¦åŠ ä»‹ç»ã€‚ æ¿€æ´»ä¹‹åï¼ŒService Worker å°†ä¼šå¯¹å…¶ä½œç”¨åŸŸå†…çš„æ‰€æœ‰é¡µé¢å®æ–½æ§åˆ¶ï¼Œä¸è¿‡ï¼Œé¦–æ¬¡æ³¨å†Œè¯¥ Service Worker çš„é¡µé¢éœ€è¦å†æ¬¡åŠ è½½æ‰ä¼šå—å…¶æ§åˆ¶ã€‚ æœåŠ¡å·¥ä½œçº¿ç¨‹å®æ–½æ§åˆ¶åï¼Œå®ƒå°†å¤„äºä»¥ä¸‹ä¸¤ç§çŠ¶æ€ä¹‹ä¸€ï¼šæœåŠ¡å·¥ä½œçº¿ç¨‹ç»ˆæ­¢ä»¥èŠ‚çœå†…å­˜ï¼Œæˆ–å¤„ç†è·å–å’Œæ¶ˆæ¯äº‹ä»¶ï¼Œä»é¡µé¢å‘å‡ºç½‘ç»œè¯·æ±‚æˆ–æ¶ˆæ¯åå°†ä¼šå‡ºç°åä¸€ç§çŠ¶æ€ã€‚ ä»¥ä¸‹æ˜¯ Service Worker åˆå§‹å®‰è£…æ—¶çš„ç®€åŒ–ç”Ÿå‘½å‘¨æœŸã€‚ æµè§ˆå™¨æ”¯æŒ å¯ç”¨çš„æµè§ˆå™¨æ—¥ç›Šå¢å¤šã€‚ Service Worker å— Chromeã€Firefox å’Œ Opera æ”¯æŒã€‚ Microsoft Edge ç°åœ¨è¡¨ç¤ºå…¬å¼€æ”¯æŒã€‚ ç”šè‡³ Safari ä¹Ÿæš—ç¤ºæœªæ¥ä¼šè¿›è¡Œç›¸å…³å¼€å‘ã€‚ æ‚¨å¯ä»¥åœ¨ Jake Archibald çš„ is Serviceworker ready ç½‘ç«™ä¸ŠæŸ¥çœ‹æ‰€æœ‰æµè§ˆå™¨çš„æ”¯æŒæƒ…å†µ ã€‚ æ‚¨éœ€è¦ HTTPS åœ¨å¼€å‘è¿‡ç¨‹ä¸­ï¼Œå¯ä»¥é€šè¿‡ localhost ä½¿ç”¨ Service Workerï¼Œä½†å¦‚æœè¦åœ¨ç½‘ç«™ä¸Šéƒ¨ç½² Service Workerï¼Œåˆ™éœ€è¦åœ¨æœåŠ¡å™¨ä¸Šè®¾ç½® HTTPSã€‚ ä½¿ç”¨æœåŠ¡å·¥ä½œçº¿ç¨‹ï¼Œæ‚¨å¯ä»¥åŠ«æŒè¿æ¥ã€ç¼–æ’°ä»¥åŠè¿‡æ»¤å“åº”ã€‚ è¿™æ˜¯ä¸€ä¸ªå¾ˆå¼ºå¤§çš„å·¥å…·ã€‚ æ‚¨å¯èƒ½ä¼šå–„æ„åœ°ä½¿ç”¨è¿™äº›åŠŸèƒ½ï¼Œä½†ä¸­é—´äººå¯ä¼šå°†å…¶ç”¨äºä¸è‰¯ç›®çš„ã€‚ ä¸ºé¿å…è¿™ç§æƒ…å†µï¼Œå¯ä»…åœ¨é€šè¿‡ HTTPS æä¾›çš„é¡µé¢ä¸Šæ³¨å†Œ Service Workerï¼Œå¦‚æ­¤æˆ‘ä»¬ä¾¿çŸ¥é“æµè§ˆå™¨æ¥æ”¶çš„ Service Worker åœ¨æ•´ä¸ªç½‘ç»œä¼ è¾“è¿‡ç¨‹ä¸­éƒ½æ²¡æœ‰è¢«ç¯¡æ”¹ã€‚ Github é¡µé¢ é€šè¿‡ HTTPS æä¾›ï¼Œå› æ­¤è¿™äº›é¡µé¢æ˜¯æ‰˜ç®¡æ¼”ç¤ºçš„ç»ä½³ä½ç½®ã€‚ å¦‚æœæƒ³è¦å‘æœåŠ¡å™¨æ·»åŠ  HTTPSï¼Œæ‚¨éœ€è¦è·å¾— TLS è¯ä¹¦å¹¶åœ¨æœåŠ¡å™¨ä¸Šè¿›è¡Œè®¾ç½®ã€‚ å…·ä½“å› æ‚¨çš„è®¾ç½®è€Œå¼‚ï¼Œå› æ­¤è¯·æŸ¥çœ‹æœåŠ¡å™¨çš„æ–‡æ¡£ï¼Œå¹¶åŠ¡å¿…æŸ¥é˜… Mozilla SSL é…ç½®ç”Ÿæˆå™¨ï¼Œäº†è§£æœ€ä½³åšæ³•ã€‚ æ³¨å†Œ Service Worker è‹¥è¦å®‰è£… Service Workerï¼Œæ‚¨éœ€è¦é€šè¿‡åœ¨é¡µé¢ä¸­å¯¹å…¶è¿›è¡Œæ³¨å†Œæ¥å¯åŠ¨å®‰è£…ã€‚ è¿™å°†å‘Šè¯‰æµè§ˆå™¨ Service Worker JavaScript æ–‡ä»¶çš„ä½ç½®ã€‚ if ('serviceWorker' in navigator) { window.addEventListener('load', function() { navigator.serviceWorker.register('/sw.js').then(function(registration) { // Registration was successful console.log('ServiceWorker registration successful with scope: ', registration.scope); }, function(err) { // registration failed :( console.log('ServiceWorker registration failed: ', err); }); }); } æ­¤ä»£ç ç”¨äºæ£€æŸ¥ Service Worker API æ˜¯å¦å¯ç”¨ï¼Œå¦‚æœå¯ç”¨ï¼Œåˆ™åœ¨é¡µé¢åŠ è½½åæ³¨å†Œä½äº /sw.js çš„ Service Workerã€‚ æ¯æ¬¡é¡µé¢åŠ è½½æ— è¯¯æ—¶ï¼Œå³å¯è°ƒç”¨ register()ï¼›æµè§ˆå™¨å°†ä¼šåˆ¤æ–­æœåŠ¡å·¥ä½œçº¿ç¨‹æ˜¯å¦å·²æ³¨å†Œå¹¶åšå‡ºç›¸åº”çš„å¤„ç†ã€‚ register() æ–¹æ³•çš„ç²¾å¦™ä¹‹å¤„åœ¨äºæœåŠ¡å·¥ä½œçº¿ç¨‹æ–‡ä»¶çš„ä½ç½®ã€‚ æ‚¨ä¼šå‘ç°åœ¨æœ¬ä¾‹ä¸­æœåŠ¡å·¥ä½œçº¿ç¨‹æ–‡ä»¶ä½äºæ ¹ç½‘åŸŸã€‚ è¿™æ„å‘³ç€æœåŠ¡å·¥ä½œçº¿ç¨‹çš„ä½œç”¨åŸŸå°†æ˜¯æ•´ä¸ªæ¥æºã€‚ æ¢å¥è¯è¯´ï¼ŒService Worker å°†æ¥æ”¶æ­¤ç½‘åŸŸä¸Šæ‰€æœ‰äº‹é¡¹çš„ fetch äº‹ä»¶ã€‚ å¦‚æœæˆ‘ä»¬åœ¨ /example/sw.js å¤„æ³¨å†Œ Service Worker æ–‡ä»¶ï¼Œåˆ™ Service Worker å°†åªèƒ½çœ‹åˆ°ç½‘å€ä»¥ /example/ å¼€å¤´ï¼ˆå³ /example/page1/ã€/example/page2/ï¼‰çš„é¡µé¢çš„ fetch äº‹ä»¶ã€‚ ç°åœ¨ï¼Œæ‚¨å¯ä»¥é€šè¿‡è½¬è‡³ chrome://inspect/#service-workers å¹¶å¯»æ‰¾æ‚¨çš„ç½‘ç«™æ¥æ£€æŸ¥ Service Worker æ˜¯å¦å·²å¯ç”¨ã€‚ é¦–æ¬¡å®æ–½ Service Worker æ—¶ï¼Œæ‚¨è¿˜å¯ä»¥é€šè¿‡ chrome://serviceworker-internals æ¥æŸ¥çœ‹ Service Worker è¯¦æƒ…ã€‚ å¦‚æœåªæ˜¯æƒ³äº†è§£ Service Worker çš„ç”Ÿå‘½å‘¨æœŸï¼Œè¿™ä»å¾ˆæœ‰ç”¨ï¼Œä½†æ˜¯æ—¥åå…¶å¾ˆæœ‰å¯èƒ½è¢« chrome://inspect/#service-workers å®Œå…¨å–ä»£ã€‚ æ‚¨ä¼šå‘ç°ï¼Œå®ƒè¿˜å¯ç”¨äºæµ‹è¯•éšèº«çª—å£ä¸­çš„æœåŠ¡å·¥ä½œçº¿ç¨‹ï¼Œæ‚¨å¯ä»¥å…³é—­æœåŠ¡å·¥ä½œçº¿ç¨‹å¹¶é‡æ–°æ‰“å¼€ï¼Œå› ä¸ºä¹‹å‰çš„æœåŠ¡å·¥ä½œçº¿ç¨‹ä¸ä¼šå½±å“æ–°çª—å£ã€‚ ä»æ— ç—•å¼çª—å£åˆ›å»ºçš„ä»»ä½•æ³¨å†Œå’Œç¼“å­˜åœ¨è¯¥çª—å£å…³é—­åå‡å°†è¢«æ¸…é™¤ã€‚ å®‰è£… Service Worker åœ¨å—æ§é¡µé¢å¯åŠ¨æ³¨å†Œæµç¨‹åï¼Œæˆ‘ä»¬æ¥çœ‹çœ‹å¤„ç† install äº‹ä»¶çš„ Service Worker è„šæœ¬ã€‚ æœ€åŸºæœ¬çš„ä¾‹å­æ˜¯ï¼Œæ‚¨éœ€è¦ä¸ºå®‰è£…äº‹ä»¶å®šä¹‰å›è°ƒï¼Œå¹¶å†³å®šæƒ³è¦ç¼“å­˜çš„æ–‡ä»¶ã€‚ self.addEventListener('install', function(event) { // Perform install steps }); åœ¨ install å›è°ƒçš„å†…éƒ¨ï¼Œæˆ‘ä»¬éœ€è¦æ‰§è¡Œä»¥ä¸‹æ­¥éª¤ï¼š æ‰“å¼€ç¼“å­˜ã€‚ ç¼“å­˜æ–‡ä»¶ã€‚ ç¡®è®¤æ‰€æœ‰éœ€è¦çš„èµ„äº§æ˜¯å¦å·²ç¼“å­˜ã€‚ var CACHE_NAME = 'my-site-cache-v1'; var urlsToCache = [ '/', '/styles/main.css', '/script/main.js' ]; self.addEventListener('install', function(event) { // Perform install steps event.waitUntil( caches.open(CACHE_NAME) .then(function(cache) { console.log('Opened cache'); return cache.addAll(urlsToCache); }) ); }); æ­¤å¤„ï¼Œæˆ‘ä»¬ä»¥æ‰€éœ€çš„ç¼“å­˜åç§°è°ƒç”¨ caches.open()ï¼Œä¹‹åå†è°ƒç”¨ cache.addAll() å¹¶ä¼ å…¥æ–‡ä»¶æ•°ç»„ã€‚ è¿™æ˜¯ä¸€ä¸ª promise é“¾ï¼ˆcaches.open() å’Œ cache.addAll()ï¼‰ã€‚ event.waitUntil() æ–¹æ³•å¸¦æœ‰ promise å‚æ•°å¹¶ä½¿ç”¨å®ƒæ¥åˆ¤æ–­å®‰è£…æ‰€èŠ±è´¹çš„æ—¶é—´ï¼Œä»¥åŠå®‰è£…æ˜¯å¦æˆåŠŸã€‚ å¦‚æœæ‰€æœ‰æ–‡ä»¶éƒ½æˆåŠŸç¼“å­˜ï¼Œåˆ™å°†å®‰è£… Service Workerã€‚ å¦‚æœ‰ä»»ä½•æ–‡ä»¶æ— æ³•ä¸‹è½½ï¼Œåˆ™å®‰è£…æ­¥éª¤å°†å¤±è´¥ã€‚ è¿™å¯è®©æ‚¨ä¾èµ–äºæ‰€å®šä¹‰çš„æ‰€æœ‰èµ„äº§ï¼Œä½†ä¹Ÿæ„å‘³ç€éœ€è¦å¯¹æ‚¨å†³å®šåœ¨å®‰è£…æ­¥éª¤ç¼“å­˜çš„æ–‡ä»¶åˆ—è¡¨æ ¼å¤–ç•™æ„ã€‚ å®šä¹‰ä¸€ä¸ªè¿‡é•¿çš„æ–‡ä»¶åˆ—è¡¨å°†ä¼šå¢åŠ æ–‡ä»¶ç¼“å­˜å¤±è´¥çš„å‡ ç‡ï¼Œä»è€Œå¯¼è‡´æœåŠ¡å·¥ä½œçº¿ç¨‹æœªèƒ½å®‰è£…ã€‚ è¿™ä»…æ˜¯ä¸€ä¸ªç¤ºä¾‹ï¼Œå®é™…æ‚¨å¯ä»¥åœ¨ install äº‹ä»¶ä¸­æ‰§è¡Œå…¶ä»–ä»»åŠ¡ï¼Œæˆ–å®Œå…¨é¿å…è®¾ç½® install äº‹ä»¶ä¾¦å¬å™¨ã€‚ ç¼“å­˜å’Œè¿”å›è¯·æ±‚ æ‚¨å·²å®‰è£… Service Workerï¼Œç°åœ¨å¯èƒ½ä¼šæƒ³è¦è¿”å›ä¸€ä¸ªç¼“å­˜çš„å“åº”ï¼Œå¯¹å§ï¼Ÿ åœ¨å®‰è£… Service Worker ä¸”ç”¨æˆ·è½¬è‡³å…¶ä»–é¡µé¢æˆ–åˆ·æ–°å½“å‰é¡µé¢åï¼ŒService Worker å°†å¼€å§‹æ¥æ”¶ fetch äº‹ä»¶ã€‚ä¸‹é¢æä¾›äº†ä¸€ä¸ªç¤ºä¾‹ã€‚ self.addEventListener('fetch', function(event) { event.respondWith( caches.match(event.request) .then(function(response) { // Cache hit - return response if (response) { return response; } return fetch(event.request); } ) ); }); è¿™é‡Œæˆ‘ä»¬å®šä¹‰äº† fetch äº‹ä»¶ï¼Œå¹¶ä¸”åœ¨ event.respondWith() ä¸­ï¼Œæˆ‘ä»¬ä¼ å…¥æ¥è‡ª caches.match() çš„ä¸€ä¸ª promiseã€‚ æ­¤æ–¹æ³•æ£€è§†è¯¥è¯·æ±‚ï¼Œå¹¶ä»æœåŠ¡å·¥ä½œçº¿ç¨‹æ‰€åˆ›å»ºçš„ä»»ä½•ç¼“å­˜ä¸­æŸ¥æ‰¾ç¼“å­˜çš„ç»“æœã€‚ å¦‚æœå‘ç°åŒ¹é…çš„å“åº”ï¼Œåˆ™è¿”å›ç¼“å­˜çš„å€¼ï¼Œå¦åˆ™ï¼Œå°†è°ƒç”¨ fetch ä»¥å‘å‡ºç½‘ç»œè¯·æ±‚ï¼Œå¹¶å°†ä»ç½‘ç»œæ£€ç´¢åˆ°çš„ä»»ä½•æ•°æ®ä½œä¸ºç»“æœè¿”å›ã€‚ è¿™æ˜¯ä¸€ä¸ªç®€å•çš„ä¾‹å­ï¼Œå®ƒä½¿ç”¨äº†åœ¨å®‰è£…æ­¥éª¤ä¸­ç¼“å­˜çš„æ‰€æœ‰èµ„äº§ã€‚ å¦‚æœå¸Œæœ›è¿ç»­ç¼“å­˜æ–°è¯·æ±‚ï¼Œå¯ä»¥é€šè¿‡å¤„ç† fetch è¯·æ±‚çš„å“åº”å¹¶å°†å…¶æ·»åŠ åˆ°ç¼“å­˜æ¥å®ç°ï¼Œå¦‚ä¸‹æ‰€ç¤ºã€‚ self.addEventListener('fetch', function(event) { event.respondWith( caches.match(event.request) .then(function(response) { // Cache hit - return response if (response) { return response; } // IMPORTANT:Clone the request. A request is a stream and // can only be consumed once. Since we are consuming this // once by cache and once by the browser for fetch, we need // to clone the response. var fetchRequest = event.request.clone(); return fetch(fetchRequest).then( function(response) { // Check if we received a valid response if(!response || response.status !== 200 || response.type !== 'basic') { return response; } // IMPORTANT:Clone the response. A response is a stream // and because we want the browser to consume the response // as well as the cache consuming the response, we need // to clone it so we have two streams. var responseToCache = response.clone(); caches.open(CACHE_NAME) .then(function(cache) { cache.put(event.request, responseToCache); }); return response; } ); }) ); }); æ‰§è¡Œçš„æ“ä½œå¦‚ä¸‹ï¼š åœ¨ fetch è¯·æ±‚ä¸­æ·»åŠ å¯¹ .then() çš„å›è°ƒã€‚ è·å¾—å“åº”åï¼Œæ‰§è¡Œä»¥ä¸‹æ£€æŸ¥ï¼š ç¡®ä¿å“åº”æœ‰æ•ˆã€‚ æ£€æŸ¥å¹¶ç¡®ä¿å“åº”çš„çŠ¶æ€ä¸º 200ã€‚ ç¡®ä¿å“åº”ç±»å‹ä¸º basicï¼Œäº¦å³ç”±è‡ªèº«å‘èµ·çš„è¯·æ±‚ã€‚ è¿™æ„å‘³ç€ï¼Œå¯¹ç¬¬ä¸‰æ–¹èµ„äº§çš„è¯·æ±‚ä¹Ÿä¸ä¼šæ·»åŠ åˆ°ç¼“å­˜ã€‚ å¦‚æœé€šè¿‡æ£€æŸ¥ï¼Œåˆ™å…‹éš†å“åº”ã€‚ è¿™æ ·åšçš„åŸå› åœ¨äºï¼Œè¯¥å“åº”æ˜¯æ•°æ®æµï¼Œ å› æ­¤ä¸»ä½“åªèƒ½ä½¿ç”¨ä¸€æ¬¡ã€‚ ç”±äºæˆ‘ä»¬æƒ³è¦è¿”å›èƒ½è¢«æµè§ˆå™¨ä½¿ç”¨çš„å“åº”ï¼Œå¹¶å°†å…¶ä¼ é€’åˆ°ç¼“å­˜ä»¥ä¾›ä½¿ç”¨ï¼Œå› æ­¤éœ€è¦å…‹éš†ä¸€ä»½å‰¯æœ¬ã€‚æˆ‘ä»¬å°†ä¸€ä»½å‘é€ç»™æµè§ˆå™¨ï¼Œå¦ä¸€ä»½åˆ™ä¿ç•™åœ¨ç¼“å­˜ã€‚ æ›´æ–° Service Worker åœ¨æŸä¸ªæ—¶é—´ç‚¹ï¼Œæ‚¨çš„ Service Worker éœ€è¦æ›´æ–°ã€‚ æ­¤æ—¶ï¼Œæ‚¨éœ€è¦éµå¾ªä»¥ä¸‹æ­¥éª¤ï¼š æ›´æ–°æ‚¨çš„æœåŠ¡å·¥ä½œçº¿ç¨‹ JavaScript æ–‡ä»¶ã€‚ ç”¨æˆ·å¯¼èˆªè‡³æ‚¨çš„ç«™ç‚¹æ—¶ï¼Œæµè§ˆå™¨ä¼šå°è¯•åœ¨åå°é‡æ–°ä¸‹è½½å®šä¹‰ Service Worker çš„è„šæœ¬æ–‡ä»¶ã€‚ å¦‚æœ Service Worker æ–‡ä»¶ä¸å…¶å½“å‰æ‰€ç”¨æ–‡ä»¶å­˜åœ¨å­—èŠ‚å·®å¼‚ï¼Œåˆ™å°†å…¶è§†ä¸ºæ–° Service Workerã€‚ æ–° Service Worker å°†ä¼šå¯åŠ¨ï¼Œä¸”å°†ä¼šè§¦å‘ install äº‹ä»¶ã€‚ æ­¤æ—¶ï¼Œæ—§ Service Worker ä»æ§åˆ¶ç€å½“å‰é¡µé¢ï¼Œå› æ­¤æ–° Service Worker å°†è¿›å…¥ waiting çŠ¶æ€ã€‚ å½“ç½‘ç«™ä¸Šå½“å‰æ‰“å¼€çš„é¡µé¢å…³é—­æ—¶ï¼Œæ—§ Service Worker å°†ä¼šè¢«ç»ˆæ­¢ï¼Œæ–° Service Worker å°†ä¼šå–å¾—æ§åˆ¶æƒã€‚ æ–° Service Worker å–å¾—æ§åˆ¶æƒåï¼Œå°†ä¼šè§¦å‘å…¶ activate äº‹ä»¶ã€‚ å‡ºç°åœ¨ activate å›è°ƒä¸­çš„ä¸€ä¸ªå¸¸è§ä»»åŠ¡æ˜¯ç¼“å­˜ç®¡ç†ã€‚ æ‚¨å¸Œæœ›åœ¨ activate å›è°ƒä¸­æ‰§è¡Œæ­¤ä»»åŠ¡çš„åŸå› åœ¨äºï¼Œå¦‚æœæ‚¨åœ¨å®‰è£…æ­¥éª¤ä¸­æ¸…é™¤äº†ä»»ä½•æ—§ç¼“å­˜ï¼Œåˆ™ç»§ç»­æ§åˆ¶æ‰€æœ‰å½“å‰é¡µé¢çš„ä»»ä½•æ—§ Service Worker å°†çªç„¶æ— æ³•ä»ç¼“å­˜ä¸­æä¾›æ–‡ä»¶ã€‚ æ¯”å¦‚è¯´æˆ‘ä»¬æœ‰ä¸€ä¸ªåä¸º 'my-site-cache-v1' çš„ç¼“å­˜ï¼Œæˆ‘ä»¬æƒ³è¦å°†è¯¥ç¼“å­˜æ‹†åˆ†ä¸ºä¸€ä¸ªé¡µé¢ç¼“å­˜å’Œä¸€ä¸ªåšæ–‡ç¼“å­˜ã€‚ è¿™å°±æ„å‘³ç€åœ¨å®‰è£…æ­¥éª¤ä¸­æˆ‘ä»¬åˆ›å»ºäº†ä¸¤ä¸ªç¼“å­˜ï¼š'pages-cache-v1' å’Œ 'blog-posts-cache-v1'ï¼Œä¸”åœ¨æ¿€æ´»æ­¥éª¤ä¸­æˆ‘ä»¬è¦åˆ é™¤æ—§çš„ 'my-site-cache-v1'ã€‚ ä»¥ä¸‹ä»£ç å°†æ‰§è¡Œæ­¤æ“ä½œï¼Œå…·ä½“åšæ³•ä¸ºï¼šéå† Service Worker ä¸­çš„æ‰€æœ‰ç¼“å­˜ï¼Œå¹¶åˆ é™¤æœªåœ¨ç¼“å­˜ç™½åå•ä¸­å®šä¹‰çš„ä»»ä½•ç¼“å­˜ã€‚ self.addEventListener('activate', function(event) { var cacheWhitelist = ['pages-cache-v1', 'blog-posts-cache-v1']; event.waitUntil( caches.keys().then(function(cacheNames) { return Promise.all( cacheNames.map(function(cacheName) { if (cacheWhitelist.indexOf(cacheName) === -1) { return caches.delete(cacheName); } }) ); }) ); }); ç‘•ç–µå’Œé—®é¢˜ å¦‚æœå®‰è£…å¤±è´¥ï¼Œæˆ‘ä»¬æœªå¿…èƒ½å‘ŠçŸ¥æ‚¨è¯¦æƒ… å¦‚æœ Workeræ³¨å†Œåæœªåœ¨ chrome://inspect/#service-workers æˆ– chrome://serviceworker-internals ä¸­æ˜¾ç¤ºï¼Œåˆ™æœ‰å¯èƒ½æ˜¯å¼•å‘é”™è¯¯æˆ–å‘ event.waitUntil() å‘é€è¢«æ‹’ç»çš„ promise è€Œå¯¼è‡´æ— æ³•å®‰è£…ã€‚ è¦è§£å†³è¯¥é—®é¢˜ï¼Œè¯·è½¬è‡³ chrome://serviceworker-internals å¹¶å‹¾é€‰â€œOpen DevTools window and pause JavaScript execution on service worker startup for debuggingâ€ï¼Œç„¶åå°†è°ƒè¯•ç¨‹åºè¯­å¥ç½®äºå®‰è£…äº‹ä»¶å¼€å§‹å¤„ã€‚ è¿™ä¸æœªæ•è·å¼‚å¸¸ä¸­çš„æš‚åœå…±åŒæ­éœ²é—®é¢˜ã€‚ fetch() é»˜è®¤å€¼ é»˜è®¤æƒ…å†µä¸‹æ²¡æœ‰å‡­æ® ä½¿ç”¨ fetch æ—¶ï¼Œé»˜è®¤æƒ…å†µä¸‹è¯·æ±‚ä¸­ä¸åŒ…å« Cookie ç­‰å‡­æ®ã€‚ å¦‚éœ€å‡­æ®ï¼Œæ”¹ä¸ºè°ƒç”¨ï¼š fetch(url, { credentials: 'include' }) è¿™ä¸€è¡Œä¸ºæ˜¯æœ‰æ„ä¸ºä¹‹ï¼Œå¯ä»¥è¯´æ¯” XHR æ›´å¤æ‚çš„ä»¥ä¸‹é»˜è®¤è¡Œä¸ºæ›´å¥½ï¼šå¦‚æœç½‘å€å…·æœ‰ç›¸åŒæ¥æºï¼Œåˆ™é»˜è®¤å‘é€å‡­æ®ï¼Œå¦åˆ™å¿½ç•¥ã€‚ æå–çš„è¡Œä¸ºæ›´æ¥è¿‘äºå…¶ä»– CORS è¯·æ±‚ï¼Œå¦‚ &lt;img crossorigin&gt;ï¼Œå®ƒå°†å†³ä¸ä¼šå‘é€ Cookieï¼Œé™¤éæ‚¨ä½¿ç”¨ &lt;img crossorigin=&quot;use-credentials&quot;&gt; é€‰æ‹©åŠ å…¥ã€‚ é CORS é»˜è®¤å¤±è´¥ é»˜è®¤æƒ…å†µä¸‹ï¼Œä»ä¸æ”¯æŒ CORS çš„ç¬¬ä¸‰æ–¹ç½‘å€ä¸­æå–èµ„æºå°†ä¼šå¤±è´¥ã€‚ æ‚¨å¯ä»¥å‘è¯·æ±‚ä¸­æ·»åŠ  no-CORS é€‰é¡¹æ¥å…‹æœæ­¤é—®é¢˜ï¼Œä¸è¿‡è¿™å¯èƒ½ä¼šå¯¼è‡´â€œä¸é€æ˜â€çš„å“åº”ï¼Œè¿™æ„å‘³ç€æ‚¨æ— æ³•è¾¨åˆ«å“åº”æ˜¯å¦æˆåŠŸã€‚ cache.addAll(urlsToPrefetch.map(function(urlToPrefetch) { return new Request(urlToPrefetch, { mode: 'no-cors' }); })).then(function() { console.log('All resources have been fetched and cached.'); }); å¤„ç†å“åº”å¼å›¾åƒ srcset å±æ€§æˆ– å…ƒç´ å°†åœ¨è¿è¡ŒæœŸé—´é€‰æ‹©æœ€é€‚å½“çš„å›¾åƒèµ„äº§ï¼Œå¹¶å‘å‡ºç½‘ç»œè¯·æ±‚ã€‚ å¯¹äº Service Workerï¼Œå¦‚æœæ‚¨æƒ³è¦åœ¨å®‰è£…è¿‡ç¨‹ä¸­ç¼“å­˜å›¾åƒï¼Œæ‚¨æœ‰ä¸‹åˆ—å‡ ç§é€‰æ‹©ï¼š å®‰è£… å…ƒç´ å’Œ srcset å±æ€§å°†è¯·æ±‚çš„æ‰€æœ‰å›¾åƒã€‚ å®‰è£…ä¸€ä¸ªä½åˆ†è¾¨ç‡ç‰ˆæœ¬çš„å›¾åƒã€‚ å®‰è£…ä¸€ä¸ªé«˜åˆ†è¾¨ç‡ç‰ˆæœ¬çš„å›¾åƒã€‚ å®é™…ä¸Šï¼Œæ‚¨åº”è¯¥é€‰æ‹© 2 æˆ– 3ï¼Œå› ä¸ºä¸‹è½½æ‰€æœ‰å›¾åƒä¼šæµªè´¹å­˜å‚¨ç©ºé—´ã€‚ å‡å®šæ‚¨åœ¨å®‰è£…æœŸé—´é€‰æ‹©å®‰è£…ä½åˆ†è¾¨ç‡ç‰ˆæœ¬çš„å›¾åƒï¼Œåœ¨é¡µé¢åŠ è½½æ—¶æ‚¨æƒ³è¦å°è¯•ä»ç½‘ç»œä¸­æ£€ç´¢é«˜åˆ†è¾¨ç‡çš„å›¾åƒï¼Œä½†æ˜¯å¦‚æœæ£€ç´¢é«˜åˆ†è¾¨ç‡ç‰ˆæœ¬å¤±è´¥ï¼Œåˆ™å›é€€åˆ°ä½åˆ†è¾¨ç‡ç‰ˆæœ¬ã€‚ è¿™æ²¡æœ‰é—®é¢˜ï¼Œè€Œä¸”è¿™ç§åšæ³•å¾ˆå¥½ï¼Œä½†æ˜¯æœ‰å¦å¤–ä¸€ä¸ªé—®é¢˜ã€‚ å¦‚æœæˆ‘ä»¬æœ‰ä»¥ä¸‹ä¸¤å¼ å›¾åƒï¼š å±å¹•å¯†åº¦ å®½åº¦ é«˜åº¦ 1x 400 400 2x 800 800 åœ¨ srcset å›¾åƒä¸­ï¼Œæˆ‘ä»¬æœ‰ä¸€äº›åƒè¿™æ ·çš„æ ‡è®°ï¼š &lt;img src=&quot;image-src.png&quot; srcset=&quot;image-src.png 1x, image-2x.png 2x&quot; /&gt; å¦‚æœæˆ‘ä»¬ä½¿ç”¨çš„æ˜¯ 2x æ˜¾ç¤ºå±ï¼Œæµè§ˆå™¨å°†ä¼šé€‰æ‹©ä¸‹è½½ image-2x.pngã€‚å¦‚æœæˆ‘ä»¬å¤„äºç¦»çº¿çŠ¶æ€ï¼Œæ‚¨å¯ä»¥å¯¹è¯·æ±‚æ‰§è¡Œ .catch() å¹¶è¿”å› image-src.pngï¼ˆå¦‚å·²ç¼“å­˜ï¼‰ã€‚ä½†æ˜¯ï¼Œæµè§ˆå™¨ä¼šæœŸæœ› 2x å±å¹•ä¸Šçš„å›¾åƒæœ‰é¢å¤–çš„åƒç´ ï¼Œè¿™æ ·å›¾åƒå°†æ˜¾ç¤ºä¸º 200x200 CSS åƒç´ è€Œä¸æ˜¯ 400x400 CSS åƒç´ ã€‚ è§£å†³è¯¥é—®é¢˜çš„å”¯ä¸€åŠæ³•æ˜¯è®¾å®šå›ºå®šçš„å›¾åƒé«˜åº¦å’Œå®½åº¦ã€‚ &lt;img src=&quot;image-src.png&quot; srcset=&quot;image-src.png 1x, image-2x.png 2x&quot; style=&quot;width:400px; height: 400px;&quot; /&gt; å¯¹äºè¦ç”¨äºè‰ºæœ¯æŒ‡å¯¼çš„ &lt;picture&gt; å…ƒç´ ï¼Œè¿™ä¼šå˜å¾—ç›¸å½“å›°éš¾ï¼Œè€Œä¸”å¾ˆå¤§ç¨‹åº¦ä¸Šå–å†³äºå›¾åƒçš„åˆ›å»ºå’Œä½¿ç”¨æ–¹å¼ï¼Œä½†æ˜¯æ‚¨å¯ä»¥ä½¿ç”¨ç±»ä¼¼äº srcset çš„æ–¹æ³•ã€‚ ","link":"https://xiaoai7904.github.io/post/service-worker/"},{"title":"CSS BEMä¹¦å†™è§„","content":"BEMçš„æ„æ€å°±æ˜¯å—ï¼ˆblockï¼‰ã€å…ƒç´ ï¼ˆelementï¼‰ã€ä¿®é¥°ç¬¦ï¼ˆmodifierï¼‰,æ˜¯ç”±Yandexå›¢é˜Ÿæå‡ºçš„ä¸€ç§å‰ç«¯å‘½åæ–¹æ³•è®ºã€‚è¿™ç§å·§å¦™çš„å‘½åæ–¹æ³•è®©ä½ çš„CSSç±»å¯¹å…¶ä»–å¼€å‘è€…æ¥è¯´æ›´åŠ é€æ˜è€Œä¸”æ›´æœ‰æ„ä¹‰ã€‚BEMå‘½åçº¦å®šæ›´åŠ ä¸¥æ ¼ï¼Œè€Œä¸”åŒ…å«æ›´å¤šçš„ä¿¡æ¯ï¼Œå®ƒä»¬ç”¨äºä¸€ä¸ªå›¢é˜Ÿå¼€å‘ä¸€ä¸ªè€—æ—¶çš„å¤§é¡¹ç›® ä»‹ç» \bå¦‚æœä½ æ˜¯ä¸€ä¸ªVueçˆ±å¥½è€…ï¼Œå¹¶ä¸”ä½ æ˜¯ä¸€ä¸ªå–œæ¬¢\bæ¥å—æ–°é²œäº‹ç‰©å’Œ\bè¿½æ±‚æŠ€æœ¯\bé«˜åº¦,é‚£ä¹ˆä½ ä¸€å®š\bä½¿ç”¨æˆ–è€…çŸ¥é“Element-Ui(\bæˆ–è€…å…¶ä»–UIåº“),åœ¨element-uiä¸­ä½ å»è§‚å¯Ÿå®ƒçš„æºç ä½ ä¼šå‘ç°å®ƒçš„ç»„ä»¶cssçš„å®šä¹‰æ–¹å¼ @include b(tree-node) { white-space: nowrap; outline: none; &amp;:focus { /* focus */ &gt; .el-tree-node__content { background-color: $--tree-node-hover-color; } } @include when(drop-inner) { &gt; .el-tree-node__content .el-tree-node__label { background-color: $--color-primary; color: #fff; } } } ä¸Šé¢ä»£ç æ˜¯element-uiä¸­ç»„ä»¶treeç»„ä»¶çš„éƒ¨åˆ†æ ·å¼ \b\bä¸éš¾ä»ä¸Šé¢ä»£ç ä¸­å¯ä»¥çœ‹åˆ°element-uiæ˜¯æ€ä¹ˆæ¥å‘½åclassç±»åå’Œsasså˜é‡\béƒ½ä½¿ç”¨äº†-,__,'--'è¿™ä¸ªè¿\bå­—ç¬¦,ä¸‹é¢æˆ‘ä»¬ä»‹ç»ä¸ºä»€ä¹ˆè¦è¿™æ ·å†™,è¿™æ ·å†™çš„å¥½å¤„æ˜¯ä»€ä¹ˆ BEM BEMä»£è¡¨â€œå—ï¼ˆblockï¼‰,å…ƒç´ ï¼ˆelementï¼‰,ä¿®é¥°ç¬¦ï¼ˆmodifierâ€,æˆ‘ä»¬å¸¸ç”¨è¿™ä¸‰ä¸ªå®ä½“å¼€å‘ç»„ä»¶ã€‚ åœ¨é€‰æ‹©å™¨ä¸­ï¼Œç”±ä»¥ä¸‹ä¸‰ç§ç¬¦åˆæ¥è¡¨ç¤ºæ‰©å±•çš„å…³ç³»: - ä¸­åˆ’çº¿ ï¼šä»…ä½œä¸ºè¿å­—ç¬¦ä½¿ç”¨ï¼Œè¡¨ç¤ºæŸä¸ªå—æˆ–è€…æŸä¸ªå­å…ƒç´ çš„å¤šå•è¯ä¹‹é—´çš„è¿æ¥è®°å· __ åŒä¸‹åˆ’çº¿ï¼šåŒä¸‹åˆ’çº¿ç”¨æ¥è¿æ¥å—å’Œå—çš„å­å…ƒç´  _ å•ä¸‹åˆ’çº¿ï¼šå•ä¸‹åˆ’çº¿ç”¨æ¥æè¿°ä¸€ä¸ªå—æˆ–è€…å—çš„å­å…ƒç´ çš„ä¸€ç§çŠ¶æ€ type-block__element_modifier å—ï¼ˆblockï¼‰ ä¸€ä¸ªå—æ˜¯è®¾è®¡æˆ–å¸ƒå±€çš„ä¸€éƒ¨åˆ†ï¼Œå®ƒæœ‰å…·ä½“ä¸”å”¯ä¸€åœ°æ„ä¹‰ ï¼Œè¦ä¹ˆæ˜¯è¯­ä¹‰ä¸Šçš„è¦ä¹ˆæ˜¯è§†è§‰ä¸Šçš„ ä¾‹å¦‚æˆ‘ä»¬æœ‰ä¸€ä¸ªèœå•åˆ—è¡¨ &lt;ul class=&quot;menu&quot;&gt; &lt;li&gt;1&lt;/li&gt; &lt;li&gt;2&lt;/li&gt; &lt;/ul&gt; \bç±»åmenuå°±æ˜¯ä»£è¡¨èœå•è¿™ä¸ªå—æˆ–è€…åŒºåŸŸ å…ƒç´ ï¼ˆelementï¼‰ å—ä¸­çš„å­å…ƒç´ æ˜¯å—çš„å­å…ƒç´ ï¼Œå¹¶ä¸”å­å…ƒç´ çš„å­å…ƒç´ åœ¨ bem é‡Œä¹Ÿè¢«è®¤ä¸ºæ˜¯å—çš„ç›´æ¥å­å…ƒç´ ã€‚ä¸€ä¸ªå—ä¸­å…ƒç´ çš„ç±»åå¿…é¡»ç”¨çˆ¶çº§å—çš„åç§°ä½œä¸ºå‰ç¼€ &lt;ul class=&quot;menu&quot;&gt; &lt;li class=&quot;menu__item&quot;&gt;1&lt;/li&gt; &lt;li class=&quot;menu__item&quot;&gt;2&lt;/li&gt; &lt;/ul&gt; ç±»åmenu__itemä¸­çš„__itemå°±æ˜¯ä»£è¡¨å…ƒç´ é¡¹ ä¿®é¥°ç¬¦ï¼ˆmodifierï¼‰ ä¸€ä¸ªâ€œä¿®é¥°ç¬¦â€å¯ä»¥ç†è§£ä¸ºä¸€ä¸ªå—çš„ç‰¹å®šçŠ¶æ€ï¼Œæ ‡è¯†ç€å®ƒæŒæœ‰ä¸€ä¸ªç‰¹å®šçš„å±æ€§ &lt;ul class=&quot;menu&quot;&gt; &lt;li class=&quot;menu__item menu__item-actived&quot;&gt;1&lt;/li&gt; &lt;li class=&quot;menu__item&quot;&gt;2&lt;/li&gt; &lt;/ul&gt; ç±»åmenu__item-activedä¸­çš„-activedä»£è¡¨ä¿®é¥°ç¬¦ å¯ä¾›é€‰æ‹©çš„å‘½åæ–¹æ¡ˆ \bBEMåªæ˜¯ä¸€ç§å‘½åçº¦å®šæ–¹æ¡ˆä¸ä¸€å®šè¦æŒ‰ç…§å›ºå®šå†™æ³•\bæ¥æ‰§è¡Œ,ä¸»è¦æ˜¯åœ¨é¡¹ç›®ä¸­è¦ä¿æŒä¸€è‡´çš„å‘½åçº¦å®šå³å¯ ä¸‹é¢æœ‰å‡ ç§æ–¹æ¡ˆæä¾›\b\bå‚è€ƒ Two Dashes styleï¼ˆåŒè¿å­—ç¬¦é£æ ¼ï¼‰ block-name__elem-name--mod-name åå­—å…¨éƒ¨ä½¿ç”¨å°å†™ BEM å®ä½“çš„åç§°ä¸­çš„æ¯ä¸€ä¸ªå•è¯ä½¿ç”¨ä¸€ä¸ªè¿å­—ç¬¦åˆ†éš” ä½¿ç”¨åŒä¸‹åˆ’çº¿ï¼ˆ__ï¼‰å°†å…ƒç´ çš„åç§°å’Œæ¨¡å—çš„åç§°åˆ†ç¦»å¼€ ä½¿ç”¨åŒè¿å­—ç¬¦ï¼ˆ--ï¼‰åˆ†éš” Boolean ç±»å‹çš„ä¿®é¥°ç¬¦ ä¸ä½¿ç”¨ key-value ç±»å‹çš„ä¿®é¥°ç¬¦ CamelCase styleï¼ˆé©¼å³°å‘½åé£æ ¼ï¼‰ MyBlock__SomeElem_modName_modVla è¿™ç§é£æ ¼çš„å‘½åæ–¹æ¡ˆçš„ä¸åŒç‚¹åœ¨äºï¼Œåœ¨BEMå®ä½“ä¸­åˆ†éš”å•è¯æ—¶ä½¿ç”¨é©¼å³°å‘½åæ³•ä»£æ›¿äº†ä¸€ä¸ªè¿å­—ç¬¦ï¼ˆ-ï¼‰ &quot;Sans underscore&quot; styleï¼ˆæ— ä¸‹åˆ’çº¿é£æ ¼ï¼‰ blockName-elemName--modName--modVal åç§°ä½¿ç”¨é©¼å³°å‘½åæ³•ä¹¦å†™ å…ƒç´ åç§°ä¸æ¨¡å—åç§°ä½¿ç”¨ä¸€ä¸ªè¿å­—ç¬¦ï¼ˆ-ï¼‰åˆ†éš” ä¿®é¥°ç¬¦ä½¿ç”¨åŒè¿å­—ç¬¦ï¼ˆ--ï¼‰ä¸æ¨¡å—æˆ–å…ƒç´ åˆ†éš” ä¿®é¥°ç¬¦çš„åç§°å’Œå€¼ä½¿ç”¨åŒè¿å­—ç¬¦ï¼ˆ--ï¼‰åˆ†éš” BEMæ–¹æ³•è®ºä¸ºBEMå®ä½“çš„å‘½åæä¾›äº†åŸºæœ¬çš„åŸåˆ™ã€‚é€‰æ‹©å“ªä¸€ç§å‘½åæ–¹å¼å–å†³äºä½ é¡¹ç›®çš„éœ€æ±‚å’Œä½ çš„ä¸ªäººå–œå¥½ã€‚ä½¿ç”¨æ–¹æ³•è®ºä¸­æåˆ°çš„å‘½åçº¦å®šçš„ä¸€å¤§ä¼˜åŠ¿åœ¨äºå…·æœ‰ç°æˆçš„é¢å‘â€œç»å…¸å‘½åâ€çš„å¼€å‘å·¥å…· æ–‡ç« å‚è€ƒ ã€è¯‘ã€‘BEM CSSå‘½åè§„èŒƒä¸‰ Naming convention W3cschool Yandex BEM/OOCSS ","link":"https://xiaoai7904.github.io/post/css-bem-shu-xie-gui/"},{"title":"å‰ç«¯å¤§æ‚çƒ©","content":"æ•´ç†ç›®å‰github\bä¸Šé¢æ¯”è¾ƒä¼˜ç§€å’Œçƒ­é—¨çš„é¡¹ç›®,æ–‡ç« ï¼Œæ–¹ä¾¿æŸ¥çœ‹å’Œå­¦ä¹  2019-11-23æ›´æ–° NeteaseCloudMusicApi ç½‘æ˜“äº‘éŸ³ä¹ Node.js API service iDataV å¤§å±æ•°æ®å¯è§†åŒ– Administrative-divisions-of-China åŸå¸‚æ•°æ®JSON 2019-4-16æ›´æ–° Octotree GitHub code tree on steroids Twemoji Emoji for everyone. AreaCity-JsSpider-StatsGov å›½å®¶ç»Ÿè®¡å±€ä¸­çš„çœå¸‚åŒºé•‡è¡Œæ”¿åŒºåˆ’æ•°æ®å¸¦æ‹¼éŸ³æ ‡æ³¨ï¼Œé«˜å¾·åœ°å›¾çš„åæ ‡å’Œè¡Œæ”¿åŒºåŸŸè¾¹ç•ŒèŒƒå›´ï¼Œåœ¨æµè§ˆå™¨é‡Œé¢è¿è¡Œjsä»£ç é‡‡é›†çš„2019å¹´å‘å¸ƒçš„æœ€æ–°æ•°æ®ï¼Œå«é‡‡é›†æºç . You-Dont-Need-jQuery Examples of how to do query, style, dom, ajax, event etc like jQuery with plain javascript. laxxx Simple &amp; light weight (3kb minified &amp; zipped) vanilla javascript plugin to create smooth &amp; beautiful animations when you scrolllll! Harness the power of the most intuitive interaction and make your websites come alive! AutoPiano è‡ªç”±é’¢ç´ AutoPiano 2019-2-15æ›´æ–° Motrix åŸºäºElectron Vue + VueX + Elementå¼€å‘ 2018-1-13æ›´æ–° CSS-Inspiration CSS Inspirationï¼Œåœ¨è¿™é‡Œæ‰¾åˆ°å†™ CSS çš„çµæ„Ÿ anime JavaScript animation engine reveal å¹»ç¯ç‰‡å±•ç¤ºæ¡†æ¶ 2018-12-23æ›´æ–° tui.calendar ä¸€ä¸ªJavaScriptæ—¥å† vue-html Vueæ¨¡æ¿å’ŒVue JSXçš„æ›¿ä»£å“ Blog Vueæ¨¡æ¿å’ŒVue JSXçš„æ›¿ä»£å“ strapi Vueæ¨¡æ¿å’ŒVue JSXçš„æ›¿ä»£å“ Boostnote é€‚ç”¨äºMacï¼ŒWindowså’ŒLinuxçš„å¼€å‘äººå‘˜çš„é™ä»·ç¼–è¾‘å™¨ htm ä½¿ç”¨æ ‡å‡†æ ‡è®°æ¨¡æ¿çš„JSXæ›¿ä»£æ–¹æ¡ˆï¼Œå…·æœ‰ç¼–è¯‘å™¨æ”¯æŒ nodebestpractices æœ€å¤§çš„Node.JSæœ€ä½³å®è·µåˆ—è¡¨ 2018-12-17æ›´æ–° forever ä¸€ä¸ªç®€å•çš„CLIå·¥å…·ï¼Œç”¨äºç¡®ä¿ç»™å®šè„šæœ¬è¿ç»­è¿è¡Œ connect-history-api-fallback å¯¹äºä½¿ç”¨HTML 5å†å²è®°å½•APIçš„åº”ç”¨ç¨‹åº Android å’Œ IOS ä½¿ç”¨ WebViewJavascriptBridge è¿›è¡Œäº¤äº’æ–¹æ³• CentOS 7éƒ¨ç½²Node.js+MongoDB Vultræ³¨å†ŒåŠVPSè´­ä¹°å›¾æ–‡æ•™ç¨‹ åœ¨CentOS VPSä¸Šé€šè¿‡SSHå®‰è£… MySQL ä½ ï¼ˆå¯èƒ½ï¼‰ä¸çŸ¥é“çš„web api Freï¼šåˆä¸€ä¸ªå°è€Œç¾çš„å‰ç«¯MVVMæ¡†æ¶ Eruda ä¸€ä¸ªè¢«äººé—å¿˜çš„è°ƒè¯•ç¥å™¨ å‰ç«¯æ¥å—åç«¯æ–‡ä»¶æµå¹¶ä¸‹è½½çš„å‡ ç§æ–¹æ³• 2018-12-10æ›´æ–° video.js å¼€æºHTML5å’ŒFlashè§†é¢‘æ’­æ”¾å™¨ 2018-12-8æ›´æ–° sharp ç”¨äºé«˜æ•ˆå¤„ç†å›¾åƒçš„node.jsæ¨¡å— three.js ä¸€æ¬¾javascript 3Dåº“ jsPDF jsPDF å®¢æœç«¯PDFç”Ÿæˆå·¥å…· å‰ç«¯æ„å»ºï¼š3 ç±» 13 ç§çƒ­é—¨å·¥å…·çš„é€‰å‹å‚è€ƒ æ¥è‡ªå¾®ä¿¡å…¬ä¼—å· 2018-12-6æ›´æ–° free-programming-books-zh_CN å…è´¹çš„è®¡ç®—æœºç¼–ç¨‹ç±»ä¸­æ–‡ä¹¦ç± Charles ä»å…¥é—¨åˆ°ç²¾é€š mac charlesç½‘ç»œæŠ“åŒ…è½¯ä»¶æ•™ç¨‹ æ·±å…¥ç†è§£ TypeScript ä¸€æœ¬ä¸­æ–‡TypeScriptçš„æ•™ç¨‹ä¹¦ï¼ŒåŸç‰ˆ(è‹±æ–‡ç‰ˆæœ¬)typescript-book åˆæ¢ Vue3.0 ä¸­çš„ä¸€å¤§äº®ç‚¹â€”â€”Proxy ! æ˜é‡‘åŸåˆ›æ–‡ç«  2018-12-3æ›´æ–° fx ensorSpaceæ˜¯ä¸€å¥—ç”¨äºæ„å»ºç¥ç»ç½‘ç»œ3Då¯è§†åŒ–åº”ç”¨çš„æ¡†æ¶ tensorspaceå‘½ä»¤è¡Œå·¥å…·å’Œç»ˆç«¯JSONæŸ¥çœ‹å™¨ slateå¯å®šåˆ¶å¯Œæ–‡æœ¬ç¼–è¾‘å™¨ react-beautiful-dndreact å¯æ‹–æ‹½uiåˆ—è¡¨ 2018-12-1æ›´æ–° GoJS ç”¨äºäº¤äº’å¼æµç¨‹å›¾ï¼Œç»„ç»‡ç»“æ„å›¾ï¼Œè®¾è®¡å·¥å…·ï¼Œè§„åˆ’å·¥å…·ï¼Œå¯è§†è¯­è¨€çš„JavaScriptå›¾è¡¨åº“ TS ç‰ˆ Promise è¯¦è§£ æ˜é‡‘åŸåˆ›æ–‡ç«  å°ç¨‹åºäº‘å¼€å‘æ•™ç¨‹ æ˜é‡‘åŸåˆ›æ–‡ç«  JSå‡½æ•°èŠ‚æµå’Œå‡½æ•°é˜²æŠ– æ˜é‡‘åŸåˆ›æ–‡ç«  ç»†è§£JavaScript ES7 ES8 ES9 æ–°ç‰¹æ€§ 2018-11-29æ›´æ–° Vue \bç”¨äºæ„å»ºç”¨æˆ·ç•Œé¢çš„æ¸è¿›å¼æ¡†æ¶ React Facebookå‡ºå“,ç”¨äºæ„å»ºç”¨æˆ·ç•Œé¢çš„JSåº“ Node åŸºäºV8å¼•æ“çš„javascript runtime axios åˆ©ç”¨Promise\bç¼–å†™çš„HTTPå®¢æœç«¯ puppeteer è°·æ­Œ\bç»´æŠ¤Nodeåº“,å®ƒæä¾›äº†ä¸€ä¸ªé«˜çº§APIæ¥æ§åˆ¶DevToolsåè®®ä¸Šçš„Chromeæˆ–Chromium,å¯ä»¥ç”¨ç€å‰ç«¯è‡ªåŠ¨åŒ–æµ‹è¯•,çˆ¬è™«ç­‰ NervJs/taro å¤šç«¯ç»Ÿä¸€å¼€å‘æ¡†æ¶ï¼Œæ”¯æŒç”¨ Reactçš„å¼€å‘æ–¹å¼ç¼–å†™ä¸€æ¬¡ä»£ç ï¼Œç”Ÿæˆèƒ½è¿è¡Œåœ¨å¾®ä¿¡å°ç¨‹åº/ç™¾åº¦æ™ºèƒ½å°ç¨‹åº/æ”¯ä»˜å®å°ç¨‹åºã€H5ã€React Native ç­‰çš„åº”ç”¨ Omi è…¾è®¯å‡ºå“ï¼Œ4kb JavaScriptä¸­çš„ä¸‹ä¸€ä»£Webæ¡†æ¶ï¼ˆWeb Components + JSX + Proxy + Store + Path Updating),æ˜“äºMVVM Mermaid ä¸€ä¸ªç”Ÿæˆæµç¨‹å›¾çš„å·¥å…· learnGitBranching åœ¨çº¿å­¦gitå‘½ä»¤çš„ä½¿ç”¨,ä¸€ä¸ªäº¤äº’å¼çš„gitå¯è§†åŒ–æ¥æŒ‘æˆ˜å’Œå­¦ä¹  progress-estimator è®°å½•è¿›åº¦æ¡å¹¶ä¼°ç®—Promiseå®Œæˆæ‰€éœ€çš„æ—¶é—´ event-stream EventStream is like functional programming meets IO 30-seconds-of-code ç²¾é€‰çš„æœ‰ç”¨JavaScriptä»£ç æ®µé›†åˆï¼Œæ‚¨å¯ä»¥åœ¨30ç§’æˆ–æ›´çŸ­çš„æ—¶é—´å†…ç†è§£è¿™äº›ä»£ç æ®µ ImageRevealHover ä¸€ç»„é“¾æ¥æ‚¬åœæ•ˆæœï¼Œä»¥ä¸åŒçš„åˆ›ä½œæ–¹å¼æ˜¾ç¤ºç¼©ç•¥å›¾ htm ä½¿ç”¨æ ‡å‡†æ ‡è®°æ¨¡æ¿çš„JSXæ›¿ä»£æ–¹æ¡ˆï¼Œå…·æœ‰ç¼–è¯‘å™¨æ”¯æŒ airbnb/javascript javascriptä»£ç è§„èŒƒå’Œes-lintç›¸å…³é…ç½® document-library jsliang çš„æ–‡æ¡£åº“. é‡Œé¢åŒ…å«äº†æ‰€æœ‰çš„å‰ç«¯æ–‡ç« ï¼Œä¾‹å¦‚ vueã€react,ã€angularã€å¾®ä¿¡å°ç¨‹åºã€è®¾è®¡æ¨¡å¼ç­‰â€¦â€¦ mpvue åŸºäº Vue.js çš„å°ç¨‹åºå¼€å‘æ¡†æ¶ï¼Œä»åº•å±‚æ”¯æŒ Vue.js è¯­æ³•å’Œæ„å»ºå·¥å…·ä½“ç³» element-ui åŸºäº Vue 2.0 æ¡Œé¢uiåº“ iview åŸºäº Vue 2.0 æ¡Œé¢uiåº“ awesome-vue åŸºäºVueä¼˜ç§€æ’ä»¶é›†åˆ æŒç»­æ›´æ–°... ","link":"https://xiaoai7904.github.io/post/qian-duan-da-za-hui/"},{"title":"vueæºç è§£æ,è‡ªå·±åŠ¨æ‰‹å®ç°miniVue","content":"é€šè¿‡å¯¹Vueæºç è¿›è¡Œé˜…è¯»,è‡ªå·±åŠ¨æ‰‹å®ç°miniVueæ¡†æ¶ miniVue mini ç‰ˆæœ¬ Vue,å®ç°äº† Vue æœ€æ ¸å¿ƒéƒ¨åˆ†ä»£ç ,è¯¥é¡¹ç›®æ˜¯ä¸ºäº†å¯¹ Vue æœ‰æ›´åŠ æ·±å…¥äº†è§£,æ ¹æ®å¯¹æºç å‰–æå’Œè‡ªå·±çš„ç†è§£æ¨¡æ‹Ÿ Vue å†™çš„ mini ç‰ˆæœ¬çš„ Vue githubæºç åœ°å€ ç›®å‰æ²¡æœ‰å®ç°diffç®—æ³•,æ¯æ¬¡éƒ½æ˜¯å¼ºåˆ¶æ›´æ–°dom å®ä¾‹ &lt;!-- å¦‚æœä½¿ç”¨MiniVue.min.jsåœ¨å®ä¾‹åŒ–ç”¨new MiniVue.minè¿›è¡Œå®ä¾‹åŒ–- --&gt; &lt;!-- å¦‚æœä½¿ç”¨MiniVue.es5.jsåœ¨å®ä¾‹åŒ–ç”¨new MiniVue.es5è¿›è¡Œå®ä¾‹åŒ–- --&gt; &lt;script src=&quot;../dist/MiniVue.js&quot;&gt;&lt;/script&gt; &lt;div id=&quot;app&quot; class=&quot;aa&quot; :class=&quot;classFn&quot; style=&quot;font-size: 20px&quot; :style=&quot;styleFn&quot;&gt; &lt;div&gt;{{a}}&lt;/div&gt; &lt;input type=&quot;text&quot; v-model=&quot;a&quot; /&gt; &lt;button @click=&quot;clickFn&quot;&gt;xx&lt;/button&gt; &lt;/div&gt; new MiniVue({ el: '#app', data() { return { a: 1, color: '#999', classFn: 'bb' }; }, computed: { styleFn() { return { color: this.color }; } }, methods: { clickFn() { console.log('clickFn'); this.a = this.a === 33333 ? 2222 : 33333; this.color = this.color === 'red' ? '#000' : 'red'; } }, created() { console.log('created'); }, beforeMount() { console.log('beforeMount'); }, beforeUpdate() { console.log('beforeUpdate'); }, mounted() { console.log('mounted'); setTimeout(() =&gt; { this.a = 2222; }, 1000 * 3); } }); æ–‡ä»¶ç›®å½• Comilper---&gt;ä¸»è¦æ˜¯å¤„ç†domç¼–è¯‘ Instance---&gt;ç¨‹åºå…¥å£å’Œåˆ›å»ºdom Observer---&gt;æ•°æ®æ‹¦æˆª,æ•°æ®è®¢é˜…ï¼Œå‘å¸ƒï¼Œæ›´æ–° Util---&gt;ç¨‹åºå·¥å…·ç±»(debug,nextTick...) æ·±å…¥å“åº”å¼åŸç† å…ˆçœ‹ä¸€å¼ Vueå®˜æ–¹æ–‡æ¡£ä¸­çš„å›¾ å½“ä½ æŠŠä¸€ä¸ªæ™®é€šçš„ JavaScript å¯¹è±¡ä¼ ç»™ Vue å®ä¾‹çš„ data é€‰é¡¹ï¼ŒVue å°†éå†æ­¤å¯¹è±¡æ‰€æœ‰çš„å±æ€§ï¼Œå¹¶ä½¿ç”¨ Object.defineProperty æŠŠè¿™äº›å±æ€§å…¨éƒ¨è½¬ä¸º getter/setterã€‚Object.defineProperty æ˜¯ ES5 ä¸­ä¸€ä¸ªæ— æ³• shim çš„ç‰¹æ€§ï¼Œè¿™ä¹Ÿå°±æ˜¯ä¸ºä»€ä¹ˆ Vue ä¸æ”¯æŒ IE8 ä»¥åŠæ›´ä½ç‰ˆæœ¬æµè§ˆå™¨ã€‚ è¿™äº› getter/setter å¯¹ç”¨æˆ·æ¥è¯´æ˜¯ä¸å¯è§çš„ï¼Œä½†æ˜¯åœ¨å†…éƒ¨å®ƒä»¬è®© Vue è¿½è¸ªä¾èµ–ï¼Œåœ¨å±æ€§è¢«è®¿é—®å’Œä¿®æ”¹æ—¶é€šçŸ¥å˜åŒ–ã€‚è¿™é‡Œéœ€è¦æ³¨æ„çš„é—®é¢˜æ˜¯æµè§ˆå™¨æ§åˆ¶å°åœ¨æ‰“å°æ•°æ®å¯¹è±¡æ—¶ getter/setter çš„æ ¼å¼åŒ–å¹¶ä¸åŒï¼Œæ‰€ä»¥ä½ å¯èƒ½éœ€è¦å®‰è£… vue-devtools æ¥è·å–æ›´åŠ å‹å¥½çš„æ£€æŸ¥æ¥å£ã€‚ æ¯ä¸ªç»„ä»¶å®ä¾‹éƒ½æœ‰ç›¸åº”çš„ watcher å®ä¾‹å¯¹è±¡ï¼Œå®ƒä¼šåœ¨ç»„ä»¶æ¸²æŸ“çš„è¿‡ç¨‹ä¸­æŠŠå±æ€§è®°å½•ä¸ºä¾èµ–ï¼Œä¹‹åå½“ä¾èµ–é¡¹çš„ setter è¢«è°ƒç”¨æ—¶ï¼Œä¼šé€šçŸ¥ watcher é‡æ–°è®¡ç®—ï¼Œä»è€Œè‡´ä½¿å®ƒå…³è”çš„ç»„ä»¶å¾—ä»¥æ›´æ–° MiniVue\b å“åº”å¼åŸç† MiniVue æ˜¯å¯¹ Vue è¿›è¡Œ æ·±åº¦å­¦ä¹ å¾—ç­‰çš„ äº§å“,å¤§éƒ¨åˆ†ä»£ç éƒ½æ˜¯æ¥æºVueæºç ï¼Œ\b åœ¨MiniVueä¸­ä½¿ç”¨äº†Object.defineProperty()è¿›è¡Œæ•°æ®åŠ«æŒ,æ¥ç›‘å¬setterå’Œgetter æ•°æ®åˆå§‹åŒ–åŠ«æŒ /** * åˆå§‹åŒ–dataå¯¹è±¡æ•°æ®,æ”¶é›†æ•°æ®æ·»åŠ ç›‘å¬ */ _initData() { let vm = this; let data = this.$options.data; // dataæ”¯æŒä¸¤ç§å†™æ³•(å‡½æ•°å’Œå¯¹è±¡) // å¦‚æœdataæ˜¯å‡½æ•°å°±ç›´æ¥æ‰§è¡Œæ‹¿åˆ°è¿”å›å€¼,å¦‚æœæ˜¯å¯¹è±¡ç›´æ¥è¿”å› data = vm._data = typeof data === 'function' ? data.call(vm) : data || {}; const keys = Object.keys(data); let i = keys.length; while (i--) { let key = keys[i]; this.proxy(vm, '_data', key); } observe(data, vm); } æ ¸å¿ƒä»£ç  Object.defineProperty(obj, key, { // å¯æšä¸¾ enumerable: true, configurable: true, get: function reactiveGetter() { const value = getter ? getter.call(obj) : val; // ä¾èµ–æ”¶é›† if (Dep.target) { dep.depend(); } return value; }, set: function reactiveSetter(newVal) { const value = getter ? getter.call(obj) : val; if (newVal === value || (newVal !== newVal &amp;&amp; value !== value)) { return; } // æ›´æ–°å€¼ if (setter) { setter.call(obj, newVal); } else { val = newVal; } // æ–°çš„å€¼æ˜¯objectçš„è¯ï¼Œè¿›è¡Œç›‘å¬ childObj = observe(newVal); // é€šçŸ¥æ‰€æœ‰è®¢é˜…è€…è¿›è¡Œè§†å›¾æ›´æ–° dep.notify(); } }); è¿™æ ·æˆ‘ä»¬å·²ç»å¯ä»¥ç›‘å¬æ¯ä¸ªæ•°æ®çš„å˜åŒ–äº†ï¼Œé‚£ä¹ˆç›‘å¬åˆ°å˜åŒ–ä¹‹åå°±é€šçŸ¥è®¢é˜…è€…ï¼Œæ‰€ä»¥æ¥ä¸‹æ¥æˆ‘ä»¬éœ€è¦å®ç°ä¸€ä¸ªæ¶ˆæ¯è®¢é˜…å™¨ï¼Œç»´æŠ¤ä¸€ä¸ªæ•°ç»„ï¼Œç”¨æ¥æ”¶é›†è®¢é˜…è€…ï¼Œæ•°æ®å˜åŠ¨è§¦å‘notifyï¼Œå†è°ƒç”¨è®¢é˜…è€…çš„updateæ–¹æ³• /** * è®¢é˜…è€…Dep * ä¸»è¦ä½œç”¨æ˜¯ç”¨æ¥å­˜æ”¾Watcherè§‚å¯Ÿè€…å¯¹è±¡ */ export default class Dep { constructor() { // æ ‡ç¤ºidé˜²æ­¢æ·»åŠ é‡å¤è§‚å¯Ÿè€…å¯¹è±¡ this.id = uid++; // å­˜å‚¨è§‚å¯Ÿè€…å¯¹è±¡ this.subs = []; } /** * æ·»åŠ è§‚å¯Ÿè€… * @param {Watcherå¯¹è±¡} sub */ addSub(sub) { this.subs.push(sub); } /** * é€šçŸ¥æ‰€æœ‰è®¢é˜…è€… * updateæ–¹æ³•æ˜¯æŒ‚è½½åœ¨WatcheråŸå‹å¯¹è±¡ä¸Šé¢çš„,æ–¹æ³•å†…éƒ¨ä¼šæŠŠéœ€è¦çš„æ›´æ–°æ•°æ®pushåˆ°å¼‚æ­¥é˜Ÿåˆ—ä¸­,ç­‰åˆ°æ•°æ®æ‰€æœ‰æ“ä½œå®Œæˆåœ¨è¿›è¡Œè§†å›¾æ›´æ–° */ notify() { // æ‹·è´è§‚å¯Ÿè€…å¯¹è±¡ const subs = this.subs.slice(); // å¾ªç¯æ‰€æœ‰è§‚å¯Ÿè€…è¿›è¡Œæ›´æ–°æ“ä½œ subs.map(item =&gt; { item.update(); return item; }); } } æ€»ç»“: å“åº”å¼åŸç† ---&gt; åˆå§‹åŒ–ä¼šè·å–dataé‡Œé¢çš„æ•°æ®ï¼Œè¿›è¡Œæ•°æ®åŠ«æŒä½¿ç”¨Object.definePropertyè¿›è¡Œæ•°æ®åŠ«æŒ,å¯¹dataé‡Œé¢çš„æ¯ä¸€æ¡æ•°æ®è¿›è¡Œsetterå’Œgetter,å½“æœ‰è·å–æ•°æ®è§¦å‘getterè¿›è¡Œä¾èµ–æ”¶é›†,å½“æœ‰æ•°æ®å‘ç”Ÿæ”¹å˜è§¦å‘setteræ›´æ–°æ•°æ®,\bå¹¶ä¸”é€šçŸ¥è®¢é˜…è€…è§¦å‘æ›´æ–° MiniVue AST å†…éƒ¨é€šè¿‡éå† html æ–‡æ¡£æ ‘ï¼Œé€šè¿‡æ­£åˆ™åŒ¹é…è½¬æ¢æˆASTæ ‘ /** * htmlè½¬ä¸ºAst * @returns Object ASTè¯­æ³•æ ‘ */ _convertHtml2Ast() { while (this.template) { let textEnd = this.template.indexOf('&lt;'); if (textEnd === 0) { // å¦‚æœæ˜¯æ³¨é‡Šæ ‡ç­¾ç›´æ¥è·³è¿‡ç¼–è¯‘ if (regExp.comment.test(this.template)) { let commentEnd = this.template.indexOf('--&gt;'); this._advance(commentEnd + 3); continue; } // åŒ¹é…ç»“æŸæ ‡ç­¾ let endTagMatch = this.template.match(regExp.endTag); if (endTagMatch) { let _index = this.index; this._advance(endTagMatch[0].length); this._parseEndTag(endTagMatch[1], _index, this.index); continue; } // åŒ¹é…å¼€å§‹æ ‡ç­¾ let startTagMatch = this._parseStartTag(); if (startTagMatch) { this._handleStartTag(startTagMatch); continue; } } } } for (var i = 0, l = attrs.length; i &lt; l; i++) { map[attrs[i].name] = attrs[i].value; /** * 1.åŒ¹é… @ ç¬¦å·è¡¨ç¤ºæ˜¯ç»‘å®šäº‹ä»¶ * 2.åŒ¹é… :class :style è¡¨è¾¾å¼classå’Œè¡¨è¾¾å¼style * 3.åŒ¹é… class style é™æ€classå’Œé™æ€style * 4.æ™®é€šæ•°æ®(å¦‚: id) */ if (attrs[i].name.match(/^@/g)) { isEvent = true; event[attrs[i].name.match(/\\w*$/)[0]] = { value: attrs[i].value }; } else if (class2styleReg.test(attrs[i].name)) { attrs[i].name.indexOf('class') &gt; -1 ? (staticClass = attrs[i].value) : (staticStyle = attrs[i].value); } else if (class2styleExpReg.test(attrs[i].name)) { attrs[i].name.indexOf(':class') &gt; -1 ? (classBinding = attrs[i].value) : (styleBinding = attrs[i].value); } else if (attrs[i].name === 'v-model') { isEvent = true; event['input'] = { value: `function($event){if($event.target.composing)return;${attrs[i].value}=$event.target.value}` }; props.push({ name: 'value', value: `(${attrs[i].value})` }); directives.push({ arg: null, modifiers: undefined, name: 'model', rawName: 'v-model', value: attrs[i].value }); } else { _attrs.push({ name: attrs[i].name, value: attrs[i].value }); } } // é»˜è®¤æ ¹astæ•°æ®ç»“æ„ var astMap = { type: 1, tag: startTagMatch.tagName, attrsList: attrs, attrsMap: map, parent: parent, children: [] }; é€šè¿‡æ­£åˆ™åŒ¹é…æŠŠ Html è½¬ä¸ºä¸º AST æ ‘ ç»“æ„å¦‚ä¸‹: MiniVue VNode VNode(è™šæ‹ŸDom) å¯ä»¥æŠŠçœŸå® DOM æ ‘æŠ½è±¡æˆä¸€æ£µä»¥ JavaScript å¯¹è±¡æ„æˆçš„æŠ½è±¡æ ‘ï¼Œåœ¨ä¿®æ”¹æŠ½è±¡æ ‘æ•°æ®åå°†æŠ½è±¡æ ‘è½¬åŒ–æˆçœŸå® DOM é‡ç»˜åˆ°é¡µé¢ä¸Šå‘¢ï¼Ÿäºæ˜¯è™šæ‹Ÿ DOM å‡ºç°äº†ï¼Œå®ƒæ˜¯çœŸå® DOM çš„ä¸€å±‚æŠ½è±¡ï¼Œç”¨å±æ€§æè¿°çœŸå® DOM çš„å„ä¸ªç‰¹æ€§ã€‚å½“å®ƒå‘ç”Ÿå˜åŒ–çš„æ—¶å€™ï¼Œå°±ä¼šå»ä¿®æ”¹è§†å›¾ã€‚ å¯ä»¥æƒ³è±¡ï¼Œæœ€ç®€å•ç²—æš´çš„æ–¹æ³•å°±æ˜¯å°†æ•´ä¸ª DOM ç»“æ„ç”¨ innerHTML ä¿®æ”¹åˆ°é¡µé¢ä¸Šï¼Œä½†æ˜¯è¿™æ ·è¿›è¡Œé‡ç»˜æ•´ä¸ªè§†å›¾å±‚æ˜¯ç›¸å½“æ¶ˆè€—æ€§èƒ½çš„ï¼Œæˆ‘ä»¬æ˜¯ä¸æ˜¯å¯ä»¥æ¯æ¬¡åªæ›´æ–°å®ƒçš„ä¿®æ”¹å‘¢ï¼Ÿæ‰€ä»¥ Vue.js å°† DOM æŠ½è±¡æˆä¸€ä¸ªä»¥ JavaScript å¯¹è±¡ä¸ºèŠ‚ç‚¹çš„è™šæ‹Ÿ DOM æ ‘ï¼Œä»¥ VNode èŠ‚ç‚¹æ¨¡æ‹ŸçœŸå® DOMï¼Œå¯ä»¥å¯¹è¿™é¢—æŠ½è±¡æ ‘è¿›è¡Œåˆ›å»ºèŠ‚ç‚¹ã€åˆ é™¤èŠ‚ç‚¹ä»¥åŠä¿®æ”¹èŠ‚ç‚¹ç­‰æ“ä½œï¼Œåœ¨è¿™è¿‡ç¨‹ä¸­éƒ½ä¸éœ€è¦æ“ä½œçœŸå® DOMï¼Œåªéœ€è¦æ“ä½œ JavaScript å¯¹è±¡ååªå¯¹å·®å¼‚ä¿®æ”¹ï¼Œç›¸å¯¹äºæ•´å—çš„ innerHTML çš„ç²—æš´å¼ä¿®æ”¹ï¼Œå¤§å¤§æå‡äº†æ€§èƒ½ã€‚ä¿®æ”¹ä»¥åç»è¿‡ diff ç®—æ³•å¾—å‡ºä¸€äº›éœ€è¦ä¿®æ”¹çš„æœ€å°å•ä½ï¼Œå†å°†è¿™äº›å°å•ä½çš„è§†å›¾è¿›è¡Œæ›´æ–°ã€‚è¿™æ ·åšå‡å°‘äº†å¾ˆå¤šä¸éœ€è¦çš„ DOM æ“ä½œï¼Œå¤§å¤§æé«˜äº†æ€§èƒ½ã€‚ Vue å°±ä½¿ç”¨äº†è¿™æ ·çš„æŠ½è±¡èŠ‚ç‚¹ VNodeï¼Œå®ƒæ˜¯å¯¹çœŸå® DOM çš„ä¸€å±‚æŠ½è±¡ï¼Œè€Œä¸ä¾èµ–æŸä¸ªå¹³å°ï¼Œå®ƒå¯ä»¥æ˜¯æµè§ˆå™¨å¹³å°ï¼Œä¹Ÿå¯ä»¥æ˜¯ weexï¼Œç”šè‡³æ˜¯ node å¹³å°ä¹Ÿå¯ä»¥å¯¹è¿™æ ·ä¸€æ£µæŠ½è±¡ DOM æ ‘è¿›è¡Œåˆ›å»ºåˆ é™¤ä¿®æ”¹ç­‰æ“ä½œï¼Œè¿™ä¹Ÿä¸ºå‰åç«¯åŒæ„æä¾›äº†å¯èƒ½ export default class VNode { constructor(tag, data, children, text, elm, context, componentOptions, asyncFactory) { /*å½“å‰èŠ‚ç‚¹çš„æ ‡ç­¾å*/ this.tag = tag; /*å½“å‰èŠ‚ç‚¹å¯¹åº”çš„å¯¹è±¡ï¼ŒåŒ…å«äº†å…·ä½“çš„ä¸€äº›æ•°æ®ä¿¡æ¯ï¼Œæ˜¯ä¸€ä¸ªVNodeDataç±»å‹ï¼Œå¯ä»¥å‚è€ƒVNodeDataç±»å‹ä¸­çš„æ•°æ®ä¿¡æ¯*/ this.data = data; /*å½“å‰èŠ‚ç‚¹çš„å­èŠ‚ç‚¹ï¼Œæ˜¯ä¸€ä¸ªæ•°ç»„*/ this.children = children; /*å½“å‰èŠ‚ç‚¹çš„æ–‡æœ¬*/ this.text = text; /*å½“å‰è™šæ‹ŸèŠ‚ç‚¹å¯¹åº”çš„çœŸå®domèŠ‚ç‚¹*/ this.elm = elm; /*å½“å‰èŠ‚ç‚¹çš„åå­—ç©ºé—´*/ this.ns = undefined; /*ç¼–è¯‘ä½œç”¨åŸŸ*/ this.context = context; /*å‡½æ•°åŒ–ç»„ä»¶ä½œç”¨åŸŸ*/ this.functionalContext = undefined; /*èŠ‚ç‚¹çš„keyå±æ€§ï¼Œè¢«å½“ä½œèŠ‚ç‚¹çš„æ ‡å¿—ï¼Œç”¨ä»¥ä¼˜åŒ–*/ this.key = data &amp;&amp; data.key; /*ç»„ä»¶çš„optioné€‰é¡¹*/ this.componentOptions = componentOptions; /*å½“å‰èŠ‚ç‚¹å¯¹åº”çš„ç»„ä»¶çš„å®ä¾‹*/ this.componentInstance = undefined; /*å½“å‰èŠ‚ç‚¹çš„çˆ¶èŠ‚ç‚¹*/ this.parent = undefined; /*ç®€è€Œè¨€ä¹‹å°±æ˜¯æ˜¯å¦ä¸ºåŸç”ŸHTMLæˆ–åªæ˜¯æ™®é€šæ–‡æœ¬ï¼ŒinnerHTMLçš„æ—¶å€™ä¸ºtrueï¼ŒtextContentçš„æ—¶å€™ä¸ºfalse*/ this.raw = false; /*é™æ€èŠ‚ç‚¹æ ‡å¿—*/ this.isStatic = false; /*æ˜¯å¦ä½œä¸ºè·ŸèŠ‚ç‚¹æ’å…¥*/ this.isRootInsert = true; /*æ˜¯å¦ä¸ºæ³¨é‡ŠèŠ‚ç‚¹*/ this.isComment = false; /*æ˜¯å¦ä¸ºå…‹éš†èŠ‚ç‚¹*/ this.isCloned = false; /*æ˜¯å¦æœ‰v-onceæŒ‡ä»¤*/ this.isOnce = false; } child() { return this.componentInstance; } } ä¼šæ ¹æ®ç”Ÿæˆçš„ASTæ ‘è½¬æ¢æˆ \brender å‡½æ•°ï¼Œrender å‡½æ•°åˆ›å»ºæ¯ä¸ªèŠ‚ç‚¹ VNode render å‡½æ•° &quot;with(this){return _c('div',{staticClass:&quot;aa bb&quot;,class:classFn,staticStyle:{&quot;width&quot;:&quot;200px&quot;,&quot;height&quot;:&quot;50px&quot;},style:(styleFn),attrs:{&quot;id&quot;:&quot;app&quot;}},[_c('input',{directives:[{name:&quot;model&quot;,rawName:&quot;v-model&quot;,value:(testData),expression:&quot;testData&quot;}],attrs:{&quot;type&quot;:&quot;text&quot;,&quot;name&quot;:&quot;&quot;},domProps:{&quot;value&quot;:(testData)},on:{&quot;input&quot;:function($event){if($event.target.composing)return;testData=$event.target.value}}}),_v(&quot; &quot;),_c('button',{on:{&quot;click&quot;:update}},[_v(&quot;update&quot;)])])} _c ---&gt;åˆ›å»ºæ ‡ç­¾ _v ---&gt;åˆ›å»ºæ–‡æœ¬èŠ‚ç‚¹ _s ---&gt;å­—ç¬¦ä¸²åºåˆ—åŒ– _c: /** * åˆ›å»ºå…ƒç´  * @param {Object} context miniVueå®ä¾‹ * @param {String} tag æ ‡ç­¾ * @param {Object} data æ•°æ® * @param {Array} children å­èŠ‚ç‚¹ */ export function createElement(context, tag, data, children) { var vnode; if (!tag) { createEmptyVNode(); } // å…¼å®¹ä¸ä¼ dataçš„æƒ…å†µ, å¤„ç†&lt;span&gt;{{a}}&lt;/span&gt;è¿™ç§domæƒ…å†µ,å­—ç¬¦ä¸²functionä¸º: _c('span', [_v(_s(a))]) if (Array.isArray(data)) { children = data; data = undefined; } if (typeof tag === 'string') { vnode = new VNode(tag, data, children, undefined, undefined, context); } if (vnode !== undefined) { return vnode; } } _v: /** * åˆ›å»ºæ–‡æœ¬èŠ‚ç‚¹ */ export function createTextVNode(val) { return new VNode(undefined, undefined, undefined, String(val)); } æœ€å ","link":"https://xiaoai7904.github.io/post/vue-yuan-ma-jie-xi-zi-ji-dong-shou-shi-xian-minivue/"},{"title":"Async Function","content":"Chrome 55 ä¸­é»˜è®¤æƒ…å†µä¸‹å¯ç”¨å¼‚æ­¥å‡½æ•°ï¼Œå¦ç‡åœ°è®²ï¼Œå®ƒä»¬çš„ä½œç”¨ç›¸å½“ä¸å¯æ€è®®ã€‚ å¯ä»¥åˆ©ç”¨å®ƒä»¬åƒç¼–å†™åŒæ­¥ä»£ç é‚£æ ·ç¼–å†™åŸºäº Promise çš„ä»£ç ï¼Œè€Œä¸”è¿˜ä¸ä¼šé˜»å¡ä¸»çº¿ç¨‹ã€‚ å®ƒä»¬å¯ä»¥è®©å¼‚æ­¥ä»£ç â€œæ™ºå•†â€ä¸‹é™ã€å¯è¯»æ€§æé«˜ã€‚ å¼‚æ­¥å‡½æ•°çš„å·¥ä½œæ–¹å¼æ˜¯è¿™æ ·çš„ï¼š async function myFirstAsyncFunction() { try { const fulfilledValue = await promise; } catch (rejectedValue) { // â€¦ } } å¦‚æœåœ¨å‡½æ•°å®šä¹‰ä¹‹å‰ä½¿ç”¨äº† async å…³é”®å­—ï¼Œå°±å¯ä»¥åœ¨å‡½æ•°å†…ä½¿ç”¨ awaitã€‚ å½“æ‚¨ await æŸä¸ª Promise æ—¶ï¼Œå‡½æ•°æš‚åœæ‰§è¡Œï¼Œç›´è‡³è¯¥ Promise äº§ç”Ÿç»“æœï¼Œå¹¶ä¸”æš‚åœå¹¶ä¸ä¼šé˜»å¡ä¸»çº¿ç¨‹ã€‚ å¦‚æœ Promise æ‰§è¡Œï¼Œåˆ™ä¼šè¿”å›å€¼ã€‚ å¦‚æœ Promise æ‹’ç»ï¼Œåˆ™ä¼šæŠ›å‡ºæ‹’ç»çš„å€¼ã€‚ ç¤ºä¾‹ å‡è®¾æˆ‘ä»¬æƒ³è·å–æŸä¸ªç½‘å€å¹¶ä»¥æ–‡æœ¬å½¢å¼è®°å½•å“åº”æ—¥å¿—ã€‚ä»¥ä¸‹æ˜¯åˆ©ç”¨ Promise ç¼–å†™çš„ä»£ç ï¼š function logFetch(url) { return fetch(url) .then(response =&gt; response.text()) .then(text =&gt; { console.log(text); }).catch(err =&gt; { console.error('fetch failed', err); }); } ä»¥ä¸‹æ˜¯åˆ©ç”¨å¼‚æ­¥å‡½æ•°å…·æœ‰ç›¸åŒä½œç”¨çš„ä»£ç ï¼š async function logFetch(url) { try { const response = await fetch(url); console.log(await response.text()); } catch (err) { console.log('fetch failed', err); } } ä»£ç è¡Œæ•°è™½ç„¶ç›¸åŒï¼Œä½†å»æ‰äº†æ‰€æœ‰å›è°ƒã€‚è¿™å¯ä»¥æé«˜ä»£ç çš„å¯è¯»æ€§ï¼Œå¯¹ä¸å¤ªç†Ÿæ‚‰ Promise çš„äººè€Œè¨€ï¼Œå¸®åŠ©å°±æ›´å¤§äº†ã€‚ å¼‚æ­¥å‡½æ•°è¿”å›å€¼ æ— è®ºæ˜¯å¦ä½¿ç”¨ awaitï¼Œå¼‚æ­¥å‡½æ•°éƒ½ä¼šè¿”å› Promiseã€‚è¯¥ Promise è§£ææ—¶è¿”å›å¼‚æ­¥å‡½æ•°è¿”å›çš„ä»»ä½•å€¼ï¼Œæ‹’ç»æ—¶è¿”å›å¼‚æ­¥å‡½æ•°æŠ›å‡ºçš„ä»»ä½•å€¼ã€‚ // wait ms milliseconds function wait(ms) { return new Promise(r =&gt; setTimeout(r, ms)); } async function hello() { await wait(500); return 'world'; } è°ƒç”¨ hello() è¿”å›çš„ Promise ä¼šåœ¨æ‰§è¡Œæ—¶è¿”å› &quot;world&quot;ã€‚ async function foo() { await wait(500); throw Error('bar'); } å…¶ä»–å¼‚æ­¥å‡½æ•°è¯­æ³• æˆ‘ä»¬å·²ç»è§è¯†äº† async function() {}ï¼Œä½† async å…³é”®å­—è¿˜å¯ç”¨äºå…¶ä»–å‡½æ•°è¯­æ³•ï¼š ç®­å¤´å‡½æ•° // map some URLs to json-promises const jsonPromises = urls.map(async url =&gt; { const response = await fetch(url); return response.json(); }); å¯¹è±¡æ–¹æ³• const storage = { async getAvatar(name) { const cache = await caches.open('avatars'); return cache.match(`/avatars/${name}.jpg`); } }; storage.getAvatar('jaffathecake').then(â€¦); ç±»æ–¹æ³• class Storage { constructor() { this.cachePromise = caches.open('avatars'); } async getAvatar(name) { const cache = await this.cachePromise; return cache.match(`/avatars/${name}.jpg`); } } const storage = new Storage(); storage.getAvatar('jaffathecake').then(â€¦); ","link":"https://xiaoai7904.github.io/post/async-function/"},{"title":"FromData Blob ArrayBuffe","content":"åˆ©ç”¨FormDataå¯¹è±¡,æˆ‘ä»¬å¯ä»¥é€šè¿‡JavaScriptç”¨ä¸€äº›é”®å€¼å¯¹æ¥æ¨¡æ‹Ÿä¸€ç³»åˆ—è¡¨å•æ§ä»¶,æˆ‘ä»¬è¿˜å¯ä»¥ä½¿ç”¨XMLHttpRequestçš„send()æ–¹æ³•æ¥å¼‚æ­¥çš„æäº¤è¿™ä¸ª&quot;è¡¨å•&quot;,Blobå¯¹è±¡è¡¨ç¤ºä¸€ä¸ªä¸å¯å˜ã€åŸå§‹æ•°æ®çš„ç±»æ–‡ä»¶å¯¹è±¡,ArrayBufferå¯¹è±¡ç”¨æ¥è¡¨ç¤ºé€šç”¨çš„ã€å›ºå®šé•¿åº¦çš„åŸå§‹äºŒè¿›åˆ¶æ•°æ®ç¼“å†²åŒº FormData XMLHttpRequest Level 2æ·»åŠ äº†ä¸€ä¸ªæ–°çš„æ¥å£FormData.åˆ©ç”¨FormDataå¯¹è±¡,æˆ‘ä»¬å¯ä»¥é€šè¿‡JavaScriptç”¨ä¸€äº›é”®å€¼å¯¹æ¥æ¨¡æ‹Ÿä¸€ç³»åˆ—è¡¨å•æ§ä»¶,æˆ‘ä»¬è¿˜å¯ä»¥ä½¿ç”¨XMLHttpRequestçš„send()æ–¹æ³•æ¥å¼‚æ­¥çš„æäº¤è¿™ä¸ª&quot;è¡¨å•&quot;.æ¯”èµ·æ™®é€šçš„ajax,ä½¿ç”¨FormDataçš„æœ€å¤§ä¼˜ç‚¹å°±æ˜¯æˆ‘ä»¬å¯ä»¥å¼‚æ­¥ä¸Šä¼ ä¸€ä¸ªäºŒè¿›åˆ¶æ–‡ä»¶ ä¸Šæ–‡æ˜¯MDN\bå®˜æ–¹è§£é‡Š,åœ¨å®é™…å¼€å‘ä¸­æˆ‘ä»¬å¯ä»¥åˆ©ç”¨å®ƒæ¥è¿›è¡Œåšä¸Šä¼ æ–‡ä»¶æ“ä½œ,ä¸‹é¢ä»£ç ç®€å•ä»‹ç»äº†FormDataå¦‚ä½•ä½¿ç”¨ let xhr= new XMLHttpRequest(); let fromdata = new FormData() formdata.append(&quot;token&quot;, 'ddddd-ddd-dd'); xhr.open(&quot;POST&quot;, &quot;xxx.php&quot;); xhr.send(); api append() ç»™å½“å‰FormDataå¯¹è±¡æ·»åŠ ä¸€ä¸ªé”®/å€¼å¯¹ void append(DOMString name, Blob value, optional DOMString filename) name: å­—æ®µåç§° value: å­—æ®µå€¼.å¯ä»¥æ˜¯,æˆ–è€…ä¸€ä¸ªå­—ç¬¦ä¸²,å¦‚æœå…¨éƒ½ä¸æ˜¯,åˆ™è¯¥å€¼ä¼šè¢«è‡ªåŠ¨è½¬æ¢æˆå­—ç¬¦ä¸² filename[å¯é€‰] æŒ‡å®šæ–‡ä»¶çš„æ–‡ä»¶å,å½“valueå‚æ•°è¢«æŒ‡å®šä¸ºä¸€ä¸ªBlobå¯¹è±¡æˆ–è€…ä¸€ä¸ªFileå¯¹è±¡æ—¶,è¯¥æ–‡ä»¶åä¼šè¢«å‘é€åˆ°æœåŠ¡å™¨ä¸Š,å¯¹äºBlobå¯¹è±¡æ¥è¯´,è¿™ä¸ªå€¼é»˜è®¤ä¸º&quot;blob&quot;) Blob Blob\bå³äºŒè¿›åˆ¶å¤§æ•°æ®å¯¹è±¡,æä¾›ç›¸åº”çš„æ¥å£,å…¶ä»–æ“ä½œäºŒè¿›åˆ¶çš„å¯¹è±¡éƒ½æ˜¯å»ºç«‹åœ¨BlobåŸºç¡€ä¹‹ä¸Š,å¹¶ç»§æ‰¿äº†\b\bè¯¥å¯¹è±¡çš„å±æ€§å’Œæ–¹æ³• ä½¿ç”¨ Blob åˆ›å»ºä¸€ä¸ªæŒ‡å‘ç±»å‹åŒ–æ•°ç»„çš„URL var typedArray = GetTheTypedArraySomehow(); var blob = new Blob([typedArray], {type: &quot;application/octet-binary&quot;});// ä¼ å…¥ä¸€ä¸ªåˆé€‚çš„MIMEç±»å‹ var url = URL.createObjectURL(blob); // ä¼šäº§ç”Ÿä¸€ä¸ªç±»ä¼¼blob:d3958f5c-0777-0845-9dcf-2cb28783acaf è¿™æ ·çš„URLå­—ç¬¦ä¸² // ä½ å¯ä»¥åƒä½¿ç”¨ä¸€ä¸ªæ™®é€šURLé‚£æ ·ä½¿ç”¨å®ƒï¼Œæ¯”å¦‚ç”¨åœ¨img.srcä¸Š api Blob.size[åªè¯»] Blobå¯¹è±¡ä¸­æ‰€åŒ…å«æ•°æ®çš„å¤§å°ï¼ˆå­—èŠ‚ï¼‰ Blob.type[åªè¯»] ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œè¡¨æ˜è¯¥Blobå¯¹è±¡æ‰€åŒ…å«æ•°æ®çš„MIMEç±»å‹ã€‚å¦‚æœç±»å‹æœªçŸ¥ï¼Œåˆ™è¯¥å€¼ä¸ºç©ºå­—ç¬¦ä¸² Blob.slice(start,end) è¿”å›ä¸€ä¸ªæ–°çš„ Blobå¯¹è±¡ï¼ŒåŒ…å«äº†æº Blobå¯¹è±¡ä¸­æŒ‡å®šèŒƒå›´å†…çš„æ•°æ® ArrayBuffer ArrayBufferå¯¹è±¡ç”¨æ¥è¡¨ç¤ºé€šç”¨çš„ã€å›ºå®šé•¿åº¦çš„åŸå§‹äºŒè¿›åˆ¶æ•°æ®ç¼“å†²åŒºã€‚ArrayBufferä¸èƒ½ç›´æ¥æ“ä½œï¼Œè€Œæ˜¯è¦é€šè¿‡ç±»å‹æ•°ç»„å¯¹è±¡æˆ– DataView å¯¹è±¡æ¥æ“ä½œï¼Œå®ƒä»¬ä¼šå°†ç¼“å†²åŒºä¸­çš„æ•°æ®è¡¨ç¤ºä¸ºç‰¹å®šçš„æ ¼å¼ï¼Œå¹¶é€šè¿‡è¿™äº›æ ¼å¼æ¥è¯»å†™ç¼“å†²åŒºçš„å†…å®¹ // åˆ›å»ºä¸€ä¸ª8å­—èŠ‚çš„ArrayBuffer var b = new ArrayBuffer(8); // åˆ›å»ºä¸€ä¸ªæŒ‡å‘bçš„è§†å›¾v1ï¼Œé‡‡ç”¨Int32ç±»å‹ï¼Œå¼€å§‹äºé»˜è®¤çš„å­—èŠ‚ç´¢å¼•0ï¼Œç›´åˆ°ç¼“å†²åŒºçš„æœ«å°¾ var v1 = new Int32Array(b); // åˆ›å»ºä¸€ä¸ªæŒ‡å‘bçš„è§†å›¾v2ï¼Œé‡‡ç”¨Uint8ç±»å‹ï¼Œå¼€å§‹äºå­—èŠ‚ç´¢å¼•2ï¼Œç›´åˆ°ç¼“å†²åŒºçš„æœ«å°¾ var v2 = new Uint8Array(b, 2); // åˆ›å»ºä¸€ä¸ªæŒ‡å‘bçš„è§†å›¾v3ï¼Œé‡‡ç”¨Int16ç±»å‹ï¼Œå¼€å§‹äºå­—èŠ‚ç´¢å¼•2ï¼Œé•¿åº¦ä¸º2 var v3 = new Int16Array(b, 2, 2); api new ArrayBuffer(length) lengthè¦åˆ›å»ºçš„ ArrayBuffer çš„å¤§å°ï¼Œå•ä½ä¸ºå­—èŠ‚,è¿”å›ä¸€ä¸ªæŒ‡å®šå¤§å°çš„ ArrayBuffer å¯¹è±¡ï¼Œå…¶å†…å®¹è¢«åˆå§‹åŒ–ä¸º 0 get ArrayBuffer[@@species] è¿”å› ArrayBuffer çš„æ„é€ å‡½æ•° ArrayBuffer.isView(arg) å¦‚æœå‚æ•°æ˜¯ ArrayBuffer çš„è§†å›¾å®ä¾‹åˆ™è¿”å› trueï¼Œä¾‹å¦‚ ç±»å‹æ•°ç»„å¯¹è±¡ æˆ– DataView å¯¹è±¡ï¼›å¦åˆ™è¿”å› false ArrayBuffer.transfer(oldBuffer [, newByteLength]) è¿”å›ä¸€ä¸ªæ–°çš„ ArrayBuffer å¯¹è±¡ï¼Œå…¶å†…å®¹å–è‡ª oldBuffer ä¸­çš„æ•°æ®ï¼Œå¹¶ä¸”æ ¹æ® newByteLength çš„å¤§å°å¯¹æ•°æ®è¿›è¡Œæˆªå–æˆ–è¡¥ 0 ArrayBuffer.slice() è¿”å›ä¸€ä¸ªæ–°çš„ ArrayBuffer ï¼Œå®ƒçš„å†…å®¹æ˜¯è¿™ä¸ª ArrayBuffer çš„å­—èŠ‚å‰¯æœ¬ï¼Œä»beginï¼ˆåŒ…æ‹¬ï¼‰ï¼Œåˆ°endï¼ˆä¸åŒ…æ‹¬ï¼‰ã€‚å¦‚æœbeginæˆ–endæ˜¯è´Ÿæ•°ï¼Œåˆ™æŒ‡çš„æ˜¯ä»æ•°ç»„æœ«å°¾å¼€å§‹çš„ç´¢å¼•ï¼Œè€Œä¸æ˜¯ä»å¤´å¼€å§‹ æ–‡ç« å‚è€ƒ ArrayBuffer-MDN Blob-MDN FormData-MDN ","link":"https://xiaoai7904.github.io/post/fromdata-blob-arraybuffe/"},{"title":"ç§»åŠ¨ç«¯å¼€ä¸­é‡åˆ°çš„é—®é¢˜æ•´ç†","content":"åœ¨æ—¥å¸¸å¼€å‘ä¸­ç§»åŠ¨ç«¯é‡åˆ°çš„é—®é¢˜è¿›è¡Œä¸€ä¸ªæ•´ç†ï¼Œæ–¹ä¾¿åé¢æŸ¥çœ‹ inputæ–‡æœ¬æ¡†å®½åº¦è®¾ç½®100%æ—¶è¶Šç•Œçš„è§£å†³æ–¹æ³• åœ¨å¼€å‘H5é¡µé¢æ—¶ç¢°åˆ°è¿™ä¹ˆä¸€ä¸ªå‘ï¼Œinputæ–‡æœ¬æ¡†çš„å®½åº¦è®¾ç½®ä¸º100%æ—¶ï¼Œå…¶å®é™…å®½åº¦å±…ç„¶ä¼šè¶…å‡ºçˆ¶å…ƒç´ ï¼Œç„¶è€Œåœ¨PCä¸Šä¸€åˆ‡æ­£å¸¸ &amp;-search__ipt { width: 100%; height: 60px; background-color: #eaeaea; border:0; outline: 0; border-radius: 30px; color: #b0b0b0; text-align: center; font-size: 20px; } è§£å†³åŠæ³•: æ·»åŠ box-sizing: border-boxå±æ€§å³å¯è§£å†³ äº§ç”ŸåŸå› : W3Cæ ‡å‡†å®šä¹‰ï¼šcontentå®½åº¦å°±æ˜¯å®é™…å®šä¹‰çš„å®½åº¦ï¼Œwidthä½ å®šä¹‰å¤šæ¬¾contenå°±æ˜¯å¤šå®½ä¼ ç»Ÿçš„,IEä¸‹å®šä¹‰ï¼šcontentåŒ…æ‹¬ï¼šwidthã€paddingã€borderï¼Œä¹Ÿå°±æ˜¯content=width+padding+border å¼¹å‡ºé®ç½©æ»šåŠ¨æ¡äº‹ä»¶ç©¿é€ // æ–¹æ³•ä¸€: document.body.addEventListener('touchmove', function(e) { e.preventDefault(); }, false); //æ–¹æ³•äºŒ: .scroll { position: fixed; width: 100%; } var scroll = (function (className) { var scrollTop; return { afterOpen: function () { scrollTop = document.scrollingElement.scrollTop || document.body.scrollTop; document.body.classList.add(className); document.body.style.top = -scrollTop + 'px'; }, beforeClose: function () { document.body.classList.remove(className); document.scrollingElement.scrollTop = scrollTop; document.body.scrollTop = scrollTop; } }; })('scroll'); IOS\bæ»šåŠ¨æ¡å¡é¡¿é—®é¢˜ ä»¥ä¸‹ä»£ç å¯è§£å†³è¿™ç§å¡é¡¿çš„é—®é¢˜ï¼š-webkit-overflow-scrolling: touch;ï¼Œæ˜¯å› ä¸ºè¿™è¡Œä»£ç å¯ç”¨äº†ç¡¬ä»¶åŠ é€Ÿç‰¹æ€§ï¼Œæ‰€ä»¥æ»‘åŠ¨å¾ˆæµç•… æ¨èä¸€ä¸ªæ’ä»¶iScroll å¾®ä¿¡æµè§ˆå™¨ç”¨æˆ·è°ƒæ•´å­—ä½“å¤§å°åé¡µé¢çŸ¬äº†ï¼Œæ€ä¹ˆé˜»æ­¢ç”¨æˆ·è°ƒæ•´ //ä»¥ä¸‹ä»£ç å¯ä½¿Androidæœºé¡µé¢ä¸å†å—ç”¨æˆ·å­—ä½“ç¼©æ”¾å¼ºåˆ¶æ”¹å˜å¤§å°ï¼Œä½†æ˜¯ä¼šæœ‰1Så·¦å³å»¶æ—¶ï¼ŒæœŸé—´å¯ä»¥è€ƒè™‘loadingæ¥å¤„ç† if (typeof(WeixinJSBridge) == &quot;undefined&quot;) { document.addEventListener(&quot;WeixinJSBridgeReady&quot;, function (e) { setTimeout(function(){ WeixinJSBridge.invoke('setFontSizeCallback', { 'fontSize':0}, function(res){ alert(JSON.stringify(res)); }) }, 0) }); }else{ setTimeout(function(){ WeixinJSBridge.invoke('setFontSizeCallback', { 'fontSize':0}, function(res){ alert(JSON.stringify(res)); }) }, 0) } //IOSä¸‹å¯ä½¿ç”¨ -webkit-text-size-adjustç¦æ­¢ç”¨æˆ·è°ƒæ•´å­—ä½“å¤§å° body { -webkit-text-size-adjust:100%!important; } //æœ€å¥½çš„è§£å†³æ–¹æ¡ˆï¼šæœ€å¥½ä½¿ç”¨remæˆ–ç™¾åˆ†æ¯”å¸ƒå±€ ä½œè€…ï¼šæˆ‘æ˜¯å¤§å¸ˆå…„å•Š é“¾æ¥ï¼šhttps://www.jianshu.com/p/220b56eb20e9 ä¾†æºï¼šç®€ä¹¦ ç®€ä¹¦è‘—ä½œæƒå½’ä½œè€…æ‰€æœ‰ï¼Œä»»ä½•å½¢å¼çš„è½¬è½½éƒ½è¯·è”ç³»ä½œè€…è·å¾—æˆæƒå¹¶æ³¨æ˜å‡ºå¤„ã€‚ å±å¹•æ—‹è½¬çš„äº‹ä»¶å’Œæ ·å¼ function orientInit(){ var orientChk = document.documentElement.clientWidth &gt; document.documentElement.clientHeight?'landscape':'portrait'; if(orientChk =='lapdscape'){ //è¿™é‡Œæ˜¯æ¨ªå±ä¸‹éœ€è¦æ‰§è¡Œçš„äº‹ä»¶ }else{ //è¿™é‡Œæ˜¯ç«–å±ä¸‹éœ€è¦æ‰§è¡Œçš„äº‹ä»¶ } } orientInit(); window.addEventListener('onorientationchange' in window?'orientationchange':'resize', function(){ setTimeout(orientInit, 100); },false) //CSSå¤„ç† //ç«–å±æ—¶æ ·å¼ @media all and (orientation:portrait){ } //æ¨ªå±æ—¶æ ·å¼ @media all and (orientation:landscape){ } ä½œè€…ï¼šæˆ‘æ˜¯å¤§å¸ˆå…„å•Š é“¾æ¥ï¼šhttps://www.jianshu.com/p/220b56eb20e9 ä¾†æºï¼šç®€ä¹¦ ç®€ä¹¦è‘—ä½œæƒå½’ä½œè€…æ‰€æœ‰ï¼Œä»»ä½•å½¢å¼çš„è½¬è½½éƒ½è¯·è”ç³»ä½œè€…è·å¾—æˆæƒå¹¶æ³¨æ˜å‡ºå¤„ã€‚ audioå…ƒç´ å’Œvideoå…ƒç´ åœ¨ioså’Œandriodä¸­æ— æ³•è‡ªåŠ¨æ’­æ”¾ &lt;audio src=&quot;music/bg.mp3&quot; autoplay loop controls&gt;ä½ çš„æµè§ˆå™¨è¿˜ä¸æ”¯æŒå“¦&lt;/audio&gt; &lt;audio controls=&quot;controls&quot;&gt; &lt;source src=&quot;music/bg.ogg&quot; type=&quot;audio/ogg&quot;&gt;&lt;/source&gt; &lt;source src=&quot;music/bg.mp3&quot; type=&quot;audio/mpeg&quot;&gt;&lt;/source&gt; ä¼˜å…ˆæ’­æ”¾éŸ³ä¹bg.oggï¼Œä¸æ”¯æŒåœ¨æ’­æ”¾bg.mp3 &lt;/audio&gt; //JSç»‘å®šè‡ªåŠ¨æ’­æ”¾ï¼ˆæ“ä½œwindowæ—¶ï¼Œæ’­æ”¾éŸ³ä¹ï¼‰ $(window).one('touchstart', function(){ music.play(); }) //å¾®ä¿¡ä¸‹å…¼å®¹å¤„ç† document.addEventListener(&quot;WeixinJSBridgeReady&quot;, function () { music.play(); }, false); //å°ç»“ //1.audioå…ƒç´ çš„autoplayå±æ€§åœ¨IOSåŠAndroidä¸Šæ— æ³•ä½¿ç”¨ï¼Œåœ¨PCç«¯æ­£å¸¸ //2.audioå…ƒç´ æ²¡æœ‰è®¾ç½®controlsæ—¶ï¼Œåœ¨IOSåŠAndroidä¼šå æ®ç©ºé—´å¤§å°ï¼Œè€Œåœ¨PCç«¯Chromeæ˜¯ä¸ä¼šå æ®ä»»ä½•ç©ºé—´ ä½œè€…ï¼šæˆ‘æ˜¯å¤§å¸ˆå…„å•Š é“¾æ¥ï¼šhttps://www.jianshu.com/p/220b56eb20e9 ä¾†æºï¼šç®€ä¹¦ ç®€ä¹¦è‘—ä½œæƒå½’ä½œè€…æ‰€æœ‰ï¼Œä»»ä½•å½¢å¼çš„è½¬è½½éƒ½è¯·è”ç³»ä½œè€…è·å¾—æˆæƒå¹¶æ³¨æ˜å‡ºå¤„ã€‚ é‡åŠ›æ„Ÿåº”äº‹ä»¶ // è¿ç”¨HTML5çš„deviceMotionï¼Œè°ƒç”¨é‡åŠ›æ„Ÿåº”äº‹ä»¶ if(window.DeviceMotionEvent){ document.addEventListener('devicemotion', deviceMotionHandler, false) } var speed = 30; var x = y = z = lastX = lastY = lastZ = 0; function deviceMotionHandler(eventData){ var acceleration = event.accelerationIncludingGravity; x = acceleration.x; y = acceleration.y; z = acceleration.z; if(Math.abs(x-lastX)&gt;speed || Math.abs(y-lastY)&gt;speed || Math.abs(z-lastZ)&gt;speed ){ //è¿™é‡Œæ˜¯æ‘‡åŠ¨åè¦æ‰§è¡Œçš„æ–¹æ³• yaoAfter(); } lastX = x; lastY = y; lastZ = z; } function yaoAfter(){ //do something } å¼€å¯ç¡¬ä»¶åŠ é€Ÿ .css { -webkit-transform: translate3d(0,0,0); -moz-transform: translate3d(0,0,0); -ms-transform: translate3d(0,0,0); transform: translate3d(0,0,0); } æ¶ˆé™¤transitioné—ªå± .css { -webkit-transform-style: preserve-3d; -webkit-backface-visibility: hidden; -webkit-perspective: 1000; } æŒç»­æ›´æ–°ä¸­... ","link":"https://xiaoai7904.github.io/post/yi-dong-duan-kai-zhong-yu-dao-de-wen-ti-zheng-li/"},{"title":"jsåŸå‹ç»§æ‰¿äº”æ¡åŸºæœ¬åŸ","content":"jsä¸­çš„åŸå‹ç»§æ‰¿ï¼Œéµå®ˆ5ä¸ªåŸºæœ¬åŸåˆ™ï¼š æ‰€æœ‰çš„æ•°æ®éƒ½æ˜¯å¯¹è±¡ è¦å¾—åˆ°ä¸€ä¸ªå¯¹è±¡ï¼Œä¸æ˜¯é€šè¿‡å®ä¾‹åŒ–ç±»ï¼Œè€Œæ˜¯æ‰¾åˆ°ä¸€ä¸ªå¯¹è±¡ä½œä¸ºåŸå‹å¹¶å…‹éš†å®ƒ å¯¹è±¡ä¼šè®°ä½å®ƒçš„åŸå‹ å¦‚æœå¯¹è±¡æ— æ³•å“åº”æŸä¸ªè¯·æ±‚ï¼Œå®ƒä¼šæŠŠè¿™ä¸ªè¯·æ±‚å§”æ‰˜ç»™å®ƒè‡ªå·±çš„åŸå‹ æ¥ä¸‹æ¥æˆ‘ä»¬å°†è¯¦ç»†è®²è§£è¿™ä¸ª5ä¸ªåŸºæœ¬åŸåˆ™..... æ‰€æœ‰çš„æ•°æ®éƒ½æ˜¯å¯¹è±¡ jsåœ¨è®¾è®¡çš„æ—¶å€™å¼•å…¥äº†javaä¸¤å¥—ç±»å‹æœºåˆ¶ï¼šåŸºæœ¬ç±»å‹å’Œå¼•ç”¨ç±»å‹ åŸºæœ¬ç±»å‹åŒ…æ‹¬ï¼šundefinedã€numberã€booleanã€stringã€functionã€object æˆ‘ä»¬ä¸èƒ½è¯´jsä¸­æ‰€æœ‰çš„æ•°æ®éƒ½æ˜¯å¯¹è±¡ï¼Œä½†æ˜¯å¯ä»¥è¯´ç»å¤§å¤šæ•°çš„æ•°æ®éƒ½æ˜¯å¯¹è±¡ï¼Œé‚£ä¹ˆç›¸ä¿¡åœ¨jsä¸­ä¹Ÿä¸€å®šä¼šå­˜åœ¨ä¸€ä¸ªæ ¹å¯¹è±¡(Object.prototype) åœ¨jsä¸­æ ¹å¯¹è±¡(Object.prototype)æ˜¯ä¸€ä¸ªç©ºçš„å¯¹è±¡ï¼Œæˆ‘ä»¬é‡åˆ°çš„æ¯ä¸€ä¸ªå¯¹è±¡éƒ½æ˜¯ä»Object.prototypeå¯¹è±¡å…‹éš†è€Œæ¥ï¼ŒObject.prototypeå¯¹è±¡å°±æ˜¯å®ƒä»¬çš„åŸå‹ã€‚ var obj_1 = new Object(); var obj_2 = {}; //é€šè¿‡Object.getPrototypeOfæ¥æŸ¥çœ‹å®ƒä»¬çš„åŸå‹ console.log(Object.getPrototypeOf(obj_1) === Object.prototype); // true console.log(Object.getPrototypeOf(obj_2) === Object.prototype); // true è¦å¾—åˆ°ä¸€ä¸ªå¯¹è±¡ï¼Œä¸æ˜¯é€šè¿‡å®ä¾‹åŒ–ç±»ï¼Œè€Œæ˜¯æ‰¾åˆ°ä¸€ä¸ªå¯¹è±¡ä½œä¸ºåŸå‹å¹¶å…‹éš†å®ƒ åœ¨jsä¸­æˆ‘ä»¬å¹¶ä¸éœ€è¦å…³å¿ƒå…‹éš†çš„ç»†èŠ‚ï¼Œå› ä¸ºè¿™äº›æ“ä½œæµè§ˆå™¨å¼•æ“å†…éƒ¨å·²ç»å®ç°äº†ï¼Œæˆ‘ä»¬åªéœ€è¦æ˜¾å¼åœ°è°ƒç”¨var obj = new Object()æˆ–è€…var obj = {}ï¼Œå¼•æ“ä¼šä»Object.prototypeä¸Šå…‹éš†ä¸€ä¸ªå¯¹è±¡å‡ºæ¥ã€‚ æˆ‘ä»¬ä¹Ÿå¯ä»¥é€šè¿‡newæ“ä½œç¬¦æ¥åˆ›å»ºä¸€ä¸ªå¯¹è±¡ function Person(name){ this.name= name; }; Person.prototype.getName = function(){ return this.name; } var r = new Person('anjie'); // é€šè¿‡newæ“ä½œç¬¦å¾—åˆ°ä¸€ä¸ªå¯¹è±¡ console.log(r.name);//anjie console.log(r.getName());//anjie console.log(Object.getPrototypeOf(r) === Person.prototype); // true æˆ‘ä»¬é€šè¿‡newå¾—åˆ°çš„å¯¹è±¡å…·ä½“åšäº†ä»€ä¹ˆï¼Ÿ è¦åˆ›å»º Person çš„æ–°å®ä¾‹ï¼Œå¿…é¡»ä½¿ç”¨ new æ“ä½œç¬¦ã€‚ä»¥è¿™ç§æ–¹å¼è°ƒç”¨æ„é€ å‡½æ•°å®é™…ä¸Šä¼šç»å†ä»¥ä¸‹ 4 ä¸ªæ­¥éª¤ï¼š åˆ›å»ºä¸€ä¸ªæ–°å¯¹è±¡ï¼› å°†æ„é€ å‡½æ•°çš„ä½œç”¨åŸŸèµ‹ç»™æ–°å¯¹è±¡ï¼ˆå› æ­¤ this å°±æŒ‡å‘äº†è¿™ä¸ªæ–°å¯¹è±¡ï¼‰ï¼› æ‰§è¡Œæ„é€ å‡½æ•°ä¸­çš„ä»£ç ï¼ˆä¸ºè¿™ä¸ªæ–°å¯¹è±¡æ·»åŠ å±æ€§ï¼› è¿”å›æ–°å¯¹è±¡ï¼› newæ“ä½œç¬¦å…·ä½“åšäº†3ä»¶äº‹ // åˆ›å»ºç©ºå¯¹è±¡ var r = {}; //å°†è¿™ä¸ªç©ºå¯¹è±¡çš„__proto__æˆå‘˜æŒ‡å‘äº†Personå‡½æ•°å¯¹è±¡prototypeæˆå‘˜å¯¹è±¡ r.__proto__ = Person.prototype //å°†Personå‡½æ•°å¯¹è±¡çš„thisæŒ‡é’ˆæ›¿æ¢æˆrï¼Œç„¶åå†è°ƒç”¨Personå‡½æ•°,ç»™ræ·»åŠ å±æ€§å’Œæ–¹æ³• Person.call(r) æ¨¡ä»¿newæ“ä½œç¬¦ function Person(name){ this.name = name; } Person.prototype.getName = function(){ return this.name; } var simulationNew = function(){ var obj = new Object(); // ä»Objecet.prototypeå…‹éš†ä¸€ä¸ªå¯¹è±¡ var Constructor = [].shift.call(arguments); // è·å–å¤–éƒ¨å‚æ•° obj.__proto__ = Constructor.prototype;//æŒ‡å‘æ­£ç¡®çš„åŸå‹ var newObj = Constructor.apply(obj,arguments); //å€Ÿç”¨å¤–éƒ¨ä¼ å…¥çš„æ„é€ å™¨ç»™objè®¾ç½®å±æ€§ return typeof newObj === 'object' ? newObj : obj; //ç¡®ä¿è¿”å›çš„æ°¸è¿œæ˜¯ä¸€ä¸ªå¯¹è±¡ } var a = simulationNew(Person,'anjie'); console.log(a.name);//anjie console.log(a.getName());//anjie console.log(Object.getPrototypeOf(a) === Person.prototype); // true å¯¹è±¡ä¼šè®°ä½å®ƒçš„åŸå‹ jsç»™å¯¹è±¡æä¾›äº†ä¸€ä¸ªåä¸º__proto__çš„éšè—å±æ€§ï¼ŒæŸä¸ªå¯¹è±¡çš„__proto__å±æ€§é»˜è®¤ä¼šæŒ‡å‘å®ƒçš„æ„é€ å™¨çš„åŸå‹å¯¹è±¡ï¼Œå³{Constructor.prototype},åœ¨ä¸€äº›æµè§ˆå™¨ä¸­ï¼Œ__proto__è¢«å…¬å¼€å‡ºæ¥äº†(Chrome/Firefox) var a = new Object(); console.log(a.__proto__ === Object.prototype); //true __proto__å°±æ˜¯å¯¹è±¡è·Ÿå¯¹è±¡æ„é€ å™¨çš„åŸå‹è”ç³»èµ·æ¥çš„æ¡¥æ¢ï¼Œæ­£å› ä¸ºå¯¹è±¡é€šè¿‡__proto__æ¥è®°ä½çš„æ„é€ å™¨çš„åŸå‹ï¼Œæˆ‘ä»¬ä¸Šé¢æ¨¡æ‹Ÿnewæ“ä½œç¬¦éœ€è¦æ‰‹åŠ¨çš„ç»™objå¯¹è±¡è®¾ç½®æ­£ç¡®çš„__proto__æŒ‡å‘ å¦‚æœå¯¹è±¡æ— æ³•å“åº”æŸä¸ªè¯·æ±‚ï¼Œå®ƒä¼šæŠŠè¿™ä¸ªè¯·æ±‚å§”æ‰˜ç»™å®ƒè‡ªå·±çš„åŸå‹ åœ¨jsä¸­ï¼Œæ¯ä¸ªå¯¹è±¡éƒ½æ˜¯é€šè¿‡Object.prototypeå…‹éš†å‡ºæ¥çš„ï¼Œå¦‚æœæ˜¯è¿™æ ·çš„è¯æˆ‘ä»¬åªèƒ½å¾—åˆ°å•ä¸€çš„ç»§æ‰¿å…³ç³»ï¼Œå³æ¯ä¸ªå¯¹è±¡éƒ½æ˜¯ç»§æ‰¿è‡ªObject.prototypeå¯¹è±¡ï¼Œè¿™æ ·çš„å¯¹è±¡æ˜¾ç„¶æ˜¯éå¸¸å—é™çš„ã€‚ jså¯¹è±¡æœ€åˆéƒ½æ˜¯ç”±Object.prototypeå…‹éš†è€Œæ¥ï¼Œä½†æ˜¯å¯¹è±¡æ„é€ å™¨çš„åŸå‹å¹¶ä¸ä»…é™äºObject.prototypeä¸Šï¼Œè€Œæ˜¯å¯ä»¥åŠ¨æ€æŒ‡å‘å…¶ä»–å¯¹è±¡ï¼Œè¿™æ ·ä¸€æ¥ï¼Œä½†å¯¹è±¡aéœ€è¦å€Ÿç”¨bå¯¹è±¡çš„èƒ½åŠ›æ—¶ï¼Œå¯ä»¥é€‰æ‹©æ€§çš„æŠŠå¯¹è±¡açš„åŸå‹æŒ‡å‘å¯¹è±¡bï¼Œä»è€Œè¾¾åˆ°ç»§æ‰¿çš„æ•ˆæœã€‚ ä¸‹é¢çš„ä»£ç æ˜¯æˆ‘ä»¬å¸¸ç”¨çš„åŸå‹ç»§æ‰¿æ–¹å¼ï¼š var obj = {name:'anjie'}; var A = function(){} A.prototype = obj; var a = new A(); console.log(a.name);//anjie ä¸Šé¢çš„ä»£ç å¼•æ“å†…éƒ¨åšäº†ä»€ä¹ˆï¼Ÿ éå†å¯¹è±¡aä¸­çš„æ‰€æœ‰å±æ€§ï¼Œä½†æ˜¯æ²¡æœ‰nameè¿™ä¸ªå±æ€§ æŸ¥æ‰¾nameå±æ€§çš„è¿™ä¸ªè¯·æ±‚å§”æ‰˜å¯¹è±¡açš„æ„é€ å™¨çš„åŸå‹ï¼Œå®ƒè¢«a.__proto__è®°å½•ç€å¹¶ä¸”æŒ‡å‘A.prototype,è€ŒA.prototypeè¢«è®¾ç½®ä¸ºå¯¹è±¡obj åœ¨å¯¹è±¡objä¸­æ‰¾åˆ°nameå±æ€§ï¼Œå¹¶è¿”å›å®ƒçš„å€¼ å½“æˆ‘ä»¬æœŸæœ›å¾—åˆ°ä¸€ä¸ªç±»ç»§æ‰¿è‡ªå¦ä¸€ä¸ªç±»æ—¶æˆ‘ä»¬é€šå¸¸ä¼šä½¿ç”¨ä¸‹é¢è¿™æ®µä»£ç ï¼š var A = function(){}; A.prototype = { name:'anjie' } var B = function(){} B.prototype = new A(); var b = new B(); console.log(b.name);//anjie ä¸Šé¢çš„ä»£ç å¼•æ“å†…éƒ¨åšäº†ä»€ä¹ˆï¼Ÿ éå†å¯¹è±¡aä¸­çš„æ‰€æœ‰å±æ€§ï¼Œä½†æ˜¯æ²¡æœ‰nameè¿™ä¸ªå±æ€§ æŸ¥æ‰¾nameå±æ€§çš„è¿™ä¸ªè¯·æ±‚å§”æ‰˜å¯¹è±¡bçš„æ„é€ å™¨çš„åŸå‹ï¼Œå®ƒè¢«b.__proto__è®°å½•ç€å¹¶ä¸”æŒ‡å‘B.prototype,è€ŒB.prototypeè¢«è®¾ç½®ä¸ºé€šè¿‡new A()åˆ›å»ºå‡ºæ¥çš„å¯¹è±¡ åœ¨è¯¥å¯¹è±¡ä¸­ä¾ç„¶æ²¡æœ‰æ‰¾åˆ°nameå±æ€§ï¼Œäºæ˜¯è¯·æ±‚å°†ç»§ç»­å§”æ‰˜ç»™è¿™ä¸ªå¯¹è±¡æ„é€ å™¨çš„åŸå‹A.prototype åœ¨A.prototypeä¸­æ‰¾åˆ°nameå±æ€§ï¼Œå¹¶è¿”å›å®ƒçš„å€¼ å¦‚æœA.prototypeä¸­è¿˜æ²¡æœ‰çŸ¥é“nameå±æ€§ï¼Œè¯·æ±‚ä¼šè¢«ä¼ é€’ç»™A.prototypeçš„åŸå‹Object.prototypeï¼Œå¦‚æœæ²¡æœ‰nameå±æ€§ï¼Œä¼šç»§ç»­ä¼ é€’ç»™Object.prototypeçš„åŸå‹ï¼ŒObject.prototypeçš„åŸå‹æ˜¯null,æ‰€ä»¥ä¼šè¿”å›undefined ES6çš„ä¸­å¸¦æ¥äº†æ–°çš„Classè¯­æ³•ï¼Œè®©jsçœ‹èµ·æ¥æ›´åŠ æƒ³ä¸€é—¨åŸºäºç±»çš„è¯­è¨€ï¼Œå…¶å®èƒŒåè¿˜æ˜¯é€šè¿‡åŸå‹æœºåˆ¶æ¥å®ç°çš„ã€‚ Class Person{ constructor(name){ this.name = name; }, getName(){ return this.name } } Class manPerson extends Person { constructor(name){ super(name); } } var a = new manPerson('anjie'); console.log(a.getName());//anjie æ€»ç»“å°±å†™åˆ°è¿™é‡Œäº†ï¼Œæœ¬æ–‡ç®€å•ä»‹ç»äº†jsä¸­åŸå‹ç»§æ‰¿çš„æœºåˆ¶ï¼Œå¸Œæœ›é€šè¿‡å­¦ä¹ çš„æˆ‘ä»¬çš„å­¦ä¹ æ€»ç»“ç¬”è®°è®©å¤§å®¶ä¹Ÿæœ‰æ”¶è·ï¼Œå¦‚æœæœ‰ä»€ä¹ˆä¸å¯¹çš„åœ°æ–¹ï¼Œæœ›å¤§å®¶æŒ‡ç‚¹å‡ºæ¥ï¼Œæˆ‘ä»¬å…±åŒå­¦ä¹ ã€‚ ","link":"https://xiaoai7904.github.io/post/js-yuan-xing-ji-cheng-wu-tiao-ji-ben-yuan/"},{"title":"jsè®¾è®¡æ¨¡å¼-å•ä¾‹æ¨¡å¼","content":"å•ä¾‹æ¨¡å¼æ˜¯ä¸€ç§å¸¸è§çš„æ¨¡å¼ï¼Œæœ‰ä¸€äº›å¯¹è±¡æˆ‘ä»¬å¾€å¾€åªéœ€è¦ä¸€ä¸ªï¼Œæ¯”å¦‚çº¿ç¨‹æ± ã€å…¨å±€ç¼“å­˜ã€æµè§ˆå™¨ä¸­çš„windowå¯¹è±¡ç­‰ã€‚åœ¨jså¼€å‘ä¸­ï¼Œå•ä¾‹æ¨¡å¼çš„ç”¨é€”åŒæ ·éå¸¸å¹¿æ³›...... å•ä¾‹æ¨¡å¼çš„å®šä¹‰ å®šä¹‰ï¼šä¿è¯ä¸€ä¸ªç±»ä»…æœ‰ä¸€ä¸ªå®ä¾‹ï¼Œå¹¶æä¾›ä¸€ä¸ªè®¿é—®å®ƒçš„å…¨å±€è®¿é—®ç‚¹ã€‚ å®ç°å•ä¾‹æ¨¡å¼ åŸç†ï¼šç”¨ä¸€ä¸ªå˜é‡æ¥ä¿å­˜å½“å‰æ˜¯å¦å·²ç»ä¸ºæŸä¸ªç±»åˆ›å»ºå¯¹è±¡ï¼Œå¦‚æœåˆ›å»ºäº†å°±ç›´æ¥è¿”å›è¯¥å¯¹è±¡ï¼Œåä¹‹å°±é‡æ–°å®ä¾‹åŒ– var Fn = function(name){ this.name = name; } Fn.prototype.getName = function(){ console.log(this.name); } Fn.getInstance = (function(){ var instance = null; return function(name){ if(!instance){ instance = new Fn(name); } return instance; } })(); var a = Fn.getInstance('xxx'); var b = Fn.getInstance('ooo'); console.log(a === b);//true é€æ˜çš„å•ä¾‹æ¨¡å¼ æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªCreateDivå•ä¾‹ç±»æ¥è´Ÿè´£åœ¨é¡µé¢ä¸­åˆ›å»ºå”¯ä¸€çš„divèŠ‚ç‚¹ï¼Œå®ç°ä¸€ä¸ª**â€˜é€æ˜â€™**çš„å•ä¾‹ç±»ï¼Œç”¨æˆ·ä»è¿™ä¸ªç±»ä¸­åˆ›å»ºå¯¹è±¡çš„æ—¶å€™ï¼Œå¯ä»¥åƒä½¿ç”¨ä»»ä½•æ™®é€šç±»ä¸€æ ·ã€‚ var CreateDiv = (function(){ var instance; var CreateDiv = function(html){ if(instance){ return instance; } this.html= html; this.init(); return instance = this; }; CreateDiv.prototype.init = function(){ var div = $('&lt;div&gt;&lt;/div&gt;'); div.html(this.html); $(body).append(div); } return CreateDiv; })() var a = new CreateDiv('one'); var b = new CreateDiv('two'); console.log(a === b); //true ä¸Šé¢çš„ä»£ç å®ç°äº†**é€æ˜**å•ä¾‹ï¼Œä½†æ˜¯ä¹Ÿæœ‰å®ƒçš„ç¼ºç‚¹ï¼Œä¸Šé¢æˆ‘ä»¬ä½¿ç”¨äº†è‡ªæ‰§è¡Œå‡½æ•°å’Œé—­åŒ…ï¼Œå¹¶ä¸”è®©è¿™ä¸ªåŒ¿åå‡½æ•°è¿”å›çœŸæ­£çš„æ„é€ å‡½æ•°ï¼Œè¿™æ ·å¢åŠ äº†ä¸€äº›ç¨‹åºçš„å¤æ‚åº¦ã€‚ å¦‚æœæŸå¤©æˆ‘ä»¬éœ€è¦åˆ©ç”¨è¿™ä¸ªç±»ï¼Œåœ¨é¡µé¢ä¸Šåˆ›å»ºå¾ˆå¤šä¸ªdivï¼Œæ—¢è¦è®©è¿™ä¸ªå•ä¾‹ç±»å˜æˆä¸€ä¸ªæ™®é€šçš„å¯ä»¥äº§ç”Ÿå¤šä¸ªå®ä¾‹ï¼Œé‚£æˆ‘ä»¬å°±éœ€è¦ä¿®æ”¹CreateDivæ„é€ å‡½æ•°ï¼ŒæŠŠæ§åˆ¶åˆ›å»ºå”¯ä¸€å¯¹è±¡çš„é‚£æ®µä»£ç åˆ é™¤æ‰ï¼Œè¿™æ ·å°±ä¼šåˆšç»™æˆ‘å¸¦æ¥ä¸€äº›ä¸å¿…è¦çš„éº»çƒ¦ï¼Œæ‰€æœ‰æˆ‘ä»¬åˆ©ç”¨å¦å¤–ä¸€ç§æ–¹å¼å»å®ç°ï¼Œè¿™ç§æ–¹å¼å«ç€**ä»£ç†æ¨¡å¼**,åé¢çš„ç¬”è®°ä¸­æˆ‘ä¼šè¯¦ç»†ä»‹ç»**ä»£ç†æ¨¡å¼**çš„å…·ä½“å®ä¹ æ–¹å¼ åˆ©ç”¨ä»£ç†æ¨¡å¼å®ç°å•ä¾‹æ¨¡å¼ æˆ‘ä»¬æŠŠä¸Šé¢çš„é€æ˜å•ä¾‹ä»£ç ä¸­é—´åˆ›å»ºdivéƒ¨åˆ†ä»£ç ç§»é™¤å‡ºå»ï¼Œä½¿ä»–æˆä¸ºä¸€ä¸ªæ™®é€šçš„åˆ›å»ºDIVç±» //åˆ›å»ºdivç±» var CreateDiv = function(html){ this.html = html; this.init(); } CreateDiv.prototype = function(){ var div = $('&lt;div&gt;&lt;/div&gt;'); div.html(this.html); $('body').append(div); } //ä»£ç†ç±» var ProxySingleton = (function(){ var instance; return function(){ if(!instance){ instance = new CreateDiv(html); } return instance; } })() //æµ‹è¯• var a = new ProxySingleton('one'); var b = new ProxySingleton('two'); console.log(a === b );//true é€šè¿‡å¼•å…¥ä»£ç†ç±»çš„æ–¹å¼ï¼Œæˆ‘ä»¬ä¹Ÿå®ç°äº†å•ä¾‹æ¨¡å¼ï¼Œæˆ‘ä»¬æŠŠè´Ÿè´£ç®¡ç†å•ä¾‹çš„é€»è¾‘ç§»åˆ°ä»£ç†ç±»**ProxySingleton**ä¸­ï¼Œ**CreateDiv**å°±å˜æˆä¸€ä¸ªæ™®é€šç±»ï¼Œå®ƒæ›´**ProxySingleton**ç»„åˆèµ·æ¥å°±å¯ä»¥å®ç°å•ä¾‹æ¨¡å¼çš„æ•ˆæœï¼Œè¿™æ ·çš„ä»£ç ä¼šæ›´å«å¥½ç»´æŠ¤ã€‚ JavaScriptä¸­çš„å•ä¾‹æ¨¡å¼ ä¸Šé¢æåˆ°çš„åˆ›å»ºå•ä¾‹æ¨¡å¼ï¼Œæ›´å¤šçš„æ˜¯æ¥è¿‘é¢å‘å¯¹è±¡è¯­è¨€ä¸­çš„å®ç°ï¼Œå•ä¾‹å¯¹è±¡ä»**â€˜ç±»â€™**åˆ›å»ºè€Œæ¥ï¼Œåœ¨ç±»ä¸ºä¸­å¿ƒå¾—è¯­è¨€ä¸­ï¼Œè¿™æ˜¯å¾ˆè‡ªç„¶çš„åšæ³•ã€‚ åœ¨JavaScriptä¸­ï¼Œå…¶å®æ˜¯ä¸€é—¨æ— ç±»è¯­è¨€ï¼Œæ²¡æœ‰ç±»è¿™ä¸ªæ¦‚å¿µï¼Œåœ¨JSä¸­åˆ›å»ºå•ä¾‹æ¨¡å¼æ–¹æ³•å¾ˆç®€å•ï¼Œæˆ‘ä»¬åªéœ€è¦åˆ›å»ºä¸€ä¸ªå”¯ä¸€çš„ç±»ã€‚ å…¨å±€å˜é‡ä¸æ˜¯å•ä¾‹æ¨¡å¼ï¼Œä½†æ˜¯åœ¨jså¼€å‘ä¸­ï¼Œæˆ‘ä»¬ç»å¸¸æŠŠå…¨å±€å˜é‡å½“æˆå•ä¾‹æ¨¡å¼æ¥ä½¿ç”¨ æˆ‘ä»¬åœ¨jså¼€å‘ä¸­æœ‰å¿…è¦å‡å°‘å…¨å±€å˜é‡çš„ä½¿ç”¨ï¼Œå¦‚æœä½¿ç”¨äº†ä¹Ÿè¦æŠŠå®ƒçš„æ±¡æŸ“é™åˆ°æœ€ä½ï¼Œä»¥ä¸‹ä¸¤ç§æ–¹å¼å°±æ˜¯é™ä½å…¨å±€å˜é‡å¸¦æ¥çš„å‘½åæ±¡æŸ“ ä½¿ç”¨å‘½åç©ºé—´ ä½¿ç”¨å¯¹è±¡å­—é¢é‡çš„æ–¹å¼æ¥åˆ›å»ºï¼š var name = { a:function(){ console.log('1'); }, b:function(){ console.log('2'); } }; ä½¿ç”¨åŠ¨æ€åˆ›å»ºå‘½åç©ºé—´ var My = {}; My.name = function(name){ var parts = name.split('.'); var current = My; for(var i in parts){ if(!current[parts[i]]){ current[parts[i]] = {}; } current = current[parts[i]]; } } My.name = ('init'); My.name = ('dom.style'); //ä¸Šé¢åˆ›å»ºç»“æœç­‰ä»·äºï¼š var My = { init:{}, dom:{ style:{} } }; ä½¿ç”¨é—­åŒ…å°è£…ç§æœ‰å˜é‡ var user = (function(){ var __name = 'anjie', __age = 25, return { getUserInfo:function(){ return __name + '-' + __age; } } })(); æˆ‘ä»¬ä½¿ç”¨ä¸‹åˆ’çº¿æ¥çº¦å®šç§æœ‰å˜é‡__nameå’Œ__age,ä»–ä»¬è¢«å°è£…åœ¨é—­åŒ…äº§ç”Ÿçš„ä½œç”¨åŸŸä¸­ï¼Œå¤–éƒ¨æ˜¯è®¿é—®ä¸åˆ°è¿™ä¸¤ä¸ªå˜é‡çš„ï¼Œè¿™æ ·å°±é¿å…äº†å¯¹å…¨å±€çš„å‘½ä»¤æ±¡æŸ“ã€‚ é€šç”¨å•ä¾‹æ¨¡å¼ var getSingle = function(fn){ var result; return function(){ return result || (result = fn.apply(this,arguments)); } } //å®ä¾‹ var createDiv = function(){ var div = $('&lt;div&gt;&lt;/div&gt;'); div.html('è¿™ä¸ªæ˜¯æµ‹è¯•div'); div.css('display','none'); $('body').append(div); return div; } var createSingleLoginLayer = getSingle(createDiv); $('loginBtn').on('click',function(){ var loginLayer = createSingleLoginLayer(); loginLayer.css('display','block'); }) ä¸Šé¢ä»£ç æ˜¯ä¸€ä¸ªé€šç”¨çš„å•ä¾‹æ¨¡å¼ï¼Œæˆ‘ä»¬åœ¨æ—¥å¸¸å¼€å‘ä¸­å¯ä»¥ç›´æ¥åˆ©ç”¨è¿™æ®µä»£ç æ¥å®ç°å•ä¾‹æ¨¡å¼ã€‚ ä»¥ä¸Šä»£ç å€Ÿé‰´äºã€ŠJavaScriptè®¾è®¡æ¨¡å¼ä¸å¼€å‘å®è·µã€‹ -- æ›¾æ¢,è¿™æœ¬ä¹¦å¯¹è®¾è®¡æ¨¡å¼è¿›è¡Œçš„è¯¦ç»†çš„ä»‹ç»ï¼Œæ¨èå¤§å®¶å­¦ä¹  ","link":"https://xiaoai7904.github.io/post/js-she-ji-mo-shi-dan-li-mo-shi/"},{"title":"TypeScriptå…¥é—¨æ•™ç¨‹(åå››) - è£…é¥°å™¨","content":"éšç€TypeScriptå’ŒES6é‡Œå¼•å…¥äº†ç±»ï¼Œåœ¨ä¸€äº›åœºæ™¯ä¸‹æˆ‘ä»¬éœ€è¦é¢å¤–çš„ç‰¹æ€§æ¥æ”¯æŒæ ‡æ³¨æˆ–ä¿®æ”¹ç±»åŠå…¶æˆå‘˜ã€‚ è£…é¥°å™¨ï¼ˆDecoratorsï¼‰ä¸ºæˆ‘ä»¬åœ¨ç±»çš„å£°æ˜åŠæˆå‘˜ä¸Šé€šè¿‡å…ƒç¼–ç¨‹è¯­æ³•æ·»åŠ æ ‡æ³¨æä¾›äº†ä¸€ç§æ–¹å¼ã€‚ Javascripté‡Œçš„è£…é¥°å™¨ç›®å‰å¤„åœ¨å»ºè®®å¾é›†çš„ç¬¬äºŒé˜¶æ®µï¼Œä½†åœ¨TypeScripté‡Œå·²åšä¸ºä¸€é¡¹å®éªŒæ€§ç‰¹æ€§äºˆä»¥æ”¯æŒ ä»‹ç» è‹¥è¦å¯ç”¨å®éªŒæ€§çš„è£…é¥°å™¨ç‰¹æ€§ï¼Œä½ å¿…é¡»åœ¨å‘½ä»¤è¡Œæˆ–tsconfig.jsoné‡Œå¯ç”¨experimentalDecoratorsç¼–è¯‘å™¨é€‰é¡¹ å‘½ä»¤è¡Œ: tsc --target ES5 --experimentalDecorators tsconfig.json: { &quot;compilerOptions&quot;: { &quot;target&quot;: &quot;ES5&quot;, &quot;experimentalDecorators&quot;: true } } è£…é¥°å™¨ è£…é¥°å™¨æ˜¯ä¸€ç§ç‰¹æ®Šç±»å‹çš„å£°æ˜ï¼Œå®ƒèƒ½å¤Ÿè¢«é™„åŠ åˆ°ç±»å£°æ˜ï¼Œæ–¹æ³•ï¼Œ è®¿é—®ç¬¦ï¼Œå±æ€§æˆ–å‚æ•°ä¸Šã€‚ è£…é¥°å™¨ä½¿ç”¨@expressionè¿™ç§å½¢å¼ï¼Œexpressionæ±‚å€¼åå¿…é¡»ä¸ºä¸€ä¸ªå‡½æ•°ï¼Œå®ƒä¼šåœ¨è¿è¡Œæ—¶è¢«è°ƒç”¨ï¼Œè¢«è£…é¥°çš„å£°æ˜ä¿¡æ¯åšä¸ºå‚æ•°ä¼ å…¥ æ–¹æ³•è£…é¥°å™¨ æ–¹æ³•è£…é¥°å™¨å£°æ˜åœ¨ä¸€ä¸ªæ–¹æ³•çš„å£°æ˜ä¹‹å‰ï¼ˆç´§é ç€æ–¹æ³•å£°æ˜ï¼‰ã€‚ å®ƒä¼šè¢«åº”ç”¨åˆ°æ–¹æ³•çš„ å±æ€§æè¿°ç¬¦ä¸Šï¼Œå¯ä»¥ç”¨æ¥ç›‘è§†ï¼Œä¿®æ”¹æˆ–è€…æ›¿æ¢æ–¹æ³•å®šä¹‰ã€‚ æ–¹æ³•è£…é¥°å™¨ä¸èƒ½ç”¨åœ¨å£°æ˜æ–‡ä»¶(Â· .d.ts)ï¼Œé‡è½½æˆ–è€…ä»»ä½•å¤–éƒ¨ä¸Šä¸‹æ–‡ï¼ˆæ¯”å¦‚declareçš„ç±»ï¼‰ä¸­ æ–¹æ³•è£…é¥°å™¨è¡¨è¾¾å¼ä¼šåœ¨è¿è¡Œæ—¶å½“ä½œå‡½æ•°è¢«è°ƒç”¨ï¼Œä¼ å…¥ä¸‹åˆ—3ä¸ªå‚æ•° å¯¹äºé™æ€æˆå‘˜æ¥è¯´æ˜¯ç±»çš„æ„é€ å‡½æ•°ï¼Œå¯¹äºå®ä¾‹æˆå‘˜æ˜¯ç±»çš„åŸå‹å¯¹è±¡ æˆå‘˜çš„åå­— æˆå‘˜çš„å±æ€§æè¿°ç¬¦ class Greeter { greeting: string; constructor(message: string) { this.greeting = message; } @enumerable(false) greet() { return &quot;Hello, &quot; + this.greeting; } } function enumerable(value: boolean) { return function (target: any, propertyKey: string, descriptor: PropertyDescriptor) { descriptor.enumerable = value; }; } è®¿é—®å™¨è£…é¥°å™¨ è®¿é—®å™¨è£…é¥°å™¨å£°æ˜åœ¨ä¸€ä¸ªè®¿é—®å™¨çš„å£°æ˜ä¹‹å‰ï¼ˆç´§é ç€è®¿é—®å™¨å£°æ˜ï¼‰ã€‚ è®¿é—®å™¨è£…é¥°å™¨åº”ç”¨äºè®¿é—®å™¨çš„ å±æ€§æè¿°ç¬¦å¹¶ä¸”å¯ä»¥ç”¨æ¥ç›‘è§†ï¼Œä¿®æ”¹æˆ–æ›¿æ¢ä¸€ä¸ªè®¿é—®å™¨çš„å®šä¹‰ã€‚ è®¿é—®å™¨è£…é¥°å™¨ä¸èƒ½ç”¨åœ¨å£°æ˜æ–‡ä»¶ä¸­ï¼ˆ.d.tsï¼‰ï¼Œæˆ–è€…ä»»ä½•å¤–éƒ¨ä¸Šä¸‹æ–‡ï¼ˆæ¯”å¦‚declareçš„ç±»ï¼‰é‡Œ TypeScriptä¸å…è®¸åŒæ—¶è£…é¥°ä¸€ä¸ªæˆå‘˜çš„getå’Œsetè®¿é—®å™¨ã€‚å–è€Œä»£ä¹‹çš„æ˜¯ï¼Œä¸€ä¸ªæˆå‘˜çš„æ‰€æœ‰è£…é¥°çš„å¿…é¡»åº”ç”¨åœ¨æ–‡æ¡£é¡ºåºçš„ç¬¬ä¸€ä¸ªè®¿é—®å™¨ä¸Šã€‚è¿™æ˜¯å› ä¸ºï¼Œåœ¨è£…é¥°å™¨åº”ç”¨äºä¸€ä¸ªå±æ€§æè¿°ç¬¦æ—¶ï¼Œå®ƒè”åˆäº†getå’Œsetè®¿é—®å™¨ï¼Œè€Œä¸æ˜¯åˆ†å¼€å£°æ˜çš„ è®¿é—®å™¨è£…é¥°å™¨è¡¨è¾¾å¼ä¼šåœ¨è¿è¡Œæ—¶å½“ä½œå‡½æ•°è¢«è°ƒç”¨ï¼Œä¼ å…¥ä¸‹åˆ—3ä¸ªå‚æ•°ï¼š å¯¹äºé™æ€æˆå‘˜æ¥è¯´æ˜¯ç±»çš„æ„é€ å‡½æ•°ï¼Œå¯¹äºå®ä¾‹æˆå‘˜æ˜¯ç±»çš„åŸå‹å¯¹è±¡ æˆå‘˜çš„åå­— æˆå‘˜çš„å±æ€§æè¿°ç¬¦ class Point { private _x: number; private _y: number; constructor(x: number, y: number) { this._x = x; this._y = y; } @configurable(false) get x() { return this._x; } @configurable(false) get y() { return this._y; } } function configurable(value: boolean) { return function (target: any, propertyKey: string, descriptor: PropertyDescriptor) { descriptor.configurable = value; }; } å±æ€§è£…é¥°å™¨ å±æ€§è£…é¥°å™¨å£°æ˜åœ¨ä¸€ä¸ªå±æ€§å£°æ˜ä¹‹å‰ï¼ˆç´§é ç€å±æ€§å£°æ˜ï¼‰ã€‚ å±æ€§è£…é¥°å™¨ä¸èƒ½ç”¨åœ¨å£°æ˜æ–‡ä»¶ä¸­ï¼ˆ.d.tsï¼‰ï¼Œæˆ–è€…ä»»ä½•å¤–éƒ¨ä¸Šä¸‹æ–‡ï¼ˆæ¯”å¦‚declareçš„ç±»ï¼‰é‡Œ å±æ€§è£…é¥°å™¨è¡¨è¾¾å¼ä¼šåœ¨è¿è¡Œæ—¶å½“ä½œå‡½æ•°è¢«è°ƒç”¨ï¼Œä¼ å…¥ä¸‹åˆ—2ä¸ªå‚æ•°ï¼š å¯¹äºé™æ€æˆå‘˜æ¥è¯´æ˜¯ç±»çš„æ„é€ å‡½æ•°ï¼Œå¯¹äºå®ä¾‹æˆå‘˜æ˜¯ç±»çš„åŸå‹å¯¹è±¡ æˆå‘˜çš„åå­— class Greeter { @format(&quot;Hello, %s&quot;) greeting: string; constructor(message: string) { this.greeting = message; } greet() { let formatString = getFormat(this, &quot;greeting&quot;); return formatString.replace(&quot;%s&quot;, this.greeting); } } import &quot;reflect-metadata&quot;; const formatMetadataKey = Symbol(&quot;format&quot;); function format(formatString: string) { return Reflect.metadata(formatMetadataKey, formatString); } function getFormat(target: any, propertyKey: string) { return Reflect.getMetadata(formatMetadataKey, target, propertyKey); } è¿™ä¸ª@format(&quot;Hello, %s&quot;)è£…é¥°å™¨æ˜¯ä¸ªè£…é¥°å™¨å·¥å‚ã€‚ å½“@format(&quot;Hello, %s&quot;)è¢«è°ƒç”¨æ—¶ï¼Œå®ƒæ·»åŠ ä¸€æ¡è¿™ä¸ªå±æ€§çš„å…ƒæ•°æ®ï¼Œé€šè¿‡reflect-metadataåº“é‡Œçš„Reflect.metadataå‡½æ•°ã€‚ å½“ getFormatè¢«è°ƒç”¨æ—¶ï¼Œå®ƒè¯»å–æ ¼å¼çš„å…ƒæ•°æ® è¿™ä¸ªä¾‹å­éœ€è¦ä½¿ç”¨reflect-metadataåº“ã€‚ æŸ¥çœ‹ å…ƒæ•°æ®äº†è§£reflect-metadataåº“æ›´è¯¦ç»†çš„ä¿¡æ¯ã€‚ å‚æ•°è£…é¥°å™¨ å‚æ•°è£…é¥°å™¨å£°æ˜åœ¨ä¸€ä¸ªå‚æ•°å£°æ˜ä¹‹å‰ï¼ˆç´§é ç€å‚æ•°å£°æ˜ï¼‰ã€‚ å‚æ•°è£…é¥°å™¨åº”ç”¨äºç±»æ„é€ å‡½æ•°æˆ–æ–¹æ³•å£°æ˜ã€‚ å‚æ•°è£…é¥°å™¨ä¸èƒ½ç”¨åœ¨å£°æ˜æ–‡ä»¶ï¼ˆ.d.tsï¼‰ï¼Œé‡è½½æˆ–å…¶å®ƒå¤–éƒ¨ä¸Šä¸‹æ–‡ï¼ˆæ¯”å¦‚declareçš„ç±»ï¼‰é‡Œ å‚æ•°è£…é¥°å™¨è¡¨è¾¾å¼ä¼šåœ¨è¿è¡Œæ—¶å½“ä½œå‡½æ•°è¢«è°ƒç”¨ï¼Œä¼ å…¥ä¸‹åˆ—3ä¸ªå‚æ•°ï¼š å¯¹äºé™æ€æˆå‘˜æ¥è¯´æ˜¯ç±»çš„æ„é€ å‡½æ•°ï¼Œå¯¹äºå®ä¾‹æˆå‘˜æ˜¯ç±»çš„åŸå‹å¯¹è±¡ æˆå‘˜çš„åå­— å‚æ•°åœ¨å‡½æ•°å‚æ•°åˆ—è¡¨ä¸­çš„ç´¢å¼• class Greeter { greeting: string; constructor(message: string) { this.greeting = message; } @validate greet(@required name: string) { return &quot;Hello &quot; + name + &quot;, &quot; + this.greeting; } } import &quot;reflect-metadata&quot;; const requiredMetadataKey = Symbol(&quot;required&quot;); function required(target: Object, propertyKey: string | symbol, parameterIndex: number) { let existingRequiredParameters: number[] = Reflect.getOwnMetadata(requiredMetadataKey, target, propertyKey) || []; existingRequiredParameters.push(parameterIndex); Reflect.defineMetadata(requiredMetadataKey, existingRequiredParameters, target, propertyKey); } function validate(target: any, propertyName: string, descriptor: TypedPropertyDescriptor&lt;Function&gt;) { let method = descriptor.value; descriptor.value = function () { let requiredParameters: number[] = Reflect.getOwnMetadata(requiredMetadataKey, target, propertyName); if (requiredParameters) { for (let parameterIndex of requiredParameters) { if (parameterIndex &gt;= arguments.length || arguments[parameterIndex] === undefined) { throw new Error(&quot;Missing required argument.&quot;); } } } return method.apply(this, arguments); } } @requiredè£…é¥°å™¨æ·»åŠ äº†å…ƒæ•°æ®å®ä½“æŠŠå‚æ•°æ ‡è®°ä¸ºå¿…éœ€çš„ã€‚ @validateè£…é¥°å™¨æŠŠgreetæ–¹æ³•åŒ…è£¹åœ¨ä¸€ä¸ªå‡½æ•°é‡Œåœ¨è°ƒç”¨åŸå…ˆçš„å‡½æ•°å‰éªŒè¯å‡½æ•°å‚æ•° ä¸Šé¢æˆ‘ä»¬ä»‹ç»äº†TypeScriptçš„è£…é¥°å™¨ï¼Œåˆ°æ­¤Typescriptå…¥é—¨æ•™ç¨‹å®Œç»“ æ–‡ç« å‚è€ƒTypeScriptä¸­æ–‡ç½‘ ","link":"https://xiaoai7904.github.io/post/typescript-ru-men-jiao-cheng-shi-si-zhuang-shi-qi/"},{"title":"TypeScriptå…¥é—¨æ•™ç¨‹(åä¸‰) - å‘½åç©ºé—´","content":"æè¿°äº†å¦‚ä½•åœ¨TypeScripté‡Œä½¿ç”¨å‘½åç©ºé—´ï¼ˆä¹‹å‰å«åšâ€œå†…éƒ¨æ¨¡å—â€ï¼‰æ¥ç»„ç»‡ä½ çš„ä»£ç ã€‚ä»»ä½•ä½¿ç”¨moduleå…³é”®å­—æ¥å£°æ˜ä¸€ä¸ªå†…éƒ¨æ¨¡å—çš„åœ°æ–¹éƒ½åº”è¯¥ä½¿ç”¨namespaceå…³é”®å­—æ¥æ›¿æ¢ å‘½åç©ºé—´ ä½¿ç”¨å‘½åç©ºé—´ä¸ç”¨æ‹…å¿ƒä¸å…¶å®ƒå¯¹è±¡äº§ç”Ÿå‘½åå†²çª namespace Validation { export interface StringValidator { isAcceptable(s: string): boolean; } const lettersRegexp = /^[A-Za-z]+$/; const numberRegexp = /^[0-9]+$/; export class LettersOnlyValidator implements StringValidator { isAcceptable(s: string) { return lettersRegexp.test(s); } } export class ZipCodeValidator implements StringValidator { isAcceptable(s: string) { return s.length === 5 &amp;&amp; numberRegexp.test(s); } } } // Some samples to try let strings = [&quot;Hello&quot;, &quot;98052&quot;, &quot;101&quot;]; // Validators to use let validators: { [s: string]: Validation.StringValidator; } = {}; validators[&quot;ZIP code&quot;] = new Validation.ZipCodeValidator(); validators[&quot;Letters only&quot;] = new Validation.LettersOnlyValidator(); // Show whether each string passed each validator for (let s of strings) { for (let name in validators) { console.log(`&quot;${ s }&quot; - ${ validators[name].isAcceptable(s) ? &quot;matches&quot; : &quot;does not match&quot; } ${ name }`); } } åˆ«å å¦ä¸€ç§ç®€åŒ–å‘½åç©ºé—´æ“ä½œçš„æ–¹æ³•æ˜¯ä½¿ç”¨import q = x.y.zç»™å¸¸ç”¨çš„å¯¹è±¡èµ·ä¸€ä¸ªçŸ­çš„åå­—ã€‚ ä¸è¦ä¸ç”¨æ¥åŠ è½½æ¨¡å—çš„ import x = require('name')è¯­æ³•å¼„æ··äº†ï¼Œè¿™é‡Œçš„è¯­æ³•æ˜¯ä¸ºæŒ‡å®šçš„ç¬¦å·åˆ›å»ºä¸€ä¸ªåˆ«åã€‚ ä½ å¯ä»¥ç”¨è¿™ç§æ–¹æ³•ä¸ºä»»æ„æ ‡è¯†ç¬¦åˆ›å»ºåˆ«åï¼Œä¹ŸåŒ…æ‹¬å¯¼å…¥çš„æ¨¡å—ä¸­çš„å¯¹è±¡ namespace Shapes { export namespace Polygons { export class Triangle { } export class Square { } } } import polygons = Shapes.Polygons; let sq = new polygons.Square(); // Same as &quot;new Shapes.Polygons.Square()&quot; å¤–éƒ¨å‘½åç©ºé—´ æµè¡Œçš„ç¨‹åºåº“D3åœ¨å…¨å±€å¯¹è±¡d3é‡Œå®šä¹‰å®ƒçš„åŠŸèƒ½ã€‚ å› ä¸ºè¿™ä¸ªåº“é€šè¿‡ä¸€ä¸ª æ ‡ç­¾åŠ è½½ï¼ˆä¸æ˜¯é€šè¿‡æ¨¡å—åŠ è½½å™¨ï¼‰ï¼Œå®ƒçš„å£°æ˜æ–‡ä»¶ä½¿ç”¨å†…éƒ¨æ¨¡å—æ¥å®šä¹‰å®ƒçš„ç±»å‹ã€‚ ä¸ºäº†è®©TypeScriptç¼–è¯‘å™¨è¯†åˆ«å®ƒçš„ç±»å‹ï¼Œæˆ‘ä»¬ä½¿ç”¨å¤–éƒ¨å‘½åç©ºé—´å£°æ˜ã€‚ æ¯”å¦‚ï¼Œæˆ‘ä»¬å¯ä»¥åƒä¸‹é¢è¿™æ ·å†™ declare namespace D3 { export interface Selectors { select: { (selector: string): Selection; (element: EventTarget): Selection; }; } export interface Event { x: number; y: number; } export interface Base extends Selectors { event: Event; } } declare var d3: D3.Base; ä¸Šé¢æˆ‘ä»¬ä»‹ç»äº†TypeScriptçš„å‘½åç©ºé—´ï¼Œç¬¬åå››èŠ‚æˆ‘ä»¬å°†ä»‹ç»è£…é¥°å™¨ æ–‡ç« å‚è€ƒTypeScriptä¸­æ–‡ç½‘ ","link":"https://xiaoai7904.github.io/post/typescript-ru-men-jiao-cheng-shi-san-ming-ming-kong-jian/"},{"title":"TypeScriptå…¥é—¨æ•™ç¨‹(åäºŒ) - æ¨¡å—","content":"æ¨¡å—æ˜¯åœ¨è‡ªèº«çš„ä½œç”¨åŸŸæ‰§è¡Œ,ä¹Ÿå°±æ˜¯è¯´åœ¨ä¸€ä¸ªæ¨¡å—é‡Œé¢å£°æ˜çš„å˜é‡,ç±»,å‡½æ•°éƒ½æ˜¯åœ¨æ¨¡å—ä¸­å¯è§,æ¨¡å—å¤–é¢æ˜¯ä¸å¯è§çš„ï¼Œé™¤éä½¿ç”¨exportå¯¼å‡º,å…¶ä»–æ¨¡å—ä½¿ç”¨importå¼•å…¥å°±å¯ä»¥ä½¿ç”¨å…¶ä»–æ¨¡å—å¯¼å‡ºçš„å˜é‡,ç±»,å‡½æ•°ç­‰ å¯¼å‡º ä»»ä½•å£°æ˜(å˜é‡,å‡½æ•°,ç±»,ç±»åˆ«åˆ«åæˆ–æ¥å£)éƒ½èƒ½å¤Ÿé€šè¿‡æ·»åŠ exportå…³é”®å­—æ¥å¯¼å‡º export const a = '112' export interface Styles { width: string height: string } export function fn1() {} export class Fn {} export {Fn as fn} // å¯¼å‡ºçš„éƒ¨åˆ†é‡å‘½å export * from 'æ–‡ä»¶è·¯å¾„' export default class Styles {} // é»˜è®¤å¯¼å‡º å¯¼å…¥ æ¨¡å—çš„å¯¼å…¥æ“ä½œä¸å¯¼å‡ºä¸€æ ·ç®€å•ã€‚ å¯ä»¥ä½¿ç”¨ä»¥ä¸‹ importå½¢å¼ä¹‹ä¸€æ¥å¯¼å…¥å…¶å®ƒæ¨¡å—ä¸­çš„å¯¼å‡ºå†…å®¹ import { Fn } from 'å¼•å…¥çš„æ–‡ä»¶è·¯å¾„' import {Fn as fn } from 'å¼•å…¥çš„æ–‡ä»¶è·¯å¾„' // å¯¼å…¥å†…å®¹é‡å‘½å import * as styles from 'å¼•å…¥çš„æ–‡ä»¶è·¯å¾„' // å°†æ•´ä¸ªæ¨¡å—å¯¼å…¥åˆ°ä¸€ä¸ªå˜é‡ import 'å¼•å…¥çš„æ–‡ä»¶è·¯å¾„' // å¼•å…¥æ–‡ä»¶ import style from 'å¼•å…¥çš„æ–‡ä»¶è·¯å¾„' // å¼•å…¥é»˜è®¤å¯¼å‡ºæ–‡ä»¶ export = å’Œ import = require() CommonJSå’ŒAMDçš„ç¯å¢ƒé‡Œéƒ½æœ‰ä¸€ä¸ªexportså˜é‡ï¼Œè¿™ä¸ªå˜é‡åŒ…å«äº†ä¸€ä¸ªæ¨¡å—çš„æ‰€æœ‰å¯¼å‡ºå†…å®¹ã€‚ CommonJSå’ŒAMDçš„exportséƒ½å¯ä»¥è¢«èµ‹å€¼ä¸ºä¸€ä¸ªå¯¹è±¡, è¿™ç§æƒ…å†µä¸‹å…¶ä½œç”¨å°±ç±»ä¼¼äºes6è¯­æ³•é‡Œçš„é»˜è®¤å¯¼å‡ºï¼Œå³export defaultè¯­æ³•äº†ã€‚è™½ç„¶ä½œç”¨ç›¸ä¼¼ï¼Œä½†æ˜¯export defaultè¯­æ³•å¹¶ä¸èƒ½å…¼å®¹CommonJSå’ŒAMDçš„exportsã€‚ ä¸ºäº†æ”¯æŒCommonJSå’ŒAMDçš„exports, TypeScriptæä¾›äº†export =è¯­æ³•ã€‚ export =è¯­æ³•å®šä¹‰ä¸€ä¸ªæ¨¡å—çš„å¯¼å‡ºå¯¹è±¡ã€‚ è¿™é‡Œçš„å¯¹è±¡ä¸€è¯æŒ‡çš„æ˜¯ç±»ï¼Œæ¥å£ï¼Œå‘½åç©ºé—´ï¼Œå‡½æ•°æˆ–æšä¸¾ã€‚ è‹¥ä½¿ç”¨export =å¯¼å‡ºä¸€ä¸ªæ¨¡å—ï¼Œåˆ™å¿…é¡»ä½¿ç”¨TypeScriptçš„ç‰¹å®šè¯­æ³•import module = require(&quot;module&quot;)æ¥å¯¼å…¥æ­¤æ¨¡å— class Styles { constructor(public styles: object) getStyle(key: string): number | string { return this.styles[key] } } export = Styles // ä½¿ç”¨æ–¹å¼å¦‚ä¸‹ import Styles = require('æ–‡ä»¶è·¯å¾„') let s = new Styles({ width : 200 }) s.getStyle('width') // 200 ä¸Šé¢æˆ‘ä»¬ä»‹ç»äº†TypeScriptçš„æ¨¡å—ï¼Œç¬¬åä¸‰èŠ‚æˆ‘ä»¬å°†ä»‹ç»å‘½åç©ºé—´ æ–‡ç« å‚è€ƒTypeScriptä¸­æ–‡ç½‘ ","link":"https://xiaoai7904.github.io/post/typescript-ru-men-jiao-cheng-shi-er-mo-kuai/"},{"title":"TypeScriptå…¥é—¨æ•™ç¨‹(åä¸€) - è¿­ä»£å™¨å’Œç”Ÿæˆå™¨","content":"for..of è¯­å¥ let someArray = [1, &quot;string&quot;, false]; for (let entry of someArray) { console.log(entry); // 1, &quot;string&quot;, false } for..in è¯­å¥ let list = [4, 5, 6]; for (let i in list) { console.log(i); // &quot;0&quot;, &quot;1&quot;, &quot;2&quot;, } for (let i of list) { console.log(i); // &quot;4&quot;, &quot;5&quot;, &quot;6&quot; } åŒºåˆ« for..ofå’Œfor..inå‡å¯è¿­ä»£ä¸€ä¸ªåˆ—è¡¨ï¼›ä½†æ˜¯ç”¨äºè¿­ä»£çš„å€¼å´ä¸åŒï¼Œfor..inè¿­ä»£çš„æ˜¯å¯¹è±¡çš„ é”® çš„åˆ—è¡¨ï¼Œè€Œfor..ofåˆ™è¿­ä»£å¯¹è±¡çš„é”®å¯¹åº”çš„å€¼ï¼Œfor..inå¯ä»¥æ“ä½œä»»ä½•å¯¹è±¡ï¼›å®ƒæä¾›äº†æŸ¥çœ‹å¯¹è±¡å±æ€§çš„ä¸€ç§æ–¹æ³•ã€‚ ä½†æ˜¯ for..ofå…³æ³¨äºè¿­ä»£å¯¹è±¡çš„å€¼ è¿™èŠ‚çš„å†…å®¹æ¯”è¾ƒç®€å•,æ‰€ä»¥åªæ˜¯å†™äº†å‡ æ®µä»£ç æ¥è¿›è¡Œè§£é‡Š ä¸Šé¢æˆ‘ä»¬ä»‹ç»äº†TypeScriptçš„è¿­ä»£å™¨å’Œç”Ÿæˆå™¨ï¼Œç¬¬åäºŒèŠ‚æˆ‘ä»¬å°†ä»‹ç»æ¨¡å— æ–‡ç« å‚è€ƒTypeScriptä¸­æ–‡ç½‘ ","link":"https://xiaoai7904.github.io/post/typescript-ru-men-jiao-cheng-shi-yi-die-dai-qi-he-sheng-cheng-qi/"},{"title":"TypeScriptå…¥é—¨æ•™ç¨‹(å) - Symbols","content":"è‡ªECMAScript 2015(ES6)èµ·ï¼Œsymbolæˆä¸ºäº†ä¸€ç§æ–°çš„åŸç”Ÿç±»å‹ï¼Œå°±åƒnumberå’Œstringä¸€æ · ä»‹ç» symbolç±»å‹çš„å€¼æ˜¯é€šè¿‡Symbolæ„é€ å‡½æ•°åˆ›å»ºçš„ let sym1 = Symbol(); let sym2 = Symbol(&quot;key&quot;); // å¯é€‰çš„å­—ç¬¦ä¸²key éœ€è¦\bæ³¨æ„çš„\bæ˜¯symbolæ˜¯å”¯ä¸€çš„ åƒå­—ç¬¦ä¸²ä¸€æ ·ï¼Œsymbolsä¹Ÿå¯ä»¥è¢«ç”¨åšå¯¹è±¡å±æ€§çš„é”®,ä¹Ÿå¯ä»¥è®¡ç®—å‡ºçš„å±æ€§åå£°æ˜ç›¸ç»“åˆæ¥å£°æ˜å¯¹è±¡çš„å±æ€§å’Œç±»æˆå‘˜ let sym = Symbol(); let obj = { [sym]: &quot;value&quot; }; console.log(obj[sym]); // &quot;value&quot; const getClassNameSymbol = Symbol(); class C { [getClassNameSymbol](){ return &quot;C&quot;; } } let c = new C(); let className = c[getClassNameSymbol](); // &quot;C&quot; \bæ›´å¤šSymbols\bç”¨æ³•å»ºè®®æŸ¥çœ‹é˜®ä¸€å³°ES6é‡Œé¢å†™çš„å¾ˆè¯¦ç»† ä¸Šé¢æˆ‘ä»¬ä»‹ç»äº†TypeScriptçš„Symbolsï¼Œç¬¬åä¸€èŠ‚æˆ‘ä»¬å°†ä»‹ç»è¿­ä»£å™¨å’Œç”Ÿæˆå™¨ æ–‡ç« å‚è€ƒTypeScriptä¸­æ–‡ç½‘ ","link":"https://xiaoai7904.github.io/post/typescript-ru-men-jiao-cheng-shi-symbols/"},{"title":"TypeScriptå…¥é—¨æ•™ç¨‹(ä¹) - é«˜çº§ç±»å‹","content":"é«˜çº§\bç±»å‹(äº¤å‰ç±»å‹,è”åˆç±»å‹,ç±»å‹ä¿æŠ¤ä¸åŒºåˆ†ç±»å‹,ç±»å‹åˆ«å,å­—ç¬¦ä¸²å­—é¢é‡ç±»å‹,æ•°å­—å­—é¢é‡ç±»å‹,æšä¸¾æˆå‘˜ç±»å‹,å¤šæ€çš„thisç±»å‹,ç´¢å¼•ç±»å‹,æ˜ å°„ç±»å‹)\bæˆ‘ä»¬ä¼šå¯¹10ç§è¿›è¡Œè¯¦æƒ…ä»‹ç» äº¤å‰ç±»å‹(Intersection Types) äº¤å‰ç±»å‹æ˜¯å°†å¤šä¸ªç±»å‹åˆå¹¶åˆ°\bä¸€ä¸ªç±»å‹\b\b,æ¯”å¦‚:Fn1 &amp; Fn2 &amp; Fn3åŒæ—¶æ˜¯Fn1å’ŒFn2å’ŒFn3,è¿™ä¸ªç±»å‹çš„å¯¹è±¡åŒæ—¶æ‹¥æœ‰è¿™ä¸‰ç§ç±»å‹çš„æˆå‘˜ã€‚ æ¥çœ‹ä¸€ä¸ªæ··å…¥(mixins)çš„ä¾‹å­: function extend&lt;T, U&gt;(first: T, second: U): T &amp; U { let result = &lt;T &amp; U&gt;{}; for (let id in first) { (&lt;any&gt;result)[id] = (&lt;any&gt;first)[id]; } for (let id in second) { if (!result.hasOwnProperty(id)) { (&lt;any&gt;result)[id] = (&lt;any&gt;second)[id]; } } return result; } interface FnInterface { getName(): string; } class Fn1 { constructor(public name: string) { } } class Fn2 implements FnInterface { getName() { console.log('getName') } } let f = extend(new Fn1(&quot;mickey&quot;), new Fn2()); let n = f.name; // mickey f.getName(); // getName è”åˆç±»å‹(Union Types) è”åˆç±»å‹è¡¨ç¤ºä¸€ä¸ªå€¼å¯ä»¥æ˜¯å‡ ç§ç±»å‹ä¹‹,ç”¨ç«–çº¿ | åˆ†éš”æ¯ä¸ªç±»å‹ function setWidth(dom: any, width: string | number): void { dom.style.width = width } ç±»å‹ä¿æŠ¤ä¸åŒºåˆ†ç±»å‹(Type Guards and Differentiating Type) let pet = getSmallPet(); // æ¯ä¸€ä¸ªæˆå‘˜è®¿é—®éƒ½ä¼šæŠ¥é”™ if (pet.swim) { pet.swim(); } else if (pet.fly) { pet.fly(); } ä¿®æ”¹ä¸Šé¢çš„ä»£ç  let pet = getSmallPet(); if ((&lt;Fish&gt;pet).swim) { (&lt;Fish&gt;pet).swim(); } else { (&lt;Bird&gt;pet).fly(); } ç”¨æˆ·è‡ªå®šä¹‰çš„ç±»å‹ä¿æŠ¤ TypeScripté‡Œçš„ ç±»å‹ä¿æŠ¤æœºåˆ¶è®©å®ƒæˆä¸ºäº†ç°å®ã€‚ ç±»å‹ä¿æŠ¤å°±æ˜¯ä¸€äº›è¡¨è¾¾å¼ï¼Œå®ƒä»¬ä¼šåœ¨è¿è¡Œæ—¶æ£€æŸ¥ä»¥ç¡®ä¿åœ¨æŸä¸ªä½œç”¨åŸŸé‡Œçš„ç±»å‹ã€‚ è¦å®šä¹‰ä¸€ä¸ªç±»å‹ä¿æŠ¤ï¼Œæˆ‘ä»¬åªè¦ç®€å•åœ°å®šä¹‰ä¸€ä¸ªå‡½æ•°ï¼Œå®ƒçš„è¿”å›å€¼æ˜¯ä¸€ä¸ª ç±»å‹è°“è¯ function isFish(pet: Fish | Bird): pet is Fish { return (&lt;Fish&gt;pet).swim !== undefined; } typeofç±»å‹ä¿æŠ¤ è¿™äº›typeofç±»å‹ä¿æŠ¤åªæœ‰ä¸¤ç§å½¢å¼èƒ½è¢«è¯†åˆ«ï¼štypeof v === &quot;typename&quot;å’Œ typeof v !== &quot;typename&quot;ï¼Œ &quot;typename&quot;å¿…é¡»æ˜¯ &quot;number&quot;ï¼Œ &quot;string&quot;ï¼Œ &quot;boolean&quot;æˆ– &quot;symbol&quot;ã€‚ ä½†æ˜¯TypeScriptå¹¶ä¸ä¼šé˜»æ­¢ä½ ä¸å…¶å®ƒå­—ç¬¦ä¸²æ¯”è¾ƒï¼Œè¯­è¨€ä¸ä¼šæŠŠé‚£äº›è¡¨è¾¾å¼è¯†åˆ«ä¸ºç±»å‹ä¿æŠ¤ instanceofç±»å‹ä¿æŠ¤ instanceofç±»å‹ä¿æŠ¤æ˜¯é€šè¿‡æ„é€ å‡½æ•°æ¥ç»†åŒ–ç±»å‹çš„ä¸€ç§æ–¹å¼ instanceofçš„å³ä¾§è¦æ±‚æ˜¯ä¸€ä¸ªæ„é€ å‡½æ•°ï¼ŒTypeScriptå°†ç»†åŒ–ä¸º: æ­¤æ„é€ å‡½æ•°çš„ prototypeå±æ€§çš„ç±»å‹ï¼Œå¦‚æœå®ƒçš„ç±»å‹ä¸ä¸º anyçš„è¯ æ„é€ ç­¾åæ‰€è¿”å›çš„ç±»å‹çš„è”åˆ ç±»å‹åˆ«å ç±»å‹åˆ«åå°±æ˜¯ç»™\bç±»å‹èµ·ä¸€ä¸ªæ–°çš„åå­—,èµ·åˆ«åä¸ä¼šæ–°å»ºä¸€ä¸ªç±»å‹ï¼Œåªæ˜¯ç”¨æ–°çš„åå­—æ¥å¼•ç”¨é‚£ä¸ªç±»å‹ type Name = string; type NameResolver = () =&gt; string; type NameOrResolver = Name | NameResolver; function getName(n: NameOrResolver): Name { if (typeof n === 'string') { return n; } else { return n(); } } ç±»å‹åˆ«åä¹Ÿå¯ä»¥æ˜¯æ³›å‹ type Container&lt;T&gt; = { value: T }; type Tree&lt;T&gt; = { value: T; left: Tree&lt;T&gt;; right: Tree&lt;T&gt;; } ç±»å‹\båˆ«åä¸èƒ½å‡ºç°åœ¨å£°æ˜\bå³ä¾§çš„ä»»ä½•åœ°æ–¹ type Yikes = Array&lt;Yikes&gt;; // error å­—ç¬¦ä¸²å­—é¢é‡ç±»å‹ å­—ç¬¦ä¸²å­—é¢é‡ç±»å‹å…è®¸ä½ æŒ‡å®šå­—ç¬¦ä¸²å¿…é¡»çš„å›ºå®šå€¼ã€‚ åœ¨å®é™…åº”ç”¨ä¸­ï¼Œå­—ç¬¦ä¸²å­—é¢é‡ç±»å‹å¯ä»¥ä¸è”åˆç±»å‹ï¼Œç±»å‹ä¿æŠ¤å’Œç±»å‹åˆ«åå¾ˆå¥½çš„é…åˆã€‚ é€šè¿‡ç»“åˆä½¿ç”¨è¿™äº›ç‰¹æ€§ï¼Œä½ å¯ä»¥å®ç°ç±»ä¼¼æšä¸¾ç±»å‹çš„å­—ç¬¦ä¸² type Easing = &quot;ease-in&quot; | &quot;ease-out&quot; | &quot;ease-in-out&quot;; class UIElement { animate(dx: number, dy: number, easing: Easing) { if (easing === &quot;ease-in&quot;) { // ... } else if (easing === &quot;ease-out&quot;) { } else if (easing === &quot;ease-in-out&quot;) { } else { } } } let button = new UIElement(); button.animate(0, 0, &quot;ease-in&quot;); button.animate(0, 0, &quot;uneasy&quot;); // error: &quot;uneasy&quot; is not allowed here å­—ç¬¦ä¸²å­—é¢é‡ç±»å‹è¿˜å¯ä»¥ç”¨äºåŒºåˆ†å‡½æ•°é‡è½½ function createElement(tagName: &quot;img&quot;): HTMLImageElement; function createElement(tagName: &quot;input&quot;): HTMLInputElement; // ... more overloads ... function createElement(tagName: string): Element { // ... code goes here ... } æ•°å­—å­—é¢é‡ç±»å‹ function rollDie(): 1 | 2 | 3 | 4 | 5 | 6 { // ... } å¤šæ€çš„thisç±»å‹ å¤šæ€çš„ thisç±»å‹è¡¨ç¤ºçš„æ˜¯æŸä¸ªåŒ…å«ç±»æˆ–æ¥å£çš„ å­ç±»å‹ã€‚ è¿™è¢«ç§°åš F-boundedå¤šæ€æ€§ã€‚ å®ƒèƒ½å¾ˆå®¹æ˜“çš„è¡¨ç°è¿è´¯æ¥å£é—´çš„ç»§æ‰¿ï¼Œæ¯”å¦‚ã€‚ åœ¨è®¡ç®—å™¨çš„ä¾‹å­é‡Œï¼Œåœ¨æ¯ä¸ªæ“ä½œä¹‹åéƒ½è¿”å› thisç±»å‹: class BasicCalculator { public constructor(protected value: number = 0) { } public currentValue(): number { return this.value; } public add(operand: number): this { this.value += operand; return this; } public multiply(operand: number): this { this.value *= operand; return this; } // ... other operations go here ... } let v = new BasicCalculator(2) .multiply(5) .add(1) .currentValue(); ç”±äºè¿™ä¸ªç±»ä½¿ç”¨äº† thisç±»å‹ï¼Œä½ å¯ä»¥ç»§æ‰¿å®ƒï¼Œæ–°çš„ç±»å¯ä»¥ç›´æ¥ä½¿ç”¨ä¹‹å‰çš„æ–¹æ³•ï¼Œä¸éœ€è¦åšä»»ä½•çš„æ”¹å˜ class ScientificCalculator extends BasicCalculator { public constructor(value = 0) { super(value); } public sin() { this.value = Math.sin(this.value); return this; } } let v = new ScientificCalculator(2) .multiply(5) .sin() .add(1) .currentValue(); ç´¢å¼•ç±»å‹(Index types) ä½¿ç”¨ç´¢å¼•ç±»å‹ï¼Œç¼–è¯‘å™¨å°±èƒ½å¤Ÿæ£€æŸ¥ä½¿ç”¨äº†åŠ¨æ€å±æ€§åçš„ä»£ç  function pluck(o, names) { return names.map(n =&gt; o[n]); } function pluck&lt;T, K extends keyof T&gt;(o: T, names: K[]): T[K][] { return names.map(n =&gt; o[n]); } interface Person { name: string; age: number; } let person: Person = { name: 'Jarid', age: 35 }; let strings: string[] = pluck(person, ['name']); // ok, string[] ä¸Šé¢ä»£ç å¼•å…¥äº†æ–°çš„ç±»å‹æ“ä½œç¬¦keyof T,ç´¢å¼•ç±»å‹æŸ¥è¯¢æ“ä½œç¬¦å’ŒT[K],ç´¢å¼•è®¿é—®æ“ä½œç¬¦ let personProps: keyof Person; // 'name' | 'age' ä¸Šé¢ä»£ç å¯ä»¥åŒé€šè¿‡let personProps: 'name' | 'age'æ›¿æ¢,ä½†æ˜¯å¦‚æœæ·»åŠ äº†æ–°çš„å±æ€§åˆ°Personé‡Œé¢keyof Personä¼š\bè‡ªåŠ¨æ·»åŠ æ–°å¢çš„å±æ€§,å› æ­¤åœ¨\bä½¿ç”¨å‰ä¸æ¸…æ¥šå‡ºç°çš„å±æ€§å,å°±å¯ä»¥è¿™æ ·ä½¿ç”¨ function getProperty&lt;T, K extends keyof T&gt;(o: T, name: K): T[K] { return o[name]; // o[name] is of type T[K] } getPropertyé‡Œçš„o: Tå’Œname: Kï¼Œæ„å‘³ç€o[name]: T[K]ã€‚ å½“ä½ è¿”å›T[K]çš„ç»“æœï¼Œç¼–è¯‘å™¨ä¼šå®ä¾‹åŒ–é”®çš„çœŸå®ç±»å‹ï¼Œå› æ­¤ getPropertyçš„è¿”å›å€¼ç±»å‹ä¼šéšç€ä½ éœ€è¦çš„å±æ€§æ”¹å˜ keyofå’ŒT[K]ä¸å­—ç¬¦ä¸²ç´¢å¼•ç­¾åè¿›è¡Œäº¤äº’ã€‚ å¦‚æœä½ æœ‰ä¸€ä¸ªå¸¦æœ‰å­—ç¬¦ä¸²ç´¢å¼•ç­¾åçš„ç±»å‹ï¼Œé‚£ä¹ˆkeyof Tä¼šæ˜¯stringã€‚ å¹¶ä¸”T[string]ä¸ºç´¢å¼•ç­¾åçš„ç±»å‹ interface Map&lt;T&gt; { [key: string]: T; } let keys: keyof Map&lt;number&gt;; // string let value: Map&lt;number&gt;['foo']; // number æ˜ å°„ç±»å‹ TypeScriptæä¾›äº†ä»æ—§ç±»å‹ä¸­åˆ›å»ºæ–°ç±»å‹çš„ä¸€ç§æ–¹å¼ â€” æ˜ å°„ç±»å‹ type Readonly&lt;T&gt; = { readonly [P in keyof T]: T[P]; } type Partial&lt;T&gt; = { [P in keyof T]?: T[P]; } ä½¿ç”¨å¦‚ä¸‹: type PersonPartial = Partial&lt;Person&gt;; type ReadonlyPerson = Readonly&lt;Person&gt;; å®ƒçš„è¯­æ³•ä¸ç´¢å¼•ç­¾åçš„è¯­æ³•ç±»å‹ï¼Œå†…éƒ¨ä½¿ç”¨äº† for .. inã€‚ å…·æœ‰ä¸‰ä¸ªéƒ¨åˆ† ç±»å‹å˜é‡ Kï¼Œå®ƒä¼šä¾æ¬¡ç»‘å®šåˆ°æ¯ä¸ªå±æ€§ å­—ç¬¦ä¸²å­—é¢é‡è”åˆçš„ Keysï¼Œå®ƒåŒ…å«äº†è¦è¿­ä»£çš„å±æ€§åçš„é›†åˆ å±æ€§çš„ç»“æœç±»å‹ type NullablePerson = { [P in keyof Person]: Person[P] | null } type PartialPerson = { [P in keyof Person]?: Person[P] } type Nullable&lt;T&gt; = { [P in keyof T]: T[P] | null } type Partial&lt;T&gt; = { [P in keyof T]?: T[P] } ä¸Šé¢ä»£ç æ˜¯çœŸæ­£åº”ç”¨ä¸­ä½¿ç”¨åˆ°çš„ \b\bä¸Šé¢ä»‹ç»äº†é«˜çº§ç±»å‹ç§çš„10ç§ç±»å‹,è¿™ä¹Ÿæ˜¯æ—¥å¸¸æˆ‘ä»¬ä¼šç”¨åˆ°çš„ ä¸Šé¢æˆ‘ä»¬ä»‹ç»äº†TypeScriptçš„é«˜çº§ç±»å‹ï¼Œç¬¬åèŠ‚æˆ‘ä»¬å°†ä»‹ç»Symbols æ–‡ç« å‚è€ƒTypeScriptä¸­æ–‡ç½‘ ","link":"https://xiaoai7904.github.io/post/typescript-ru-men-jiao-cheng-jiu-gao-ji-lei-xing/"},{"title":"TypeScriptå…¥é—¨æ•™ç¨‹(å…«) - ç±»å‹æ¨æ–­","content":"typescriptç±»å‹æ˜¯åœ¨é‚£é‡Œå¦‚ä½•è¢«æ¨æ–­çš„ï¼Ÿ ä»‹ç» æˆ‘ä»¬å£°æ˜å˜é‡æ—¶ä¸æŒ‡å®šå˜é‡ç±»å‹ï¼ŒTypeScriptä¼šè¿›è¡Œç±»å‹æ¨æ–­æ¥å¸®åŠ©æˆ‘ä»¬æä¾›ç±»å‹ let a = 1 let b = 'string' ä¸Šé¢ä»£ç ä¸­å˜é‡a,båˆ†åˆ«ä¼šè¢«ç±»å‹æ¨æ–­æ¨æ–­ä¸ºnumberå’Œstring ä½†æ˜¯æœ‰çš„æƒ…å†µç±»å‹æ¨æ–­æ— æ³•è‡ªåŠ¨æ¨æ–­å‡ºç±»å‹,ä¸‹é¢å°èŠ‚ä¼šä»‹ç» æœ€ä½³é€šç”¨ç±»å‹ å½“éœ€è¦\bä»å‡ ä¸ªè¡¨è¾¾å¼ä¸­æ¨æ–­ç±»å‹çš„æ—¶å€™ï¼Œä¼šä½¿ç”¨è¿™äº›è¡¨è¾¾å¼çš„ç±»å‹æ¥æ¨æ–­ä¸€ä¸ªæœ€é€‚åˆçš„é€šç”¨ç±»å‹ let a = [0, 1, null] ä¸ºäº†æ¨æ–­å˜é‡açš„ç±»å‹ï¼Œæˆ‘ä»¬å¿…é¡»è€ƒè™‘æ‰€æœ‰å…ƒç´ çš„ç±»å‹ã€‚ è¿™é‡Œæœ‰ä¸¤ç§é€‰æ‹©ï¼š numberå’Œnullã€‚ è®¡ç®—é€šç”¨ç±»å‹ç®—æ³•ä¼šè€ƒè™‘æ‰€æœ‰çš„å€™é€‰ç±»å‹ï¼Œå¹¶ç»™å‡ºä¸€ä¸ªå…¼å®¹æ‰€æœ‰å€™é€‰ç±»å‹çš„ç±»å‹ æœ‰æ—¶å€™å€™é€‰ç±»å‹å…±äº«ç›¸åŒçš„é€šç”¨ç±»å‹,ä½†æ˜¯å´æ²¡æœ‰ä¸€ä¸ªç±»å‹èƒ½åšä¸ºæ‰€æœ‰å€™é€‰ç±»å‹çš„ç±»å‹ let style = [new Width(), new Height(), new Color()] ä¸Šé¢ä»£ç æˆ‘ä»¬æƒ³styleè¢«æ¨æ–­ä¸ºStyle[]ç±»å‹,ä½†æ˜¯æ•°ç»„æ²¡æœ‰å¯¹è±¡æ—¶Style\bç±»å‹,å› æ­¤ä¸èƒ½æ¨æ–­å‡ºç»“æœï¼Œä¿®æ”¹ä¸€ä¸‹ä»£ç å¦‚ä¸‹: let style: Style[] = [new Width(), new Height(), new Color()] å¦‚æœæ²¡æœ‰æ‰¾åˆ°æœ€ä½³é€šç”¨ç±»å‹çš„è¯ï¼Œç±»å‹æ¨æ–­çš„ç»“æœä¸ºè”åˆæ•°ç»„ç±»å‹(Width | Height| color)[] ä¸Šä¸‹æ–‡ç±»å‹ window.onmousedown = function(mouseEvent) { console.log(mouseEvent.button); //&lt;- Error } TypeScriptç±»å‹æ£€æŸ¥å™¨ä½¿ç”¨Window.onmousedownå‡½æ•°çš„ç±»å‹æ¥æ¨æ–­å³è¾¹å‡½æ•°è¡¨è¾¾å¼çš„ç±»å‹,å¦‚æœå‡½æ•°è¡¨è¾¾å¼ä¸æ˜¯åœ¨ä¸Šä¸‹æ–‡ç±»å‹çš„ä½ç½®ï¼Œ mouseEventå‚æ•°çš„ç±»å‹éœ€è¦æŒ‡å®šä¸ºanyï¼Œè¿™æ ·ä¹Ÿä¸ä¼šæŠ¥é”™äº† window.onmousedown = function(mouseEvent: any) { console.log(mouseEvent.button); //ok } ä¸Šé¢æˆ‘ä»¬ä»‹ç»äº†TypeScriptçš„ç±»å‹æ¨æ–­ï¼Œç¬¬ä¹èŠ‚æˆ‘ä»¬å°†ä»‹ç»é«˜çº§ç±»å‹ æ–‡ç« å‚è€ƒTypeScriptä¸­æ–‡ç½‘ ","link":"https://xiaoai7904.github.io/post/typescript-ru-men-jiao-cheng-ba-lei-xing-tui-duan/"},{"title":"TypeScriptå…¥é—¨æ•™ç¨‹(ä¸ƒ) - æš","content":"ä½¿ç”¨æšä¸¾æˆ‘ä»¬å¯ä»¥å®šä¹‰ä¸€äº›å¸¦åå­—çš„å¸¸é‡ã€‚ ä½¿ç”¨æšä¸¾å¯ä»¥æ¸…æ™°åœ°è¡¨è¾¾æ„å›¾æˆ–åˆ›å»ºä¸€ç»„æœ‰åŒºåˆ«çš„ç”¨ä¾‹ã€‚ TypeScriptæ”¯æŒæ•°å­—çš„å’ŒåŸºäºå­—ç¬¦ä¸²çš„æšä¸¾ æ•°å­—æšä¸¾ enum des { top = 1, right, bottom, left } ä¸Šé¢ä»£ç å®šä¹‰äº†æ•°å­—æšä¸¾,topä½¿ç”¨åˆå§‹åŒ–å€¼ä¸º1,å…¶ä½™çš„æˆå‘˜å°±ä¼šä»1å¼€å§‹è‡ªåŠ¨å¢é•¿ æˆ‘ä»¬ä¹Ÿå¯ä»¥ä¸åˆ¶å®šåˆå§‹åŒ–å€¼ï¼Œé‚£ä¹ˆtopå°±ä¼šæ˜¯0ï¼Œå…¶ä»–æˆå‘˜å°±ä¼šä»0å¼€å§‹å¢é•¿ å­—ç¬¦ä¸²æšä¸¾ åœ¨ä¸€ä¸ªå­—ç¬¦ä¸²æšä¸¾é‡Œï¼Œæ¯ä¸ªæˆå‘˜éƒ½å¿…é¡»ç”¨å­—ç¬¦ä¸²å­—é¢é‡ï¼Œæˆ–å¦å¤–ä¸€ä¸ªå­—ç¬¦ä¸²æšä¸¾æˆå‘˜è¿›è¡Œåˆå§‹åŒ– enum des { top = 'TOP', right = 'RIGHT', bottom = 'BOTTOM', left = 'LEFT' } ç”±äºå­—ç¬¦ä¸²æšä¸¾æ²¡æœ‰è‡ªå¢é•¿çš„è¡Œä¸ºï¼Œå­—ç¬¦ä¸²æšä¸¾å¯ä»¥å¾ˆå¥½çš„åºåˆ—åŒ–ã€‚ æ¢å¥è¯è¯´ï¼Œå¦‚æœä½ æ­£åœ¨è°ƒè¯•å¹¶ä¸”å¿…é¡»è¦è¯»ä¸€ä¸ªæ•°å­—æšä¸¾çš„è¿è¡Œæ—¶çš„å€¼ï¼Œè¿™ä¸ªå€¼é€šå¸¸æ˜¯å¾ˆéš¾è¯»çš„ - å®ƒå¹¶ä¸èƒ½è¡¨è¾¾æœ‰ç”¨çš„ä¿¡æ¯ï¼ˆå°½ç®¡åå‘æ˜ å°„(åé¢ä¼šè®²è§£)ä¼šæœ‰æ‰€å¸®åŠ©ï¼‰ï¼Œå­—ç¬¦ä¸²æšä¸¾å…è®¸ä½ æä¾›ä¸€ä¸ªè¿è¡Œæ—¶æœ‰æ„ä¹‰çš„å¹¶ä¸”å¯è¯»çš„å€¼ï¼Œç‹¬ç«‹äºæšä¸¾æˆå‘˜çš„åå­— ä½¿ç”¨æšä¸¾ ä½¿ç”¨æšä¸¾å¾ˆç®€å•ï¼šé€šè¿‡æšä¸¾çš„å±æ€§æ¥è®¿é—®æšä¸¾æˆå‘˜ï¼Œå’Œæšä¸¾çš„åå­—æ¥è®¿é—®æšä¸¾ç±»å‹ï¼š enum Des { top = 1, right, bottom, left } function fn1(des: Des):void { console.log(des) // 1 } fn1(Des.top) è®¡ç®—çš„å’Œå¸¸é‡æˆå‘˜ æ¯ä¸ªæšä¸¾æˆå‘˜éƒ½å¸¦æœ‰ä¸€ä¸ªå€¼ï¼Œå®ƒå¯ä»¥æ˜¯å¸¸é‡æˆ–è®¡ç®—å‡ºæ¥çš„ã€‚ å½“æ»¡è¶³å¦‚ä¸‹æ¡ä»¶æ—¶ï¼Œæšä¸¾æˆå‘˜è¢«å½“ä½œæ˜¯å¸¸é‡ å®ƒæ˜¯æšä¸¾çš„ç¬¬ä¸€ä¸ªæˆå‘˜ä¸”æ²¡æœ‰åˆå§‹åŒ–å™¨ï¼Œè¿™ç§æƒ…å†µä¸‹å®ƒè¢«èµ‹äºˆå€¼0: // E.X is constant: enum E { X } å®ƒä¸å¸¦æœ‰åˆå§‹åŒ–å™¨ä¸”å®ƒä¹‹å‰çš„æšä¸¾æˆå‘˜æ˜¯ä¸€ä¸ª æ•°å­—å¸¸é‡ã€‚ è¿™ç§æƒ…å†µä¸‹ï¼Œå½“å‰æšä¸¾æˆå‘˜çš„å€¼ä¸ºå®ƒä¸Šä¸€ä¸ªæšä¸¾æˆå‘˜çš„å€¼åŠ 1 // All enum members in 'E1' and 'E2' are constant. enum E1 { X, Y, Z } enum E2 { A = 1, B, C } æšä¸¾æˆå‘˜ä½¿ç”¨ å¸¸é‡æšä¸¾è¡¨è¾¾å¼åˆå§‹åŒ–ã€‚ å¸¸æ•°æšä¸¾è¡¨è¾¾å¼æ˜¯TypeScriptè¡¨è¾¾å¼çš„å­é›†ï¼Œå®ƒå¯ä»¥åœ¨ç¼–è¯‘é˜¶æ®µæ±‚å€¼ã€‚ å½“ä¸€ä¸ªè¡¨è¾¾å¼æ»¡è¶³ä¸‹é¢æ¡ä»¶ä¹‹ä¸€æ—¶ï¼Œå®ƒå°±æ˜¯ä¸€ä¸ªå¸¸é‡æšä¸¾è¡¨è¾¾å¼ ä¸€ä¸ªæšä¸¾è¡¨è¾¾å¼å­—é¢é‡ï¼ˆä¸»è¦æ˜¯å­—ç¬¦ä¸²å­—é¢é‡æˆ–æ•°å­—å­—é¢é‡ï¼‰ ä¸€ä¸ªå¯¹ä¹‹å‰å®šä¹‰çš„å¸¸é‡æšä¸¾æˆå‘˜çš„å¼•ç”¨ï¼ˆå¯ä»¥æ˜¯åœ¨ä¸åŒçš„æšä¸¾ç±»å‹ä¸­å®šä¹‰çš„ï¼‰ å¸¦æ‹¬å·çš„å¸¸é‡æšä¸¾è¡¨è¾¾å¼ ä¸€å…ƒè¿ç®—ç¬¦+,-,~å…¶ä¸­ä¹‹ä¸€åº”ç”¨åœ¨äº†å¸¸é‡æšä¸¾è¡¨è¾¾å¼ å¸¸é‡æšä¸¾è¡¨è¾¾å¼åšä¸ºäºŒå…ƒè¿ç®—ç¬¦+,-,*,/,%,&lt;&lt;,&gt;&gt;,&gt;&gt;&gt;,&amp;,|,^çš„æ“ä½œå¯¹è±¡ã€‚ è‹¥å¸¸æ•°æšä¸¾è¡¨è¾¾å¼æ±‚å€¼åä¸ºNaNæˆ–Infinityï¼Œåˆ™ä¼šåœ¨ç¼–è¯‘é˜¶æ®µæŠ¥é”™ enum FileAccess { // constant members None, Read = 1 &lt;&lt; 1, Write = 1 &lt;&lt; 2, ReadWrite = Read | Write, // computed member G = &quot;123&quot;.length } è”åˆæšä¸¾ä¸æšä¸¾æˆå‘˜çš„ç±»å‹ å­˜åœ¨ä¸€ç§ç‰¹æ®Šçš„éè®¡ç®—çš„å¸¸é‡æšä¸¾æˆå‘˜çš„å­é›†ï¼šå­—é¢é‡æšä¸¾æˆå‘˜ã€‚ å­—é¢é‡æšä¸¾æˆå‘˜æ˜¯æŒ‡ä¸å¸¦æœ‰åˆå§‹å€¼çš„å¸¸é‡æšä¸¾æˆå‘˜ï¼Œæˆ–è€…æ˜¯å€¼è¢«åˆå§‹åŒ–ä¸º ä»»ä½•å­—ç¬¦ä¸²å­—é¢é‡ï¼ˆä¾‹å¦‚ï¼š&quot;foo&quot;ï¼Œ&quot;bar&quot;ï¼Œ&quot;baz&quot;ï¼‰ ä»»ä½•æ•°å­—å­—é¢é‡ï¼ˆä¾‹å¦‚ï¼š1,100ï¼‰ åº”ç”¨äº†ä¸€å…ƒ -ç¬¦å·çš„æ•°å­—å­—é¢é‡ï¼ˆä¾‹å¦‚ï¼š-1,-100ï¼‰ enum ShapeKind { Circle, Square, } interface Circle { kind: ShapeKind.Circle; radius: number; } interface Square { kind: ShapeKind.Square; sideLength: number; } let c: Circle = { kind: ShapeKind.Square, radius: 100, } enum E { Foo, Bar, } function f(x: E) { if (x !== E.Foo || x !== E.Bar) { // Error! Operator '!==' cannot be applied to types 'E.Foo' and 'E.Bar'. } } è¿è¡Œæ—¶çš„æšä¸¾ enum E { X, Y, Z } function f(obj: { X: number }) { return obj.X; } // Works, since 'E' has a property named 'X' which is a number. f(E); åå‘æ˜ å°„ é™¤äº†åˆ›å»ºä¸€ä¸ªä»¥å±æ€§ååšä¸ºå¯¹è±¡æˆå‘˜çš„å¯¹è±¡ä¹‹å¤–ï¼Œæ•°å­—æšä¸¾æˆå‘˜è¿˜å…·æœ‰äº† åå‘æ˜ å°„ï¼Œä»æšä¸¾å€¼åˆ°æšä¸¾åå­— enum Enum { A } let a = Enum.A; let nameOfA = Enum[a]; // &quot;A&quot; ä¸Šé¢ä»£ç ç¼–è¯‘æˆJavascript var Enum; (function (Enum) { Enum[Enum[&quot;A&quot;] = 0] = &quot;A&quot;; })(Enum || (Enum = {})); var a = Enum.A; var nameOfA = Enum[a]; // &quot;A&quot; constæšä¸¾ const enum Enum { A = 1, B = A * 2 } å¤–éƒ¨æšä¸¾ å¤–éƒ¨æšä¸¾ç”¨æ¥æè¿°å·²ç»å­˜åœ¨çš„æšä¸¾ç±»å‹çš„å½¢çŠ¶ declare enum Enum { A = 1, B, C = 2 } å¤–éƒ¨æšä¸¾å’Œéå¤–éƒ¨æšä¸¾ä¹‹é—´æœ‰ä¸€ä¸ªé‡è¦çš„åŒºåˆ«ï¼Œåœ¨æ­£å¸¸çš„æšä¸¾é‡Œï¼Œæ²¡æœ‰åˆå§‹åŒ–æ–¹æ³•çš„æˆå‘˜è¢«å½“æˆå¸¸æ•°æˆå‘˜ã€‚ å¯¹äºéå¸¸æ•°çš„å¤–éƒ¨æšä¸¾è€Œè¨€ï¼Œæ²¡æœ‰åˆå§‹åŒ–æ–¹æ³•æ—¶è¢«å½“åšéœ€è¦ç»è¿‡è®¡ç®—çš„ ä¸Šé¢æˆ‘ä»¬ä»‹ç»äº†TypeScriptçš„æšä¸¾ï¼Œç¬¬å…«èŠ‚æˆ‘ä»¬å°†ä»‹ç»ç±»å‹æ¨è®º æ–‡ç« å‚è€ƒTypeScriptä¸­æ–‡ç½‘ ","link":"https://xiaoai7904.github.io/post/typescript-ru-men-jiao-cheng-qi-mei/"},{"title":"TypeScriptå…¥é—¨æ•™ç¨‹(å…­) - æ³›å‹","content":" ç»´åŸºç™¾ç§‘ æ³›å‹æ˜¯ç¨‹åºè®¾è®¡è¯­è¨€çš„ä¸€ç§é£æ ¼æˆ–èŒƒå¼ã€‚æ³›å‹å…è®¸ç¨‹åºå‘˜åœ¨å¼ºç±»å‹ç¨‹åºè®¾è®¡è¯­è¨€ä¸­ç¼–å†™ä»£ç æ—¶ä½¿ç”¨ä¸€äº›ä»¥åæ‰æŒ‡å®šçš„ç±»å‹ï¼Œåœ¨å®ä¾‹åŒ–æ—¶ä½œä¸ºå‚æ•°æŒ‡æ˜è¿™äº›ç±»å‹ \bå…¥é—¨ ä¸‹é¢é€šè¿‡\bä¸¤ä¸ªä¾‹å­æ¥ä»‹ç»æ³›å‹çš„åŸºç¡€ç”¨æ³• // ä¸é€‚ç”¨æ³›å‹çš„æƒ…å†µ function fn1(arg: number): number { return arg } function fn2(arg: any): any { return arg } ä¸Šé¢ä¾‹å­æ˜¯æ²¡æœ‰ä½¿ç”¨æ³›å‹çš„æƒ…å†µï¼Œæˆ‘ä»¬ä½¿ç”¨æ³›å‹ä¿®æ”¹ä»£ç  function fn1&lt;T&gt;(arg: T): T { return arg } æˆ‘ä»¬é€š\bè¿‡æ·»åŠ ç±»å‹å˜é‡Tï¼ŒTå¸®åŠ©æˆ‘ä»¬\bæ•è·ç”¨æˆ·ä¼ å…¥çš„ç±»å‹ï¼Œä¹‹åæˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨è¿™ä¸ªç±»å‹ï¼Œ\b\b\bå‡½æ•°åœ¨è¿”å›T,è¿™æ ·æˆ‘ä»¬å¯ä»¥çŸ¥é“å‚æ•°ç±»å‹å’Œè¿”å›ç±»å‹æ˜¯ç›¸åŒå¹¶ä¸”å¯ä»¥\bè·Ÿè¸ªå‡½æ•°ä½¿ç”¨çš„ç±»å‹ä¿¡æ¯ ä¸Šé¢ä¸€ä¸ªç®€å•çš„ä¾‹å­å°±æ˜¯æœ€ç®€å•çš„æ³›å‹\u001dçš„å†™æ³•ï¼Œ&lt;&gt;é‡Œé¢çš„T\bå¯ä»¥éšæ„ä¿®æ”¹ï¼Œ\bä¸ä¸€å®šæ˜¯T æ³›å‹å˜é‡ ä½¿ç”¨æ³›å‹å‡½æ•°æ—¶ï¼Œç¼–è¯‘å™¨è¦æ±‚ä½ åœ¨å‡½æ•°ä½“å¿…é¡»æ­£ç¡®çš„ä½¿ç”¨è¿™ä¸ªé€šç”¨çš„ç±»å‹ï¼Œ\bä¹Ÿå°±æ˜¯è¯´ä½ å¿…é¡»æŠŠè¿™äº›å‚æ•°å½“åšæ˜¯ä»»æ„æˆ–æ‰€æœ‰ç±»å‹ function fn1&lt;T&gt;(arg:[]): T[] { console.log(Array.isArray(arg)) return arg } function fn2&lt;T&gt;(arg: Array&lt;T&gt;): Array&lt;T&gt; { return arg } ä¸Šé¢ä»£ç æ˜¯ä¸€æ ·çš„æ•ˆæœ æ³›å‹ç±»å‹ æ³›å‹å‡½æ•°çš„ç±»å‹ä¸éæ³›å‹å‡½æ•°çš„ç±»å‹æ²¡ä»€ä¹ˆä¸åŒï¼Œåªæ˜¯æœ‰ä¸€ä¸ªç±»å‹å‚æ•°åœ¨æœ€å‰é¢ï¼Œåƒå‡½æ•°å£°æ˜ä¸€æ · function fn1&lt;T&gt;(arg: T):T { return arg } let f1: &lt;T&gt;(arg: T) =&gt; T = fn1 æˆ‘ä»¬å¯èƒ½æƒ³æŠŠæ³›å‹å‚æ•°å½“ä½œæ•´ä¸ªæ¥å£çš„ä¸€ä¸ªå‚æ•°ã€‚ è¿™æ ·æˆ‘ä»¬å°±èƒ½æ¸…æ¥šçš„çŸ¥é“ä½¿ç”¨çš„å…·ä½“æ˜¯å“ªä¸ªæ³›å‹ç±»å‹ interface fn1Face&lt;T&gt; { (arg: T): T; } function fn1&lt;T&gt;(arg: T): T { return arg } let f1: fn1Face&lt;number&gt; = fn1 æ³›å‹ç±» æ³›å‹ç±»çœ‹ä¸Šå»ä¸æ³›å‹æ¥å£å·®ä¸å¤šã€‚ æ³›å‹ç±»ä½¿ç”¨ï¼ˆ &lt;&gt;ï¼‰æ‹¬èµ·æ³›å‹ç±»å‹ï¼Œè·Ÿåœ¨ç±»ååé¢ class Styles&lt;T&gt; { width: T; height: T; setStyle: (width: T, height: T) =&gt; object } let fn1 = new Styles&lt;number&gt;() fn1.width = 100 fn1.height = 100 fn1.setStyle = function(width, height) {return {width,height}} ä¸Šé¢æˆ‘ä»¬ä»‹ç»äº†TypeScriptçš„æ³›å‹ï¼Œç¬¬ä¸ƒèŠ‚æˆ‘ä»¬å°†ä»‹ç»æšä¸¾ æ–‡ç« å‚è€ƒTypeScriptä¸­æ–‡ç½‘ ","link":"https://xiaoai7904.github.io/post/typescript-ru-men-jiao-cheng-liu-fan-xing/"},{"title":"TypeScriptå…¥é—¨æ•™ç¨‹(äº”) - å‡½","content":"å‡½æ•°æ˜¯ç”±äº‹ä»¶é©±åŠ¨çš„æˆ–è€…å½“å®ƒè¢«è°ƒç”¨æ—¶æ‰§è¡Œçš„å¯é‡å¤ä½¿ç”¨çš„ä»£ç å— å‡½æ•° TypeScriptä¸­çš„å‡½æ•°å’ŒJavaScriptä¸­çš„å‡½æ•°ä¸€æ ·ï¼Œå¯ä»¥åˆ›å»ºåŒ¿åå‡½æ•°å’Œæœ‰åå­—çš„å‡½æ•° // å‘½åå‡½æ•° function fn1() {} // åŒ¿åå‡½æ•° let fn2 = function(){} å‡½æ•°å®šä¹‰ç±»å‹ æˆ‘ä»¬å¯ä»¥ç»™æ¯ä¸ªå‚æ•°æ·»åŠ ç±»å‹,è€Œä¸”å¯ä»¥ç»™å‡½æ•°æœ¬èº«æ·»åŠ è¿”å›å€¼ç±»å‹ã€‚ TypeScriptèƒ½å¤Ÿæ ¹æ®è¿”å›è¯­å¥è‡ªåŠ¨æ¨æ–­å‡ºè¿”å›å€¼ç±»å‹ï¼Œå› æ­¤æˆ‘ä»¬ä¸€èˆ¬ä¼š\bçœç•¥å®ƒï¼Œä½†æ˜¯ä¸ºäº†æå‡ä»£ç å¯ä»¥è¯»æ€§ï¼Œä¸€èˆ¬æˆ‘å–œæ¬¢åŠ ä¸Šè¿”å›ç±»å‹ function fn1(x: number, y: number): number { return x + y } let fn2: (x: number, y:number) =&gt; number = function(x: number, y:number):number{ return x + y} // å¯ä»¥å®šä¹‰å‚æ•°ä¸ºå¯é€‰å‚æ•° function fn3(x:number, y?:number): number { if(y) { return x + y } return x } this é€šä¿—\bè§£é‡Š:thisçš„æŒ‡å‘åœ¨å‡½æ•°å®šä¹‰çš„æ—¶å€™æ˜¯ç¡®å®šä¸äº†çš„ï¼Œåªæœ‰å‡½æ•°æ‰§è¡Œçš„æ—¶å€™æ‰èƒ½ç¡®å®šthisåˆ°åº•æŒ‡å‘è°ï¼Œå®é™…ä¸Šthisçš„æœ€ç»ˆæŒ‡å‘çš„æ˜¯é‚£ä¸ªè°ƒç”¨å®ƒçš„å¯¹è±¡ function fn1() { console.log(this) } fn1() // window var fn = { fn1: function() { console.log(this) } } fn.fn1() // fn é‡è½½ JavaScriptæ˜¯ä¸ªåŠ¨æ€è¯­è¨€ï¼ŒJavaScripté‡Œå‡½æ•°æ ¹æ®ä¼ å…¥ä¸åŒçš„å‚æ•°è€Œè¿”å›ä¸åŒç±»å‹çš„æ•°æ®æ˜¯å¾ˆå¸¸è§çš„ function fn1(data: object | string | any): any{ if(typeof data === 'object') { return {} }else if(typeof data === 'string') { return '' } return false } ä¸Šé¢ä»£ç å‡½æ•°fn1æ¥å—ä¸€ä¸ªå‚æ•°,è¿™ä¸ªå‚æ•°ç±»å‹å¯ä»¥æ˜¯å¯¹è±¡ï¼Œå­—ç¬¦ä¸²æˆ–è€…å…¶ä»–ç±»å‹ï¼Œå‡½æ•°ä½“å†…ä¼šæ ¹æ®æ¥å—çš„å‚æ•°è¿”å›ä¸åŒå€¼ æ–¹æ³•æ˜¯ä¸ºåŒä¸€ä¸ªå‡½æ•°æä¾›å¤šä¸ªå‡½æ•°ç±»å‹å®šä¹‰æ¥è¿›è¡Œå‡½æ•°é‡è½½ã€‚ ç¼–è¯‘å™¨ä¼šæ ¹æ®è¿™ä¸ªåˆ—è¡¨å»å¤„ç†å‡½æ•°çš„è°ƒç”¨ function fn1(data: object): object; function fn1(data: number): boolean function fn1(data: any): any { if(typeof data === 'object') { return {} }else if(typeof data === 'string') { return '' } return false } fn1({}) fn1(1) fn1('') è¿™æ ·æ”¹å˜åï¼Œé‡è½½çš„fn1å‡½æ•°åœ¨è°ƒç”¨çš„æ—¶å€™ä¼šè¿›è¡Œæ­£ç¡®çš„ç±»å‹æ£€æŸ¥ ä¸ºäº†è®©ç¼–è¯‘å™¨èƒ½å¤Ÿé€‰æ‹©æ­£ç¡®çš„æ£€æŸ¥ç±»å‹ï¼Œå®ƒä¸JavaScripté‡Œçš„å¤„ç†æµç¨‹ç›¸ä¼¼ã€‚ å®ƒæŸ¥æ‰¾é‡è½½åˆ—è¡¨ï¼Œå°è¯•ä½¿ç”¨ç¬¬ä¸€ä¸ªé‡è½½å®šä¹‰ã€‚ å¦‚æœåŒ¹é…çš„è¯å°±ä½¿ç”¨è¿™ä¸ªã€‚ å› æ­¤ï¼Œåœ¨å®šä¹‰é‡è½½çš„æ—¶å€™ï¼Œä¸€å®šè¦æŠŠæœ€ç²¾ç¡®çš„å®šä¹‰æ”¾åœ¨æœ€å‰é¢ ä¸Šé¢æˆ‘ä»¬ä»‹ç»äº†TypeScriptçš„å‡½æ•°ï¼Œç¬¬å…­èŠ‚æˆ‘ä»¬å°†ä»‹ç»æ³›å‹ æ–‡ç« å‚è€ƒTypeScriptä¸­æ–‡ç½‘ å½»åº•\bç†è§£this JavaScriptä¸­çš„this-é˜®ä¸€å³° ","link":"https://xiaoai7904.github.io/post/typescript-ru-men-jiao-cheng-wu-han/"},{"title":"TypeScriptå…¥é—¨æ•™ç¨‹(å››) - ç±»","content":"åœ¨ä¼ ç»ŸJavaScriptä¸­ç±»æ˜¯åŸºäºåŸå‹æ¨¡æ‹Ÿå‡ºæ¥çš„ç±»ï¼Œåœ¨\bES6ä¸­æ–°å¢classå…³é”®å­—æ¥ä¹¦å†™åŸºäºç±»çš„é¢å‘å¯¹è±¡(åº•å±‚è¿˜æ˜¯åŸºäºåŸå‹çš„æ–¹å¼\b) ç±» ç»´åŸºç™¾ç§‘ -&gt; åœ¨é¢å‘å¯¹è±¡ç¼–ç¨‹ï¼Œç±»ï¼ˆè‹±è¯­ï¼šclassï¼‰æ˜¯ä¸€ç§é¢å‘å¯¹è±¡è®¡ç®—æœºç¼–ç¨‹è¯­è¨€çš„æ„é€ ï¼Œæ˜¯åˆ›å»ºå¯¹è±¡çš„è“å›¾ï¼Œæè¿°äº†æ‰€åˆ›å»ºçš„å¯¹è±¡å…±åŒçš„å±æ€§å’Œæ–¹æ³• ES5ä¸­çš„\bæ¨¡æ‹Ÿç±»: function Fn1(name, age) { this.name = name this.age = age } Fn1.prototype = { constructor: Fn1, setAge: function(age) { this.age = age console.log(age) } } ES6ä¸­çš„ç±» class Fn1 { constructor(name, age) { this.name = name this.age = age } setAge(age) { this.age = age console.log(age) } } TypeScriptä¸­çš„ç±» class Fn1 { constructor(name: string, age: number) { this.name = name this.age = age } setAge(age: number): void{ this.age = age console.log(age) } } ç»§æ‰¿ åœ¨TypeScripté‡Œï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨å¸¸ç”¨çš„é¢å‘å¯¹è±¡æ¨¡å¼ã€‚ åŸºäºç±»çš„ç¨‹åºè®¾è®¡ä¸­ä¸€ç§æœ€åŸºæœ¬çš„æ¨¡å¼æ˜¯å…è®¸ä½¿ç”¨ç»§æ‰¿æ¥æ‰©å±•ç°æœ‰çš„ç±» class Fn1 { constructor(name: string, age: number) { this.name = name this.age = age } setAge(age: number): void { this.age = age console.log(this.age) } } class Fn2 extends Fn1{ constructor(name: string, age: number) { this.name = name this.age = age } } let fn1 = new Fn2('mickey', 26) fn1.setAge(27) // 27 ç»§æ‰¿æˆ‘ä»¬å¯ä»¥é€šè¿‡å…³é”®å­—extendsæ¥ç»§æ‰¿ ES5ä¸­çš„ç»§æ‰¿æ–¹å¼æ¨èå¤§å®¶çœ‹ä¸€ä¸‹\bé˜®ä¸€å³°çš„åšå®¢æ„é€ å‡½æ•°çš„ç»§æ‰¿ publicä¿®é¥°ç¬¦ C#è¦æ±‚å¿…é¡»æ˜ç¡®åœ°ä½¿ç”¨ publicæŒ‡å®šæˆå‘˜æ˜¯å¯è§çš„ã€‚ åœ¨TypeScripté‡Œï¼Œæˆå‘˜éƒ½é»˜è®¤ä¸º public class Fn1 { public name: string public constructor(name: string, age: number) { this.name = name this.age = age } public setAge(age: number): void { this.age = age } } privateä¿®é¥°ç¬¦ å½“æˆå‘˜è¢«æ ‡è®°æˆ privateæ—¶ï¼Œå®ƒå°±ä¸èƒ½åœ¨å£°æ˜å®ƒçš„ç±»çš„å¤–éƒ¨è®¿é—® class Fn1 { private name: string public constructor(name: string, age: number) { this.name = name } } new Fn1().name // error 'name'æ˜¯ç§æœ‰çš„ protected protectedä¿®é¥°ç¬¦ä¸ privateä¿®é¥°ç¬¦çš„è¡Œä¸ºå¾ˆç›¸ä¼¼ï¼Œä½†æœ‰ä¸€ç‚¹ä¸åŒï¼Œ protectedæˆå‘˜åœ¨æ´¾ç”Ÿç±»ä¸­ä»ç„¶å¯ä»¥è®¿é—® class Fn1 { protected name: string constructor(name: string, age: number) { this.name = name } } class Fn2 extends Fn1{ constructor(name: string) { super(name) } public getName() { console.log(this.name) } } new Fn2('mickey').name // error new Fn2('mickey').getName() // mickey æˆ‘ä»¬ä¸èƒ½åœ¨Fn1ç±»å¤–ä½¿ç”¨nameï¼Œä½†æ˜¯æˆ‘ä»¬å¯ä»¥åœ¨æ´¾ç”Ÿå‡ºæ¥çš„\bå®ä¾‹æ–¹æ³•ä¸Šä½¿ç”¨name readonlyä¿®é¥°ç¬¦ ä½ å¯ä»¥ä½¿ç”¨ readonlyå…³é”®å­—å°†å±æ€§è®¾ç½®ä¸ºåªè¯»çš„ã€‚ åªè¯»å±æ€§å¿…é¡»åœ¨å£°æ˜æ—¶æˆ–æ„é€ å‡½æ•°é‡Œè¢«åˆå§‹åŒ– class Fn1 { readonly name: string constructor(name: string) { this.name = name } } let f = new Fn2('mickey') f.name = 'xxx' // error nameæ˜¯åªè¯» å‚æ•°å±æ€§ class Fn1 { constructor(private name: string) { } getName(): string { console.log(this.name) return this.name } } ä¸Šé¢ä»£ç æˆ‘ä»¬é€šè¿‡åœ¨constructorå‚æ•°private name: stringæ¥è¿›è¡Œåˆ›å»ºå’Œåˆå§‹åŒ–,æˆ‘ä»¬å°±å£°æ˜å’Œèµ‹å€¼åˆå¹¶åœ¨ä¸€èµ·äº†ï¼Œpublicå’Œ protectedçš„ä½¿ç”¨ä¹Ÿæ˜¯ä¸€æ · å­˜å–å™¨ TypeScriptæ”¯æŒé€šè¿‡getters/settersæ¥æˆªå–å¯¹å¯¹è±¡æˆå‘˜çš„è®¿é—®ã€‚ å®ƒèƒ½å¸®åŠ©ä½ æœ‰æ•ˆçš„æ§åˆ¶å¯¹å¯¹è±¡æˆå‘˜çš„è®¿é—® let passcode = &quot;secret passcode&quot;; class Employee { private _fullName: string; get fullName(): string { return this._fullName; } set fullName(newName: string) { if (passcode &amp;&amp; passcode == &quot;secret passcode&quot;) { this._fullName = newName; } else { console.log(&quot;Error: Unauthorized update of employee!&quot;); } } } let employee = new Employee(); employee.fullName = &quot;Bob Smith&quot;; if (employee.fullName) { alert(employee.fullName); } å­˜å–å™¨è¦æ±‚ä½ å°†ç¼–è¯‘å™¨è®¾ç½®ä¸ºè¾“å‡ºECMAScript 5æˆ–æ›´é«˜ã€‚ ä¸æ”¯æŒé™çº§åˆ°ECMAScript 3ã€‚ å…¶æ¬¡ï¼Œåªå¸¦æœ‰getä¸å¸¦æœ‰setçš„å­˜å–å™¨è‡ªåŠ¨è¢«æ¨æ–­ä¸º readonlyã€‚ è¿™åœ¨ä»ä»£ç ç”Ÿæˆ .d.tsæ–‡ä»¶æ—¶æ˜¯æœ‰å¸®åŠ©çš„ï¼Œå› ä¸ºåˆ©ç”¨è¿™ä¸ªå±æ€§çš„ç”¨æˆ·ä¼šçœ‹åˆ°ä¸å…è®¸å¤Ÿæ”¹å˜å®ƒçš„å€¼ staticä¿®é¥°ç¬¦ æˆ‘ä»¬å¯ä»¥åˆ›å»ºç±»çš„é™æ€æˆå‘˜ï¼Œè¿™äº›å±æ€§å­˜åœ¨äºç±»æœ¬èº«ä¸Šé¢è€Œä¸æ˜¯ç±»çš„å®ä¾‹ä¸Š class Styles { static width = 200 constructor(public style: object) {} getWidth() { console.log(Styles.width) // 200 } } new Styles({height: 200}) æŠ½è±¡ç±» æŠ½è±¡ç±»åšä¸ºå…¶å®ƒæ´¾ç”Ÿç±»çš„åŸºç±»ä½¿ç”¨ã€‚ å®ƒä»¬ä¸€èˆ¬ä¸ä¼šç›´æ¥è¢«å®ä¾‹åŒ–ã€‚ ä¸åŒäºæ¥å£ï¼ŒæŠ½è±¡ç±»å¯ä»¥åŒ…å«æˆå‘˜çš„å®ç°ç»†èŠ‚ã€‚ abstractå…³é”®å­—æ˜¯ç”¨äºå®šä¹‰æŠ½è±¡ç±»å’Œåœ¨æŠ½è±¡ç±»å†…éƒ¨å®šä¹‰æŠ½è±¡æ–¹æ³• abstract class Department { constructor(public name: string) { } printName(): void { console.log('Department name: ' + this.name); } abstract printMeeting(): void; // å¿…é¡»åœ¨æ´¾ç”Ÿç±»ä¸­å®ç° } class AccountingDepartment extends Department { constructor() { super('Accounting and Auditing'); // åœ¨æ´¾ç”Ÿç±»çš„æ„é€ å‡½æ•°ä¸­å¿…é¡»è°ƒç”¨ super() } printMeeting(): void { console.log('The Accounting Department meets each Monday at 10am.'); } generateReports(): void { console.log('Generating accounting reports...'); } } let department: Department; // å…è®¸åˆ›å»ºä¸€ä¸ªå¯¹æŠ½è±¡ç±»å‹çš„å¼•ç”¨ department = new Department(); // é”™è¯¯: ä¸èƒ½åˆ›å»ºä¸€ä¸ªæŠ½è±¡ç±»çš„å®ä¾‹ department = new AccountingDepartment(); // å…è®¸å¯¹ä¸€ä¸ªæŠ½è±¡å­ç±»è¿›è¡Œå®ä¾‹åŒ–å’Œèµ‹å€¼ department.printName(); department.printMeeting(); department.generateReports(); // é”™è¯¯: æ–¹æ³•åœ¨å£°æ˜çš„æŠ½è±¡ç±»ä¸­ä¸å­˜åœ¨ ä¸Šé¢æˆ‘ä»¬ä»‹ç»äº†TypeScriptçš„ç±»ï¼Œç¬¬äº”èŠ‚æˆ‘ä»¬å°†ä»‹ç»å‡½æ•° æ–‡ç« å‚è€ƒTypeScriptä¸­æ–‡ç½‘ é˜®ä¸€å³°Es6 ","link":"https://xiaoai7904.github.io/post/typescript-ru-men-jiao-cheng-si-lei/"},{"title":"TypeScriptå…¥é—¨æ•™ç¨‹(ä¸‰) - æ¥å£","content":"TypeScriptçš„æ ¸å¿ƒåŸåˆ™ä¹‹ä¸€æ˜¯å¯¹å€¼æ‰€å…·æœ‰çš„ç»“æ„è¿›è¡Œç±»å‹æ£€æŸ¥ã€‚ å®ƒæœ‰æ—¶è¢«ç§°åšâ€œé¸­å¼è¾¨å‹æ³•â€æˆ–â€œç»“æ„æ€§å­ç±»å‹åŒ–â€ã€‚ åœ¨TypeScripté‡Œï¼Œæ¥å£çš„ä½œç”¨å°±æ˜¯ä¸ºè¿™äº›ç±»å‹å‘½åå’Œä¸ºä½ çš„ä»£ç æˆ–ç¬¬ä¸‰æ–¹ä»£ç å®šä¹‰å¥‘çº¦ åˆæ¬¡è§é¢æ¥å£ å…ˆçœ‹ä¸€æ®µå®ä¾‹ä»£ç  function fn1(styles: {wdith: number}): void { console.log(styles.wdith) } fn1({width: 100, height: 200}) ä¸Šé¢çš„ä»£ç å‡½æ•°æ¥å—ä¸€ä¸ªå‚æ•°åstylesé‡Œé¢æœ‰å±æ€§widthç±»å‹æ˜¯number,ä½†æ˜¯æˆ‘ä»¬ä¼ äº†å…¶ä»–å±æ€§ï¼Œ\bç¼–è¯‘å™¨åªä¼šæ£€æŸ¥é‚£äº›å¿…éœ€çš„å±æ€§æ˜¯å¦å­˜åœ¨ï¼Œç„¶è€Œï¼Œæœ‰äº›æ—¶å€™TypeScriptå´å¹¶ä¸ä¼šè¿™ä¹ˆå®½æ¾ æˆ‘ä»¬ä¿®æ”¹ä¸€ä¸‹ä¸Šé¢çš„ä¾‹å­ï¼Œé€šè¿‡æ¥å£åœ¨å®ç° interface Styles { width: number } function fn1(styles: Styles): void { console.log(styles.wdith) } fn1({width: 100, height: 200}) // è¿™é‡Œä¼šæŠ¥é”™è¯´heightæ²¡æœ‰å®šä¹‰åœ¨æ¥å£ä¸­ Stylesæ¥å£å°±æ˜¯åå­—ï¼Œç”¨æ¥æè¿°ä¸Šé¢ä¾‹å­é‡Œé¢çš„éœ€æ±‚ï¼Œå®ƒè¡¨ç¤ºæœ‰ä¸€ä¸ªwidthå±æ€§ç±»å‹ä¸º\bnumberï¼Œ éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œæˆ‘ä»¬åœ¨è¿™é‡Œå¹¶ä¸èƒ½åƒåœ¨å…¶å®ƒè¯­è¨€é‡Œä¸€æ ·ï¼Œè¯´ä¼ ç»™fn1çš„å¯¹è±¡å®ç°äº†è¿™ä¸ªæ¥å£ã€‚æˆ‘ä»¬åªä¼šå»å…³æ³¨å€¼çš„å¤–å½¢ã€‚ åªè¦ä¼ å…¥çš„å¯¹è±¡æ»¡è¶³ä¸Šé¢æåˆ°çš„å¿…è¦æ¡ä»¶ï¼Œé‚£ä¹ˆå®ƒå°±æ˜¯è¢«å…è®¸çš„ ç±»å‹æ£€æŸ¥å™¨ä¸ä¼šå»æ£€æŸ¥å±æ€§çš„é¡ºåºï¼Œåªè¦ç›¸åº”çš„å±æ€§å­˜åœ¨å¹¶ä¸”ç±»å‹ä¹Ÿæ˜¯å¯¹çš„å°±å¯ä»¥ å¯é€‰å±æ€§ æ¥å£é‡Œé¢çš„å±æ€§ä¸å…¨éƒ¨æ˜¯å¿…é¡»çš„ï¼Œæˆ‘ä»¬å¯ä»¥ä¸ä¼ ä¸€äº›å‚æ•° interface Styles { width: number, height?: number } function fn1(styles: Styles): void { console.log(style) } fn1({width: 100}) // ok å¸¦æœ‰å¯é€‰å±æ€§çš„æ¥å£ä¸æ™®é€šçš„æ¥å£å®šä¹‰å·®ä¸å¤šï¼Œåªæ˜¯åœ¨å¯é€‰å±æ€§åå­—å®šä¹‰çš„åé¢åŠ ä¸€ä¸ª?ç¬¦å· åªè¯»å±æ€§ ä¸€äº›å¯¹è±¡å±æ€§åªæ˜¯\båªè¯»ï¼Œä½ ä¸èƒ½ä¿®æ”¹å®ƒçš„å€¼ interface Styles { readonly width: number, readonly height: number } let styles: Styles = {width: 100, height: 200} styles.width = 200 // error widhtæ˜¯åªè¯»å±æ€§ä¸èƒ½ä¿®æ”¹ æ•°ç»„ä¹Ÿå¯ä»¥åˆ›å»ºåªè¯»ï¼ŒTypeScriptå…·æœ‰ReadonlyArrayç±»å‹ï¼Œå¯ä»¥ç¡®ä¿æ•°ç»„åˆ›å»ºåå†ä¹Ÿä¸èƒ½è¢«ä¿®æ”¹ï¼š let list1: number[] = [1, 2, 3, 4]; let ro: ReadonlyArray&lt;number&gt; = a; ro[0] = 12; // error! ro.push(5); // error! ro.length = 100; // error! list1 = ro; // error! ä¸Šé¢ä»£ç çš„æœ€åä¸€è¡Œï¼Œå¯ä»¥çœ‹åˆ°å°±ç®—æŠŠæ•´ä¸ªReadonlyArrayèµ‹å€¼åˆ°ä¸€ä¸ªæ™®é€šæ•°ç»„ä¹Ÿæ˜¯ä¸å¯ä»¥çš„ã€‚ ä½†æ˜¯ä½ å¯ä»¥ç”¨ç±»å‹æ–­è¨€é‡å†™ list1 = ro as number[]; å‡½æ•°ç±»å‹ \bæ¥å£å¯ä»¥æè¿°å¯¹è±¡ä¹Ÿå¯ä»¥æè¿°å‡½æ•°ç±»å‹ interface fn1 { (width: number, height: number): object&lt;{width: number, height: number}&gt; } ä¸Šé¢æˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ªå‡½æ•°ç±»å‹çš„æ¥å£ï¼Œä¸‹ä¾‹å±•ç¤ºäº†å¦‚ä½•åˆ›å»ºä¸€ä¸ªå‡½æ•°ç±»å‹çš„å˜é‡ï¼Œå¹¶å°†ä¸€ä¸ªåŒç±»å‹çš„å‡½æ•°èµ‹å€¼ç»™è¿™ä¸ªå˜é‡ let stylesFn: fn1 stylesFn = function(width: number, height: number){ return { width,height } } å¯ç´¢å¼•çš„ç±»å‹ ä¸ä½¿ç”¨æ¥å£æè¿°å‡½æ•°ç±»å‹å·®ä¸å¤šï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥æè¿°é‚£äº›èƒ½å¤Ÿâ€œé€šè¿‡ç´¢å¼•å¾—åˆ°â€çš„ç±»å‹ï¼Œæ¯”å¦‚styles[0]æˆ–styles[&quot;width&quot;],å¯ç´¢å¼•ç±»å‹å…·æœ‰ä¸€ä¸ª ç´¢å¼•ç­¾åï¼Œå®ƒæè¿°äº†å¯¹è±¡ç´¢å¼•çš„ç±»å‹ï¼Œè¿˜æœ‰ç›¸åº”çš„ç´¢å¼•è¿”å›å€¼ç±»å‹ interface Styles { [index: number]: number } let styles: Styles styles = [100, 200] let width: number = styles[0] ç±»ç±»å‹ ä¸C#æˆ–Javaé‡Œæ¥å£çš„åŸºæœ¬ä½œç”¨ä¸€æ ·ï¼ŒTypeScriptä¹Ÿèƒ½å¤Ÿç”¨å®ƒæ¥æ˜ç¡®çš„å¼ºåˆ¶ä¸€ä¸ªç±»å»ç¬¦åˆæŸç§å¥‘çº¦ interface Styles { width: number, setStyle(s: object) } class CreateStyles implements Styles { width: number constructor() {} setStyle(s: object): void {} } ç»§æ‰¿æ¥å£ å’Œç±»ä¸€æ ·ï¼Œæ¥å£ä¹Ÿå¯ä»¥ç›¸äº’ç»§æ‰¿ï¼Œæˆ‘ä»¬å¯ä»¥ä»ä¸€ä¸ªæ¥å£å¤åˆ¶æˆå‘˜åˆ°å¦ä¸€ä¸ªæ¥å£ interface Styles { width: number height: number } interface Styles1 extends Styles { color: string } let s = &lt;Styles1&gt;{} s.color = 'red' s.width = 100 s.height = 200 æ¥å£å¯ä»¥ç»§æ‰¿å¤šä¸ªæ¥å£ interface Styles { width: number height: number } interface Styles1 { border: string } interface Styles2 extends Styles, Styles1{ color: string } let s = &lt;Styles2&gt;{} s.color = 'red' s.width = 100 s.height = 200 s.border = '1px solid red' æ··åˆç±»å‹ æ¥å£å¯ä»¥åŒæ—¶ç”¨äºå¯¹è±¡å’Œå‡½æ•°ä½¿ç”¨ interface Styles { width: number reset(): void (style: object): void } function createStyles(): Styles { let initStyle = &lt;Styles&gt;function(style: object){} initStyle.width = 200 initStyle.reset = function() {} } åœ¨ä½¿ç”¨JavaScriptç¬¬ä¸‰æ–¹åº“çš„æ—¶å€™ï¼Œä½ å¯èƒ½éœ€è¦åƒä¸Šé¢é‚£æ ·å»å®Œæ•´åœ°å®šä¹‰ç±»å‹ ä¸Šé¢æˆ‘ä»¬ä»‹ç»äº†TypeScriptçš„æ¥å£ï¼Œç¬¬å››èŠ‚æˆ‘ä»¬å°†ä»‹ç»ç±» æ–‡ç« å‚è€ƒTypeScriptä¸­æ–‡ç½‘ ","link":"https://xiaoai7904.github.io/post/typescript-ru-men-jiao-cheng-san-jie-kou/"},{"title":"TypeScriptå…¥é—¨æ•™ç¨‹(äºŒ) - å˜é‡å£°æ˜","content":"åœ¨es5ä¸­jså£°æ˜å˜é‡æ˜¯é€šè¿‡varå…³é”®å­—è¿›è¡Œå˜é‡å£°æ˜ï¼Œåœ¨es6ä¸­æˆ‘ä»¬å¯ä»¥é€šè¿‡let,constä¸¤ä¸ªå…³é”®å­—æ¥è¿›è¡Œå£°æ˜ï¼Œtypescriptä¸­æ”¯æŒlet,constè¿›è¡Œå£°æ˜å˜é‡ Var åœ¨è¿‡å»çš„jsä¸­(es5ä¹‹å‰åŒ…æ‹¬es5)æˆ‘ä»¬å£°æ˜å˜é‡æ˜¯é€šè¿‡varæ¥å£°æ˜ä¸€ä¸ªå˜é‡ï¼Œä½†æ˜¯varå£°æ˜å˜é‡ä¹Ÿæœ‰å®ƒä¸è¶³çš„åœ°æ–¹ï¼Œæˆ‘ä»¬æ¥ä¸‹æ¥ä¼šè¯¦ç»†ä»‹ç»å®ƒ var a = 'mickey' é€šè¿‡ä¸Šé¢çš„æ–¹å¼æˆ‘ä»¬å°±å£°æ˜äº†ä¸€ä¸ªå˜é‡aç±»å‹æ˜¯å­—ç¬¦ä¸²å€¼ä¸º'mickey' æˆ‘ä»¬ä¹Ÿå¯ä»¥åœ¨å‡½æ•°ä¸­å£°æ˜å˜é‡ function fn1() { var age = 26 } å¦‚æœä½ æ˜¯åƒJava,Cç­‰å…¶ä»–è¯­è¨€å¼€å‘äººå‘˜ä¼šå¯¹jsä¸­çš„varå£°æ˜çš„å˜é‡ä½œç”¨åŸŸçœ‹èµ·æ¥å¾ˆå¥‡æ€ª function fn1(flag: boolean): void | number { if(flag) { var num = 26 } return num } fn1(false) // return undefined fn1(true) // 26 \bä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œå˜é‡numå£°æ˜åœ¨ifè¯­å¥ä¸­ï¼Œä½†æ˜¯æˆ‘ä»¬åœ¨\bè¯­å¥çš„å¤–é¢è¿˜æ˜¯å¯ä»¥è®¿é—®å®ƒï¼Œè¿™æ˜¯å› ä¸ºvarå£°æ˜å¯ä»¥åŒ…å«åœ¨å‡½æ•°ï¼Œæ¨¡å—ï¼Œå‘½åç©ºé—´å’Œå…¨å±€ä½œç”¨åŸŸå†…éƒ¨ä»»ä½•ä½ç½®è¢«è®¿é—®ï¼Œjsé€šè¿‡varå£°æ˜çš„\bå˜é‡æ˜¯æ²¡æœ‰å—çº§ä½œç”¨åŸŸ æˆ‘ä»¬åœ¨çœ‹ä¸€ä¸ªä¾‹å­ var a = document.getElementsByTagName(&quot;a&quot;); for(var i = 0; i &lt; 7; i++){ a[i].onclick = function(){ console.log(i) } } // è¿™é‡Œæˆ‘ä»¬ç‚¹å‡»aæ ‡ç­¾ä¼šè¾“å…¥ 7 // å› ä¸ºå¾ªç¯åˆ›å»ºäº†iå˜é‡\båé¢ä¼šç›´æ¥è¦†ç›–å‰é¢çš„å˜é‡å€¼ \b\bä¸ºäº†è§£å†³ä¸Šé¢çš„é—®é¢˜æˆ‘ä»¬å¯ä»¥é€šè¿‡é—­åŒ…æ¥è§£å†³ var a = document.getElementsByTagName(&quot;a&quot;); for(var i =0; i&lt;a.length; i++){ a[i].onclick = (function(i){ return function(){alert(i);} })(i); } è¿˜æœ‰ä¸€ç§æ–¹å¼é€šè¿‡es6ä¸­çš„letæ¥è§£å†³,æ¥ä¸‹æ¥æˆ‘ä»¬è¯¦ç»†ä»‹ç»let Let ä½¿ç”¨letå’Œä¹‹å‰varå£°æ˜å˜é‡ä¸€æ · let a = 'mickey' let b: number = 26 æˆ‘ä»¬é€šè¿‡letå£°æ˜\bçš„æ–¹å¼è§£å†³ä¸Šé¢çš„é—®é¢˜ var a = document.getElementsByTagName(&quot;a&quot;); for(let i = 0; i &lt; 7; i++){ a[i].onclick = function(){ console.log(i) } } // è¿™é‡Œæˆ‘ä»¬ç‚¹å‡»aæ ‡ç­¾ä¼šè¾“å…¥ 0,1,2,3,4,5,6,7 å¦‚æœä½ æƒ³äº†è§£æ¯”è¾ƒè¯¦ç»†letå¦‚æœä½¿ç”¨å’Œ\bæ–°çš„ç‰¹æ€§ä½ å¯ä»¥å‚è€ƒECMAScript 6 å…¥é—¨-é˜®ä¸€å³° Const ä½¿ç”¨Constå’Œä¹‹å‰varå£°æ˜å˜é‡ä¸€æ · const a = 'mickey' const b: number = 26 å¦‚æœä½ æƒ³äº†è§£æ¯”è¾ƒè¯¦ç»†Constå¦‚æœä½¿ç”¨å’Œ\bæ–°çš„ç‰¹æ€§ä½ å¯ä»¥å‚è€ƒECMAScript 6 å…¥é—¨-é˜®ä¸€å³° è§£æ„ æ•°ç»„è§£æ„ let input = [1, 2]; let [first, second] = input; console.log(first); // outputs 1 console.log(second); // outputs 2 function f([first, second]: [number, number]) { console.log(first); console.log(second); } f(input); let [first, ...rest] = [1, 2, 3, 4]; console.log(first); // outputs 1 console.log(rest); // outputs [ 2, 3, 4 ] å¯¹è±¡è§£æ„ let o = { a: &quot;foo&quot;, b: 12, c: &quot;bar&quot; }; let { a, b } = o; ({ a, b } = { a: &quot;baz&quot;, b: 101 }); ä¸Šé¢ç®€å•çš„ä»‹ç»äº†æ•°ç»„è§£æ„å’Œå¯¹è±¡è§£æ„ï¼Œå¦‚æœä½ æƒ³è¯¦æƒ…äº†è§£è¿˜æ˜¯æ¨èä½ å»ECMAScript 6 å…¥é—¨-é˜®ä¸€å³°è¿™ä¸ªå¯¹ES6è¿›è¡Œéå¸¸è¯¦ç»†çš„ä»‹ç»ï¼Œç›¸ä¿¡ä½ ä¼šå­¦åˆ°å¾ˆå¤šES6ä¸­æ‰€æœ‰æ–°ç‰¹æ€§ ä¸Šé¢æˆ‘ä»¬ä»‹ç»äº†TypeScriptçš„å˜é‡å£°æ˜ï¼Œç¬¬ä¸‰èŠ‚æˆ‘ä»¬å°†ä»‹ç»æ¥å£ æ–‡ç« å‚è€ƒTypeScriptä¸­æ–‡ç½‘ ","link":"https://xiaoai7904.github.io/post/typescript-ru-men-jiao-cheng-er-bian-liang-sheng-ming/"},{"title":"TypeScriptå…¥é—¨æ•™ç¨‹(ä¸€) - åŸºç¡€ç±»å‹","content":" Typescriptä¸­çš„åŸºç¡€ç±»å‹å’ŒJavaScriptä¸­å®šä¹‰çš„äº”ç§åŸºæœ¬ç±»å‹(Number,String,Boolean,Undefined,Null)å‡ ä¹ç›¸åŒ,è¿˜æ–°å¢äº†æšä¸¾ç±»å‹,æ¥ä¸‹æ¥æˆ‘ä»¬è¯¦ç»†ä»‹ç»TypeScriptä¸­çš„åŸºç¡€ç±»å‹ å¸ƒå°”å€¼(Boolean) å¸ƒå°”å€¼ç±»å‹å°±æ˜¯ç®€å•çš„true or false let isShow: boolean = true // :åé¢æ˜¯æŒ‡å®šå˜é‡isShowçš„ç±»å‹ï¼Œå¦‚æœä¿®æ”¹äº†isShowçš„å˜é‡ç±»å‹ä¸ºébooleanå€¼å°±ä¼šæŠ¥é”™ æ•°å­—(Number) Typescriptä¸­çš„æ•°å­—ç±»å‹å’ŒJavascriptä¸­çš„æ•°å­—ç±»å‹ä¸€æ ·éƒ½æ˜¯æµ®ç‚¹æ•° let age: number = 26 let money: number = 6000.04 let hex: number = 0xf00d let binary: number = 0b1010 let octal: number = 0o744 å­—ç¬¦ä¸²(String) Typescriptä¸­çš„å­—ç¬¦ä¸²å’ŒJavaScriptå­—ç¬¦ä¸²å†™æ³•ä¸€æ ·éƒ½æ˜¯é€šè¿‡åŒå¼•å·(&quot;&quot;)æˆ–è€…å•å¼•å·('')è¡¨ç¤ºå­—ç¬¦ä¸² let str1: string = 'hi' let str2: string = &quot;hi&quot; Nullå’ŒUndefined Typescriptä¸­nullå’Œundefinedä¸¤ä¸ªå„è‡ªæœ‰è‡ªå·±çš„ç±»å‹åˆ†åˆ«æ˜¯nullå’Œundefined let u: undefined = undefined let n: null = null // undefinedå’Œnullæ˜¯æ‰€æœ‰ç±»å‹çš„å­é›†ï¼Œå°±æ˜¯ä½ å¯ä»¥æŠŠæ‰€æœ‰ç±»å‹èµ‹å€¼æˆundefinedå’Œnull æ•°ç»„(Array) Typescripté‡Œé¢çš„æ•°ç»„å’ŒJavaScriptä¸­ä¸€æ ·éƒ½å¯ä»¥æ“ä½œæ•°ç»„å…ƒç´ ,åœ¨Typescriptä¸­æœ‰ä¸¤ç§å®šä¹‰æ•°ç»„çš„æ–¹å¼ // æ–¹æ³•ä¸€: let list1: string[] = ['name1', 'name2', 'name3'] let list2: number[] = [1,2,3] // æ–¹æ³•äºŒ: let list3: Array&lt;string&gt; = ['name1', 'name2', 'name3'] let list4: Array&lt;number&gt; = [1,2,3] å…ƒç»„(Tuple) å…ƒç»„ç±»å‹å…è®¸è¡¨ç¤ºä¸€ä¸ªå·²çŸ¥å…ƒç´ æ•°é‡å’Œç±»å‹çš„æ•°ç»„ï¼Œå„å…ƒç´ çš„ç±»å‹ä¸å¿…ç›¸åŒã€‚ æ¯”å¦‚ï¼Œä½ å¯ä»¥å®šä¹‰ä¸€å¯¹å€¼åˆ†åˆ«ä¸º stringå’Œnumberç±»å‹çš„å…ƒç»„ let t: [string, number] t = ['mickey', 26] // ok t = [26, 'mickey'] // error æšä¸¾(Enum) enumç±»å‹æ˜¯åœ¨JavaScriptç±»å‹ä¸­æ–°å¢çš„ç±»å‹, åƒC#ç­‰å…¶å®ƒè¯­è¨€ä¸€æ ·ï¼Œä½¿ç”¨æšä¸¾ç±»å‹å¯ä»¥ä¸ºä¸€ç»„æ•°å€¼èµ‹äºˆå‹å¥½çš„åå­— enum Style {width, height, color} let warp: Style = Style.width é»˜è®¤æƒ…å†µä¸‹ï¼Œæšä¸¾é‡Œé¢çš„å€¼æ˜¯ä»0å¼€å§‹ä¸ºå…ƒç´ ç¼–å·ï¼Œä¹Ÿå¯ä»¥æ‰‹åŠ¨çš„æŒ‡å®šæˆå‘˜çš„æ•°å€¼ enum Style {width = 1, height = 2, color = 4} let wrap: Style = Style.width // ä¹Ÿå¯ä»¥é€šè¿‡æšä¸¾çš„å€¼å¾—åˆ°å®ƒçš„åå­— let wrap: Style = Style[2] // height Any æˆ‘ä»¬ä¸å¸Œæœ›ç±»å‹æ£€æŸ¥å™¨å¯¹è¿™äº›å€¼è¿›è¡Œæ£€æŸ¥è€Œæ˜¯ç›´æ¥è®©å®ƒä»¬é€šè¿‡ç¼–è¯‘é˜¶æ®µçš„æ£€æŸ¥å°±å¯ä»¥ä½¿ç”¨anyç±»å‹æ¥æ ‡è®°è¿™äº›å˜é‡ let a: any = 'mickey' a = 26 a = function(){} let list1: Array&lt;any&gt; = [1,'name1', true] é€šè¿‡anyå®šä¹‰çš„å˜é‡åœ¨åé¢å¯ä»¥éšæ„èµ‹å€¼æˆå…¶ä»–ç±»å‹çš„å˜é‡,è¿™ä¸ªå°±å’Œjsä½¿ç”¨ä¸€æ ·ï¼Œjsæ˜¯å¼±ç±»å‹è¯­è¨€å®šä¹‰å˜é‡å¯ä»¥ä¸æŒ‡å®šç±»å‹è€Œä¸”å¯ä»¥éšæ„ä¿®æ”¹å˜é‡ç±»å‹ Void æŸç§ç¨‹åº¦ä¸Šæ¥è¯´ï¼Œvoidç±»å‹åƒæ˜¯ä¸anyç±»å‹ç›¸åï¼Œå®ƒè¡¨ç¤ºæ²¡æœ‰ä»»ä½•ç±»å‹ã€‚ å½“ä¸€ä¸ªå‡½æ•°æ²¡æœ‰è¿”å›å€¼æ—¶ï¼Œä½ é€šå¸¸ä¼šè§åˆ°å…¶è¿”å›å€¼ç±»å‹æ˜¯ void function fn(): void { console.log('test...') } // å£°æ˜å˜é‡ä¸ºvoid ä½ åªèƒ½ä¸ºå®ƒèµ‹å€¼ä¸º undefinedå’Œnull let a: void = undefined let b: void = null Never neverç±»å‹è¡¨ç¤ºçš„æ˜¯é‚£äº›æ°¸ä¸å­˜åœ¨çš„å€¼çš„ç±»å‹ã€‚ ä¾‹å¦‚ï¼Œ neverç±»å‹æ˜¯é‚£äº›æ€»æ˜¯ä¼šæŠ›å‡ºå¼‚å¸¸æˆ–æ ¹æœ¬å°±ä¸ä¼šæœ‰è¿”å›å€¼çš„å‡½æ•°è¡¨è¾¾å¼æˆ–ç®­å¤´å‡½æ•°è¡¨è¾¾å¼çš„è¿”å›å€¼ç±»å‹ï¼› å˜é‡ä¹Ÿå¯èƒ½æ˜¯ neverç±»å‹ï¼Œå½“å®ƒä»¬è¢«æ°¸ä¸ä¸ºçœŸçš„ç±»å‹ä¿æŠ¤æ‰€çº¦æŸæ—¶ neverç±»å‹æ˜¯ä»»ä½•ç±»å‹çš„å­ç±»å‹ï¼Œä¹Ÿå¯ä»¥èµ‹å€¼ç»™ä»»ä½•ç±»å‹ï¼›ç„¶è€Œï¼Œæ²¡æœ‰ç±»å‹æ˜¯neverçš„å­ç±»å‹æˆ–å¯ä»¥èµ‹å€¼ç»™neverç±»å‹ï¼ˆé™¤äº†neveræœ¬èº«ä¹‹å¤–ï¼‰ã€‚ å³ä½¿ anyä¹Ÿä¸å¯ä»¥èµ‹å€¼ç»™never // è¿”å›neverçš„å‡½æ•°å¿…é¡»å­˜åœ¨æ— æ³•è¾¾åˆ°çš„ç»ˆç‚¹ function fn1(): never { throw new Error('error') } // æ¨æ–­çš„è¿”å›å€¼ç±»å‹ä¸ºnever function fn2(): never { return error('error') } // è¿”å›neverçš„å‡½æ•°å¿…é¡»å­˜åœ¨æ— æ³•è¾¾åˆ°çš„ç»ˆç‚¹ function fn3(): never { while(true) {} } ä¸Šé¢æˆ‘ä»¬ä»‹ç»äº†TypeScriptçš„åŸºç¡€ç±»å‹ï¼Œç¬¬äºŒèŠ‚æˆ‘ä»¬å°†ä»‹ç»å˜é‡å£°æ˜ æ–‡ç« å‚è€ƒTypeScriptä¸­æ–‡ç½‘ ","link":"https://xiaoai7904.github.io/post/typescript-ru-men-jiao-cheng-yi-ji-chu-lei-xing/"},{"title":"Hello Gridea","content":"ğŸ‘ æ¬¢è¿ä½¿ç”¨ Gridea ï¼ âœï¸ Gridea ä¸€ä¸ªé™æ€åšå®¢å†™ä½œå®¢æˆ·ç«¯ã€‚ä½ å¯ä»¥ç”¨å®ƒæ¥è®°å½•ä½ çš„ç”Ÿæ´»ã€å¿ƒæƒ…ã€çŸ¥è¯†ã€ç¬”è®°ã€åˆ›æ„... ... Github Gridea ä¸»é¡µ ç¤ºä¾‹ç½‘ç«™ ç‰¹æ€§ğŸ‘‡ ğŸ“ ä½ å¯ä»¥ä½¿ç”¨æœ€é…·çš„ Markdown è¯­æ³•ï¼Œè¿›è¡Œå¿«é€Ÿåˆ›ä½œ ğŸŒ‰ ä½ å¯ä»¥ç»™æ–‡ç« é…ä¸Šç²¾ç¾çš„å°é¢å›¾å’Œåœ¨æ–‡ç« ä»»æ„ä½ç½®æ’å…¥å›¾ç‰‡ ğŸ·ï¸ ä½ å¯ä»¥å¯¹æ–‡ç« è¿›è¡Œæ ‡ç­¾åˆ†ç»„ ğŸ“‹ ä½ å¯ä»¥è‡ªå®šä¹‰èœå•ï¼Œç”šè‡³å¯ä»¥åˆ›å»ºå¤–éƒ¨é“¾æ¥èœå• ğŸ’» ä½ å¯ä»¥åœ¨ Windowsï¼ŒMacOS æˆ– Linux è®¾å¤‡ä¸Šä½¿ç”¨æ­¤å®¢æˆ·ç«¯ ğŸŒ ä½ å¯ä»¥ä½¿ç”¨ ğ–¦ğ—‚ğ—ğ—ğ—ğ–» ğ–¯ğ–ºğ—€ğ–¾ğ—Œ æˆ– Coding Pages å‘ä¸–ç•Œå±•ç¤ºï¼Œæœªæ¥å°†æ”¯æŒæ›´å¤šå¹³å° ğŸ’¬ ä½ å¯ä»¥è¿›è¡Œç®€å•çš„é…ç½®ï¼Œæ¥å…¥ Gitalk æˆ– DisqusJS è¯„è®ºç³»ç»Ÿ ğŸ‡¬ğŸ‡§ ä½ å¯ä»¥ä½¿ç”¨ä¸­æ–‡ç®€ä½“æˆ–è‹±è¯­ ğŸŒ ä½ å¯ä»¥ä»»æ„ä½¿ç”¨åº”ç”¨å†…é»˜è®¤ä¸»é¢˜æˆ–ä»»æ„ç¬¬ä¸‰æ–¹ä¸»é¢˜ï¼Œå¼ºå¤§çš„ä¸»é¢˜è‡ªå®šä¹‰èƒ½åŠ› ğŸ–¥ ä½ å¯ä»¥è‡ªå®šä¹‰æºæ–‡ä»¶å¤¹ï¼Œåˆ©ç”¨ OneDriveã€ç™¾åº¦ç½‘ç›˜ã€iCloudã€Dropbox ç­‰è¿›è¡Œå¤šè®¾å¤‡åŒæ­¥ ğŸŒ± å½“ç„¶ Gridea è¿˜å¾ˆå¹´è½»ï¼Œæœ‰å¾ˆå¤šä¸è¶³ï¼Œä½†è¯·ç›¸ä¿¡ï¼Œå®ƒä¼šä¸åœå‘å‰ ğŸƒ æœªæ¥ï¼Œå®ƒä¸€å®šä¼šæˆä¸ºä½ ç¦»ä¸å¼€çš„ä¼™ä¼´ å°½æƒ…å‘æŒ¥ä½ çš„æ‰åå§ï¼ ğŸ˜˜ Enjoy~ ","link":"https://xiaoai7904.github.io/post/hello-gridea/"},{"title":"JavaScriptå‡½æ•°","content":"æ¦‚å¿µ å‡½æ•°æ˜¯ç”±äº‹ä»¶é©±åŠ¨çš„æˆ–è€…å½“å®ƒè¢«è°ƒç”¨æ‰§è¡Œçš„å¯å¤ç”¨çš„ä»£ç å— jsæ”¯æŒä¸¤ç§å‡½æ•°ï¼š è¯­è¨€å†…éƒ¨çš„å‡½æ•°ï¼ˆå¦‚eval()ï¼‰ è‡ªå·±åˆ›å»ºçš„å‡½æ•° åœ¨jså‡½æ•°å†…éƒ¨å£°æ˜çš„å˜é‡(ä½¿ç”¨var)æ˜¯å±€éƒ¨å˜é‡ï¼Œåªèƒ½åœ¨å‡½æ•°å†…éƒ¨è®¿é—®å®ƒ ä½ å¯ä»¥åœ¨ä¸åŒçš„å‡½æ•°å£°æ˜ç›¸åŒçš„å˜é‡åç§°ï¼Œå› ä¸ºå®ƒä»¬æ˜¯å±€éƒ¨å˜é‡ï¼Œä¸¤ä¸ªä¸ä¼šç›¸äº’å½±å“ å‡½æ•°è°ƒç”¨ å››ç§è°ƒç”¨æ–¹å¼ï¼š ä½œä¸ºå‡½æ•° ä½œä¸ºæ–¹æ³• ä½œä¸ºæ„é€ å‡½æ•° é€šè¿‡call()å’Œapply() è¿”å›å‡½æ•°çš„å‡½æ•° å½“å‡½æ•°æ— æ˜ç¡®è¿”å›å€¼æ—¶ï¼Œè¿”å›undefined å½“å‡½æ•°ç»“æŸæœ‰return,è¿”å›ä»€ä¹ˆå°±æ˜¯ä»€ä¹ˆ æˆ‘ä»¬å¯ä»¥åˆ©ç”¨returnè¯­å¥å®ç°å°†å‡½æ•°è¿”å›å€¼ï¼Œæˆ–è€…å•çº¯çš„ç»“æŸå‡½æ•° åœ¨ä½¿ç”¨äº†returnçš„æ—¶å€™ï¼Œå‡½æ•°ä¼šç«‹å³åœæ­¢æ‰§è¡Œï¼Œå¦‚æœreturnäº†å€¼å‡ºå»ï¼Œå‡½æ•°çš„å€¼å°±ä¸ºè¿”å›çš„å€¼ å‡½æ•°é€šå¸¸ä¼šè¿”å›ä¸€ä¸ªå”¯ä¸€å€¼ï¼Œè¿™ä¸ªå€¼å¯èƒ½æ˜¯å¦ä¸€ä¸ªå‡½æ•° function fn(){ var a = 10; var b = 20; var c = a +ï½‚ï¼› return c; } console.log(fn());//è¾“å‡º30ï¼› //æˆ‘ä»¬å¯ä»¥è¿”å›çš„å‡½æ•°èµ‹å€¼ç»™ä½ ä¸ªå˜é‡ var fn1 = fn(); console.log(fn1);//è¾“å‡º30ï¼› //å¦‚æœæˆ‘ä»¬æƒ³è¿”å›çš„å‡½æ•°ç«‹å³æ‰§è¡Œæˆ‘ä»¬å¯ä»¥è¿™æ · var fn2 = fn()();//åœ¨åŠ ä¸€ä¸ªæ‹¬å·è¡¨ç¤ºç«‹å³æ‰§è¡Œå‡½æ•° jså‡½æ•°ä¼ é€’å‚æ•°éƒ½æ˜¯æŒ‰ç…§å€¼ä¼ é€’ã€‚ å¼•ç”¨ç±»å‹ï¼š jsä¸­å¼•ç”¨ç±»å‹éƒ½æ˜¯å­˜å‚¨åœ¨å †å†…å­˜ä¸­çš„å¯¹è±¡ï¼Œå˜é‡ä¸­ä¿å­˜çš„å®é™…åªæ˜¯ä¸€ä¸ªæŒ‡é’ˆï¼Œè¿™ä¸ªæŒ‡é’ˆæ‰§è¡Œå†…å­˜ä¸­çš„å¦ä¸€ä¸ªä½ç½®ï¼Œè¿™ä¸ªä½ç½®ä¿å­˜å¯¹è±¡ã€‚ åˆ›å»ºåŒ¿åå‡½æ•° function(){ console.log('æˆ‘æ˜¯ä¸€ä¸ªæ²¡æœ‰åå­—çš„å‡½æ•°') }() è¿™ç§å‡½æ•°çš„å¥½å¤„æ˜¯åœ¨æˆ‘ä»¬åªä½¿ç”¨ä¸€æ¬¡ï¼Œçœçš„åœ¨å»å®šä¹‰ä¸€ä¸ªå‡½æ•°åï¼Œé¿å…å‘½åå†²çªï¼Œjsä¸­æ²¡æœ‰å‘½åç©ºé—´çš„æ¦‚å¿µï¼Œå› æ­¤æœ‰ä¸¤ä¸ªç›¸åŒçš„å‡½æ•°åå­—ï¼Œjsä¼šæ‰§è¡Œåé¢é‚£ä¸ªå‡½æ•°ï¼Œå› ä¸ºjsè§£æä»£ç æ˜¯ä¸€æ®µä¸€æ®µçš„æ‰§è¡Œï¼Œä»–ä¼šæŒ‰ç…§æœ€åå‡ºç°çš„æ‰§è¡Œ é€šè¿‡è‡ªæˆ‘æ‰§è¡Œæ¥æ‰§è¡ŒåŒ¿åå‡½æ•°ï¼š (function(){ console.log('æ‰“å¼€ç¨‹åºæˆ‘é©¬ä¸Šå°±æ‰§è¡Œå•¦ï¼ï¼ï¼') })() æŠŠåŒ¿åå‡½æ•°è‡ªæˆ‘æ‰§è¡Œçš„è¿”å›å€¼èµ‹å€¼ç»™å˜é‡ï¼š var fn = (function(){ return 'hi'; })(); console.log(fn);//è¾“å‡ºhi è‡ªæˆ‘æ‰§è¡ŒåŒ¿åå‡½æ•°çš„ä¼ å‚ï¼š (function(a){ console.log(a);//è¾“å‡º10 })(10) jsåˆ›å»ºåŠ¨æ€å‡½æ•° jsæ”¯æŒåˆ›å»ºåŠ¨æ€å‡½æ•°ï¼ŒåŠ¨æ€å‡½æ•°å¿…é¡»ç”¨Functionå¯¹è±¡æ¥å®šä¹‰(Functionæ˜¯jsä¸­çš„ä¸€ä¸ªå¯¹è±¡ï¼Œä»–æ˜¯å¼•ç”¨ç±»å‹ï¼Œæ˜¯å›ºå®šä¸å˜çš„ï¼Œå¯¹è±¡ä¸­çš„Functionä¸­çš„'F'å¿…é¡»å¤§å°ï¼‰ åˆ›å»ºåŠ¨æ€å‡½æ•°çš„åŸºæœ¬æ ¼å¼ï¼švar å˜é‡å = new Function('å‚æ•°1','å‚æ•°2'ï¼Œ'å‚æ•°n','æ‰§è¡Œè¯­å¥') var fn = new Function('x','y','var sum ; sum = x + y ; return sum;') console.log(fn(2,3));//è¾“å‡º5 //ä¸Šé¢çš„ä»£ç ç­‰åŒäºï¼š var fn = function(x,y){ var sum; sum = x + y; return sum; } console.log(fn(2,3));//è¾“å‡º5 //ç¬¬ä¸€ä¸ªå‡½æ•°æ˜¯åŠ¨æ€å‡½æ•°ï¼Œç¬¬äºŒä¸ªå‡½æ•°æ˜¯é™æ€å‡½æ•° ä¸€èˆ¬æƒ…å†µä¸‹æˆ‘ä»¬ä¸ä½¿ç”¨åŠ¨æ€å‡½æ•° å›è°ƒå‡½æ•° å›è°ƒå‡½æ•°æ˜¯ä¸€ä¸ªå‡½æ•°çš„è°ƒç”¨çš„è¿‡ç¨‹ï¼Œç®€å•ç†è§£å°±æ˜¯ä¸€ä¸ªå‡½æ•°é‡Œé¢ä¼ å‚æ•°ï¼Œä¼ çš„å‚æ•°æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œç¬¬ä¸€ä¸ªå‡½æ•°æ‰§è¡Œå®Œæˆåå†å»æ‰§è¡Œç¬¬äºŒä¸ªå‡½æ•°ã€‚ function fn(fn1){ console.log('aa')ï¼› fn1(); } function fn1(){ console.log('bb'); } fn(fn1); //å…ˆæ‰§è¡Œfnå‡½æ•°ï¼Œfnå‡½æ•°æ‰§è¡Œå®Œæˆåå†æ‰§è¡Œfn1å‡½æ•° //è¿™é‡Œfn1å‡½æ•°å°±æ˜¯å›è°ƒå‡½æ•° æ–¹æ³•å’Œå‡½æ•°çš„åŒºåˆ« var arr = [1,2,3,4,5] var a =12; // å˜é‡ï¼šè‡ªç”±çš„ arr.a= 5; //å±æ€§ï¼šå±äºä¸€ä¸ªå¯¹è±¡ function show() //å‡½æ•°ï¼šè‡ªç”±çš„ { alert(â€˜aâ€™); } arr.fn = function() //æ–¹æ³•ï¼šå±äºä¸€ä¸ªå¯¹è±¡ { alert(â€˜bâ€™); } å…¶å®æ–¹æ³•å°±æ˜¯å‡½æ•°ï¼Œåªä¸è¿‡æ–¹æ³•æ˜¯æ‰€å±çš„å¯¹è±¡ JSå…¨å±€å‡½æ•° jsä¸­æœ‰7ä¸­å…¨å±€å‡½æ•°ï¼š escape( )ã€eval( )ã€isFinite( )ã€isNaN( )ã€parseFloat( )ã€parseInt( )ã€unescape( ) å‡½æ•°çš„å‡ ä¸ªä½œç”¨ ä½œä¸ºä¸€ä¸ªç±»æ„é€ å™¨ä½¿ç”¨ function Class(){}; Class.prototype = {}; var item = new Class(); ä½œä¸ºé—­åŒ…ä½¿ç”¨ (function(){ //ç‹¬ç«‹çš„ä½œç”¨åŸŸ })ï¼ˆï¼‰ ä½œä¸ºæ„é€ å‡½æ•°è°ƒç”¨ function Person(name,age){ this.name = name; this.age = age; } var per1 = new Person('xiaoming',19); var per2 = new Person('xiaohong',20); per1.name;//è¾“å‡º'xiaoming' per1.age;//è¾“å‡º19 per2.name;//è¾“å‡º'xiaohong' per2.age;//è¾“å‡º20 å¯ä»¥ä½¿ç”¨ new è¿ç®—ç¬¦ç»“åˆåƒ Object()ã€Date() å’Œ Function() è¿™æ ·çš„é¢„å®šä¹‰çš„æ„é€ å‡½æ•°æ¥åˆ›å»ºå¯¹è±¡å¹¶å¯¹å…¶åˆå§‹åŒ–ã€‚é¢å‘å¯¹è±¡çš„ç¼–ç¨‹å…¶å¼ºæœ‰åŠ›çš„ç‰¹å¾æ˜¯å®šä¹‰è‡ªå®šä¹‰æ„é€ å‡½æ•°ä»¥åˆ›å»ºè„šæœ¬ä¸­ä½¿ç”¨çš„è‡ªå®šä¹‰å¯¹è±¡çš„èƒ½åŠ›ã€‚åˆ›å»ºäº†è‡ªå®šä¹‰çš„æ„é€ å‡½æ•°ï¼Œè¿™æ ·å°±å¯ä»¥åˆ›å»ºå…·æœ‰å·²å®šä¹‰å±æ€§çš„å¯¹è±¡ã€‚ ä¼˜ç¼ºç‚¹ï¼š ä½¿ç”¨æ„é€ å™¨å‡½æ•°çš„ä¼˜ç‚¹æ˜¯ï¼Œå®ƒå¯ä»¥æ ¹æ®å‚æ•°æ¥æ„é€ ä¸åŒçš„å¯¹è±¡ã€‚ ç¼ºç‚¹æ˜¯æ„é€ æ—¶æ¯ä¸ªå®ä¾‹å¯¹è±¡éƒ½ä¼šç”Ÿæˆé‡å¤è°ƒç”¨å¯¹è±¡çš„æ–¹æ³•ï¼Œé€ æˆäº†å†…å­˜çš„æµªè´¹ ä½œä¸ºå€¼çš„å‡½æ•° JSä¸­å‡½æ•°æ˜¯ä¸€ç§è¯­æ³•ï¼Œä¹Ÿæ˜¯ä¸€ä¸ªå€¼ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠå‡½æ•°èµ‹å€¼ç»™ä¸€ä¸ªå˜é‡ function fn(x,y){ return x * y } var newFn = fn(); fn(2,3);//è¾“å‡º6 newFn(3,4);//è¾“å‡º12 å‡½æ•°ä¹Ÿå¯ä»¥èµ‹å€¼ç»™ä¸€ä¸ªå¯¹è±¡çš„å±æ€§ï¼Œæˆ‘ä»¬ç§°ä¸ºæ–¹æ³• function fn(x,y){ return x * y } var obj = {};//æˆ‘ä»¬è¿™é‡Œå®šä¹‰äº†ä¸€ä¸ªç©ºå¯¹è±¡obj obj.seque = fn(2.3);//æˆ‘ä»¬ç»™ç©ºå¯¹è±¡objåŠ¨æ€èµ‹å€¼äº†ä¸€ä¸ªå±æ€§ä¸ºseque é«˜é˜¶å‡½æ•° è¿™é‡Œçš„é«˜é˜¶å‡½æ•°å¯ä¸æ˜¯é«˜æ•°é‡Œçš„é‚£ä¸ªé«˜é˜¶å‡½æ•°ï¼Œæ‰€è°“é«˜é˜¶å‡½æ•°å°±æ˜¯æ“ä½œå‡½æ•°çš„å‡½æ•°ï¼Œå®ƒæ¥æ”¶ä¸€ä¸ªæˆ–å¤šä¸ªå‡½æ•°ä½œä¸ºå‚æ•°ï¼Œå¹¶è¿”å›æ–°å‡½æ•° call()å’Œapply() call()å‡½æ•°é‡Œé¢ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯æ‰§è¡Œä¸Šä¸‹æ–‡ï¼Œç¬¬äºŒä¸ªæ˜¯ä¼ é€’çš„å‚æ•°ã€‚ã€‚ã€‚å¯ä»¥ä¼ é€’å¤šä¸ªå‚æ•° function.call(this,1,2,3); apply()å‡½æ•°é‡Œé¢ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯æ‰§è¡Œä¸Šä¸‹æ–‡ï¼Œç¬¬äºŒä¸ªæ˜¯ä¸€ä¸ªæ•°ç»„å¯¹è±¡ã€‚ function.apply(this,[1,2,3]); è¿™éƒ¨åˆ†åé¢è¿˜è¦å®Œå–„ï¼Œè¿™é‡Œåªæ˜¯ç®€å•çš„ä»‹ç»ä¸€ä¸‹ add 2016.8.12 å‡½æ•°é‡Œé¢çš„å‚æ•°(arguments) å½“å‡½æ•°è¢«è°ƒç”¨çš„æ—¶å€™ï¼Œä¼šå¾—åˆ°ä¸€ä¸ªå‚æ•°æ•°ç»„ï¼Œé‚£å°±æ˜¯argumentsæ•°ç»„ï¼Œé€šè¿‡å®ƒï¼Œå‡½æ•°å¯ä»¥è®¿é—®æ‰€æœ‰å®ƒè¢«è°ƒç”¨æ—¶ä¼ é€’ç»™å®ƒçš„å‚æ•° var sum = function(){ var i ,sum =0; for(i = 0;i&lt;arguments.length;i+=1){ sum+=arguments[i]; } return sum; }; console.log(sum(4,5,23,13,35,46,-10));//116 å®é™…ä¸Šï¼Œargumentså¹¶ä¸æ˜¯ä¸€ä¸ªçœŸæ­£çš„æ•°ç»„ï¼Œå®ƒåªæ˜¯ä¸€ä¸ªç±»æ•°ç»„çš„å¯¹è±¡ï¼Œå®ƒæ‹¥æœ‰ä¸€ä¸ªlengthå±æ€§ï¼Œä½†ä»–ç¼ºå°‘æ‰€æœ‰æ•°ç»„çš„æ–¹æ³•ã€‚å¦å¤–ï¼Œargumentså¯¹è±¡çš„é•¿åº¦æ˜¯ç”±ä¼ å…¥çš„å‚æ•°ä¸ªæ•°å†³å®šçš„ï¼Œè€Œä¸æ˜¯ç”±å®šä¹‰å‡½æ•°æ—¶çš„å‘½åå‚æ•°çš„ä¸ªæ•°å†³å®šçš„ å‡½æ•°åœ¨å®šä¹‰æˆ–è€…å£°æ˜çš„æ—¶å€™ï¼Œæ‰€æœ‰çš„å‚æ•°éƒ½æ˜¯å½¢å‚ï¼Œå› æ­¤ï¼Œæˆ‘ä»¬å¯ä»¥æ ¹æ®å®é™…æƒ…å†µæ¥å‘½åå‚æ•°ï¼Œå‡½æ•°ä¹Ÿåªæœ‰åœ¨è¢«è°ƒç”¨æ—¶æ‰ä¼šä¼ å…¥å®å‚ã€‚è€Œæ¯ä¸ªå‡½æ•°åœ¨è¢«è°ƒç”¨æ—¶éƒ½ä¼šè‡ªåŠ¨å–å¾—ä¸¤ä¸ªç‰¹æ®Šå˜é‡ï¼šthis å’Œ arguments é€’å½’å‡½æ•° å‡½æ•°çš„é€’å½’ï¼Œå³ä¸€ä¸ªå‡½æ•°åœ¨é€šè¿‡åå­—è°ƒç”¨è‡ªèº«çš„æƒ…å†µä¸‹æ„æˆçš„ ç§æœ‰å˜é‡å’Œç§æœ‰å‡½æ•° å®šä¹‰åœ¨å‡½æ•°å†…éƒ¨çš„å˜é‡å’Œå‡½æ•°ï¼Œå¦‚æœä¸å¯¹å¤–æä¾›æ¥å£ï¼Œå¤–é¢æ˜¯è®¿é—®ä¸åˆ°è¿™äº›å‡½æ•°å’Œå˜é‡çš„ï¼Œè¿™å°±å«åšç§æœ‰å˜é‡å’Œç§æœ‰å‡½æ•° function Fn(){ var a = 10;//ç§æœ‰å˜é‡ var fn1 = function(){};//ç§æœ‰å‡½æ•° } var newFn = new Fn(); console.log(newFn.a);//undefined console.log(newFn.fn1);//undefined é™æ€å˜é‡å’Œå‡½æ•° å½“å®šä¹‰ä¸€ä¸ªå‡½æ•°åé€šè¿‡ç‚¹å· â€œ.â€ä¸ºå…¶æ·»åŠ çš„å±æ€§å’Œå‡½æ•°ï¼Œé€šè¿‡å¯¹è±¡æœ¬èº«ä»ç„¶å¯ä»¥è®¿é—®å¾—åˆ°ï¼Œä½†æ˜¯å…¶å®ä¾‹å´è®¿é—®ä¸åˆ°ï¼Œè¿™æ ·çš„å˜é‡å’Œå‡½æ•°åˆ†åˆ«è¢«ç§°ä¸ºé™æ€å˜é‡å’Œé™æ€å‡½æ•°ã€‚ function Obj(){}; Obj.num = 72;//é™æ€å˜é‡ Obj.fn = function(){}//é™æ€å‡½æ•° alert(Obj.num);//72 alert(typeof Obj.fn)//function var t = new Obj(); alert(t.name);//undefined alert(typeof t.fn);//undefined å®ä¾‹å˜é‡å’Œå‡½æ•° åœ¨é¢å‘å¯¹è±¡ç¼–ç¨‹ä¸­é™¤äº†ä¸€äº›åº“å‡½æ•°æˆ‘ä»¬è¿˜æ˜¯å¸Œæœ›åœ¨å¯¹è±¡å®šä¹‰çš„æ—¶å€™åŒæ—¶å®šä¹‰ä¸€äº›å±æ€§å’Œæ–¹æ³•ï¼Œå®ä¾‹åŒ–åå¯ä»¥è®¿é—®ï¼Œjsä¹Ÿèƒ½åšåˆ°è¿™æ · function Box(){ this.a=[]; //å®ä¾‹å˜é‡ this.fn=function(){ //å®ä¾‹æ–¹æ³• } } console.log(typeof Box.a); //undefined console.log(typeof Box.fn); //undefined var box=new Box(); console.log(typeof box.a); //object console.log(typeof box.fn); //function ä¸ºå®ä¾‹å˜é‡å’Œæ–¹æ³•æ·»åŠ æ–°çš„æ–¹æ³•å’Œå±æ€§ function Box(){ this.a=[]; //å®ä¾‹å˜é‡ this.fn=function(){ //å®ä¾‹æ–¹æ³• } } var box1=new Box(); box1.a.push(1); box1.fn={}; console.log(box1.a); //[1] console.log(typeof box1.fn); //object var box2=new Box(); console.log(box2.a); //[] console.log(typeof box2.fn); //function åœ¨box1ä¸­ä¿®æ”¹äº†aå’Œfnï¼Œè€Œåœ¨box2ä¸­æ²¡æœ‰æ”¹å˜ï¼Œç”±äºæ•°ç»„å’Œå‡½æ•°éƒ½æ˜¯å¯¹è±¡ï¼Œæ˜¯å¼•ç”¨ç±»å‹ï¼Œè¿™å°±è¯´æ˜box1ä¸­çš„å±æ€§å’Œæ–¹æ³•ä¸box2ä¸­çš„å±æ€§ä¸æ–¹æ³•è™½ç„¶åŒåä½†å´ä¸æ˜¯ä¸€ä¸ªå¼•ç”¨ï¼Œè€Œæ˜¯å¯¹Boxå¯¹è±¡å®šä¹‰çš„å±æ€§å’Œæ–¹æ³•çš„ä¸€ä¸ªå¤åˆ¶ã€‚ è¿™ä¸ªå¯¹å±æ€§æ¥è¯´æ²¡æœ‰ä»€ä¹ˆé—®é¢˜ï¼Œä½†æ˜¯å¯¹äºæ–¹æ³•æ¥è¯´é—®é¢˜å°±å¾ˆå¤§äº†ï¼Œå› ä¸ºæ–¹æ³•éƒ½æ˜¯åœ¨åšå®Œå…¨ä¸€æ ·çš„åŠŸèƒ½ï¼Œä½†æ˜¯å´åˆä¸¤ä»½å¤åˆ¶ï¼Œå¦‚æœä¸€ä¸ªå‡½æ•°å¯¹è±¡æœ‰ä¸Šåƒå’Œå®ä¾‹æ–¹æ³•ï¼Œé‚£ä¹ˆå®ƒçš„æ¯ä¸ªå®ä¾‹éƒ½è¦ä¿æŒä¸€ä»½ä¸Šåƒä¸ªæ–¹æ³•çš„å¤åˆ¶ï¼Œè¿™æ˜¾ç„¶æ˜¯ä¸ç§‘å­¦çš„ï¼Œè¿™å¯è‚¿ä¹ˆåŠå‘¢ï¼Œprototypeåº”è¿è€Œç”Ÿã€‚ prototypeå±æ€§ åŸºæœ¬æ¦‚å¿µï¼š æˆ‘ä»¬åˆ›å»ºçš„æ¯ä¸ªå‡½æ•°éƒ½æœ‰ä¸€ä¸ªprototypeå±æ€§ï¼Œè¿™ä¸ªå±æ€§æ˜¯ä¸€ä¸ªæŒ‡é’ˆï¼ŒæŒ‡å‘ä¸€ä¸ªå¯¹è±¡ï¼Œè¿™ä¸ªå¯¹è±¡çš„ç”¨é€”æ˜¯åŒ…å«å¯ä»¥ç”±ç‰¹å®šç±»å‹çš„æ‰€æœ‰å®ä¾‹å…±äº«çš„å±æ€§å’Œæ–¹æ³•ã€‚é‚£ä¹ˆï¼Œprototypeå°±æ˜¯é€šè¿‡è°ƒç”¨æ„é€ å‡½æ•°è€Œåˆ›å»ºçš„é‚£ä¸ªå¯¹è±¡å®ä¾‹çš„åŸå‹å¯¹è±¡ã€‚ ä½¿ç”¨åŸå‹çš„å¥½å¤„æ˜¯å¯ä»¥è®©å¯¹è±¡å®ä¾‹å…±äº«å®ƒæ‰€åŒ…å«çš„å±æ€§å’Œæ–¹æ³•ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œä¸å¿…åœ¨æ„é€ å‡½æ•°ä¸­æ·»åŠ å®šä¹‰å¯¹è±¡ä¿¡æ¯ï¼Œè€Œæ˜¯å¯ä»¥ç›´æ¥å°†è¿™äº›ä¿¡æ¯æ·»åŠ åˆ°åŸå‹ä¸­ã€‚ä½¿ç”¨æ„é€ å‡½æ•°çš„ä¸»è¦é—®é¢˜å°±æ˜¯æ¯ä¸ªæ–¹æ³•éƒ½è¦åœ¨æ¯ä¸ªå®ä¾‹ä¸­åˆ›å»ºä¸€éã€‚ åœ¨JavaScriptä¸­,ä¸€å…±æœ‰ä¸¤ç§ç±»å‹çš„å€¼,åŸå§‹å€¼å’Œå¯¹è±¡å€¼ã€‚æ¯ä¸ªå¯¹è±¡éƒ½æœ‰ä¸€ä¸ªå†…éƒ¨å±æ€§ prototype ,æˆ‘ä»¬é€šå¸¸ç§°ä¹‹ä¸ºåŸå‹ã€‚åŸå‹çš„å€¼å¯ä»¥æ˜¯ä¸€ä¸ªå¯¹è±¡,ä¹Ÿå¯ä»¥æ˜¯nullã€‚å¦‚æœå®ƒçš„å€¼æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œåˆ™è¿™ä¸ªå¯¹è±¡ä¹Ÿä¸€å®šæœ‰è‡ªå·±çš„åŸå‹ã€‚è¿™æ ·å°±å½¢æˆäº†ä¸€æ¡çº¿æ€§çš„é“¾ï¼Œæˆ‘ä»¬ç§°ä¹‹ä¸ºåŸå‹é“¾ ","link":"https://xiaoai7904.github.io/post/javascript-han-shu/"}]}