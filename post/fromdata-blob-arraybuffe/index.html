<html>
  <head>
    <meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>FromData Blob ArrayBuffe | xiaoai</title>
<meta name="description" content="记录美好生活" />
<link rel="shortcut icon" href="https://xiaoai7904.github.io//favicon.ico?v=1597567399252">
<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.2/css/all.css" integrity="sha384-fnmOCqbTlWIlj8LyTjo7mOUStjsKC4pOpQbqyi7RrhN7udi9RwhKkMHpvLbHG9Sr" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.10.0/katex.min.css">
<link rel="stylesheet" href="https://xiaoai7904.github.io//styles/main.css">

<script src="https://cdn.bootcss.com/highlight.js/9.12.0/highlight.min.js"></script>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Droid+Serif:400,700">



  </head>
  <body>
    <div class="main">
      <div class="main-content">
        <div class="site-header">
  <a href="https://xiaoai7904.github.io/">
  <img class="avatar" src="https://xiaoai7904.github.io//images/avatar.png?v=1597567399252" alt="">
  </a>
  <h1 class="site-title">
    xiaoai
  </h1>
  <p class="site-description">
    记录美好生活
  </p>
  <div class="menu-container">
    
      
        <a href="/" class="menu">
          首页
        </a>
      
    
      
        <a href="/archives" class="menu">
          归档
        </a>
      
    
      
        <a href="/tags" class="menu">
          标签
        </a>
      
    
      
        <a href="/post/about" class="menu">
          关于
        </a>
      
    
  </div>
  <div class="social-container">
    
      
    
      
    
      
    
      
    
      
    
  </div>
</div>

        <div class="post-detail">
          <article class="post">
            <h2 class="post-title">
              FromData Blob ArrayBuffe
            </h2>
            <div class="post-info">
              <span>
                2019-11-24
              </span>
              <span>
                4 min read
              </span>
              
                <a href="https://xiaoai7904.github.io/tag/4kuYU9V7d/" class="post-tag">
                  # JavaScript
                </a>
              
            </div>
            
              <img class="post-feature-image" src="https://xiaoai7904.github.io//post-images/fromdata-blob-arraybuffe.png" alt="">
            
            <div class="post-content-wrapper">
              <div class="post-content">
                <p>利用<code>FormData</code>对象,我们可以通过<code>JavaScript</code>用一些键值对来模拟一系列表单控件,我们还可以使用<code>XMLHttpRequest</code>的<code>send()</code>方法来异步的提交这个&quot;表单&quot;,<code>Blob</code>对象表示一个不可变、原始数据的类文件对象,<code>ArrayBuffer</code>对象用来表示通用的、固定长度的原始二进制数据缓冲区</p>
<!--more-->
<h3 id="formdata">FormData</h3>
<blockquote>
<p>XMLHttpRequest Level 2添加了一个新的接口FormData.利用FormData对象,我们可以通过JavaScript用一些键值对来模拟一系列表单控件,我们还可以使用XMLHttpRequest的send()方法来异步的提交这个&quot;表单&quot;.比起普通的ajax,使用FormData的最大优点就是我们可以异步上传一个二进制文件</p>
</blockquote>
<p>上文是<a href="https://developer.mozilla.org">MDN</a>官方解释,在实际开发中我们可以利用它来进行做上传文件操作,下面代码简单介绍了<code>FormData</code>如何使用</p>
<pre><code class="language-javascript">let xhr= new XMLHttpRequest();
let fromdata = new FormData()
formdata.append(&quot;token&quot;, 'ddddd-ddd-dd');
xhr.open(&quot;POST&quot;, &quot;xxx.php&quot;);
xhr.send();
</code></pre>
<h4 id="api">api</h4>
<p><strong>append() 给当前FormData对象添加一个键/值对</strong><br>
<code>void append(DOMString name, Blob value, optional DOMString filename)</code></p>
<ul>
<li>name: 字段名称</li>
<li>value: 字段值.可以是,或者一个字符串,如果全都不是,则该值会被自动转换成字符串</li>
<li>filename[可选] 指定文件的文件名,当value参数被指定为一个Blob对象或者一个File对象时,该文件名会被发送到服务器上,对于Blob对象来说,这个值默认为&quot;blob&quot;)</li>
</ul>
<h3 id="blob">Blob</h3>
<p><code>Blob</code>即二进制大数据对象,提供相应的接口,其他操作二进制的对象都是建立在<code>Blob</code>基础之上,并继承了该对象的属性和方法</p>
<ul>
<li>使用 Blob 创建一个指向类型化数组的URL</li>
</ul>
<pre><code class="language-javascript">var typedArray = GetTheTypedArraySomehow();
var blob = new Blob([typedArray], {type: &quot;application/octet-binary&quot;});// 传入一个合适的MIME类型
var url = URL.createObjectURL(blob);
// 会产生一个类似blob:d3958f5c-0777-0845-9dcf-2cb28783acaf 这样的URL字符串
// 你可以像使用一个普通URL那样使用它，比如用在img.src上
</code></pre>
<h4 id="api-2">api</h4>
<ul>
<li><code>Blob.size</code>[只读]  <code>Blob</code>对象中所包含数据的大小（字节）</li>
<li><code>Blob.type</code>[只读]  一个字符串，表明该Blob对象所包含数据的MIME类型。如果类型未知，则该值为空字符串</li>
<li><code>Blob.slice(start,end)</code> 返回一个新的 Blob对象，包含了源 Blob对象中指定范围内的数据</li>
</ul>
<h3 id="arraybuffer">ArrayBuffer</h3>
<p><code>ArrayBuffer</code>对象用来表示通用的、固定长度的原始二进制数据缓冲区。<code>ArrayBuffer</code>不能直接操作，而是要通过类型数组对象或 DataView 对象来操作，它们会将缓冲区中的数据表示为特定的格式，并通过这些格式来读写缓冲区的内容</p>
<pre><code class="language-javascript">// 创建一个8字节的ArrayBuffer  
var b = new ArrayBuffer(8);  
  
// 创建一个指向b的视图v1，采用Int32类型，开始于默认的字节索引0，直到缓冲区的末尾  
var v1 = new Int32Array(b);  
  
// 创建一个指向b的视图v2，采用Uint8类型，开始于字节索引2，直到缓冲区的末尾  
var v2 = new Uint8Array(b, 2);  
  
// 创建一个指向b的视图v3，采用Int16类型，开始于字节索引2，长度为2  
var v3 = new Int16Array(b, 2, 2);  
</code></pre>
<h4 id="api-3">api</h4>
<ul>
<li>
<p><code>new ArrayBuffer(length)</code><br>
<code>length</code>要创建的 ArrayBuffer 的大小，单位为字节,返回一个指定大小的 ArrayBuffer 对象，其内容被初始化为 0</p>
</li>
<li>
<p><code>get ArrayBuffer[@@species]</code><br>
返回 ArrayBuffer 的构造函数</p>
</li>
<li>
<p><code>ArrayBuffer.isView(arg)</code><br>
如果参数是 ArrayBuffer 的视图实例则返回 true，例如 类型数组对象 或 DataView 对象；否则返回 false</p>
</li>
<li>
<p><code>ArrayBuffer.transfer(oldBuffer [, newByteLength])</code><br>
返回一个新的 ArrayBuffer 对象，其内容取自 oldBuffer 中的数据，并且根据 newByteLength 的大小对数据进行截取或补 0</p>
</li>
<li>
<p><code>ArrayBuffer.slice()</code><br>
返回一个新的 ArrayBuffer ，它的内容是这个 ArrayBuffer 的字节副本，从begin（包括），到end（不包括）。如果begin或end是负数，则指的是从数组末尾开始的索引，而不是从头开始</p>
</li>
</ul>
<blockquote>
<p>文章参考<br>
<a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/ArrayBuffer">ArrayBuffer-MDN</a><br>
<a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Blob">Blob-MDN</a><br>
<a href="https://developer.mozilla.org/zh-CN/docs/Web/API/FormData">FormData-MDN</a></p>
</blockquote>

              </div>
              <div class="toc-container">
                <ul class="markdownIt-TOC">
<li>
<ul>
<li>
<ul>
<li><a href="#formdata">FormData</a>
<ul>
<li><a href="#api">api</a></li>
</ul>
</li>
<li><a href="#blob">Blob</a>
<ul>
<li><a href="#api-2">api</a></li>
</ul>
</li>
<li><a href="#arraybuffer">ArrayBuffer</a>
<ul>
<li><a href="#api-3">api</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>

              </div>
            </div>
          </article>
        </div>

        
          <div class="next-post">
            <div class="next">下一篇</div>
            <a href="https://xiaoai7904.github.io/post/yi-dong-duan-kai-zhong-yu-dao-de-wen-ti-zheng-li/">
              <h3 class="post-title">
                移动端开中遇到的问题整理
              </h3>
            </a>
          </div>
        

        
          
            <link rel="stylesheet" href="https://unpkg.com/gitalk/dist/gitalk.css">
<script src="https://unpkg.com/gitalk/dist/gitalk.min.js"></script>

<div id="gitalk-container"></div>

<script>

  var gitalk = new Gitalk({
    clientID: '542a046d9cd2c40810d6',
    clientSecret: '3f40254747f30cec544eed0010a8671076c68908',
    repo: 'xiaoai7904.github.io',
    owner: 'xiaoai7904',
    admin: ['xiaoai7904'],
    id: (location.pathname).substring(0, 49),      // Ensure uniqueness and length less than 50
    distractionFreeMode: false  // Facebook-like distraction free mode
  })

  gitalk.render('gitalk-container')

</script>

          

          
        

        <div class="site-footer">
  Powered by <a href="https://github.com/getgridea/gridea" target="_blank">Gridea</a> | 
  <a class="rss" href="https://xiaoai7904.github.io//atom.xml" target="_blank">RSS</a>
</div>

<script>
  hljs.initHighlightingOnLoad()

  let mainNavLinks = document.querySelectorAll(".markdownIt-TOC a");

  // This should probably be throttled.
  // Especially because it triggers during smooth scrolling.
  // https://lodash.com/docs/4.17.10#throttle
  // You could do like...
  // window.addEventListener("scroll", () => {
  //    _.throttle(doThatStuff, 100);
  // });
  // Only not doing it here to keep this Pen dependency-free.

  window.addEventListener("scroll", event => {
    let fromTop = window.scrollY;

    mainNavLinks.forEach((link, index) => {
      let section = document.getElementById(decodeURI(link.hash).substring(1));
      let nextSection = null
      if (mainNavLinks[index + 1]) {
        nextSection = document.getElementById(decodeURI(mainNavLinks[index + 1].hash).substring(1));
      }
      if (section.offsetTop <= fromTop) {
        if (nextSection) {
          if (nextSection.offsetTop > fromTop) {
            link.classList.add("current");
          } else {
            link.classList.remove("current");    
          }
        } else {
          link.classList.add("current");
        }
      } else {
        link.classList.remove("current");
      }
    });
  });

</script>

      </div>
    </div>
  </body>
</html>
